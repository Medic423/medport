
> tcc-backend@1.0.0 dev
> nodemon src/index.ts

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: ts,json[39m
[32m[nodemon] starting `ts-node src/index.ts`[39m
TCC_DEBUG: AuthService constructor - JWT_SECRET loaded: YES
TCC_DEBUG: JWT_SECRET value: your-super-secret-jwt-key-here
TCC_DEBUG: SMS carriers initialized: 5
TCC_DEBUG: Twilio credentials not configured
TCC_DEBUG: SendGrid API key not configured
TCC_DEBUG: FRONTEND_URL = "http://localhost:3000"
TCC_DEBUG: Cleaned frontendUrl = "http://localhost:3000"
TCC_DEBUG: Cleaned corsOrigin = "http://localhost:3000"
üöÄ TCC Backend server running on port 5001
üìä Health check: http://localhost:5001/health
üîê Auth endpoint: http://localhost:5001/api/auth/login
üöó Trips API: http://localhost:5001/api/trips
üè• Hospitals API: http://localhost:5001/api/tcc/hospitals
üöë Agencies API: http://localhost:5001/api/tcc/agencies
üè¢ Facilities API: http://localhost:5001/api/tcc/facilities
üìà Analytics API: http://localhost:5001/api/tcc/analytics
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Create agency response request received: {
  tripId: 'cmh7sjgag0000pohpw785q551',
  agencyId: 'cmgzdos7h0005pgnvqjcczd8b',
  response: 'ACCEPTED',
  responseNotes: 'Accepted by EMS agency'
}
TCC_DEBUG: Parsed fields: {
  tripId: 'cmh7sjgag0000pohpw785q551',
  agencyId: 'cmgzdos7h0005pgnvqjcczd8b',
  response: 'ACCEPTED',
  responseNotes: 'Accepted by EMS agency',
  estimatedArrival: undefined
}
TCC_DEBUG: Creating agency response: {
  tripId: 'cmh7sjgag0000pohpw785q551',
  agencyId: 'cmgzdos7h0005pgnvqjcczd8b',
  response: 'ACCEPTED',
  responseNotes: 'Accepted by EMS agency',
  estimatedArrival: undefined
}
prisma:error 
Invalid `prisma.agencyResponse.create()` invocation in
/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:58

  1029 
  1030 try {
  1031   // Create the agency response record
‚Üí 1032   const agencyResponse = await prisma.agencyResponse.create(
Foreign key constraint violated: `agency_responses_tripId_fkey (index)`
TCC_DEBUG: Error creating agency response: PrismaClientKnownRequestError: 
Invalid `prisma.agencyResponse.create()` invocation in
/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:58

  1029 
  1030 try {
  1031   // Create the agency response record
‚Üí 1032   const agencyResponse = await prisma.agencyResponse.create(
Foreign key constraint violated: `agency_responses_tripId_fkey (index)`
    at $n.handleRequestError (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
    at $n.handleAndLogRequestError (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async TripService.createAgencyResponse (/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:30)
    at async /Users/scooper/Code/tcc-new-project/backend/src/routes/agencyResponses.ts:44:20 {
  code: 'P2003',
  clientVersion: '5.22.0',
  meta: {
    modelName: 'AgencyResponse',
    field_name: 'agency_responses_tripId_fkey (index)'
  }
}
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Create agency response request received: {
  tripId: 'cmh7sjgag0000pohpw785q551',
  agencyId: 'cmgzdos7h0005pgnvqjcczd8b',
  response: 'ACCEPTED',
  responseNotes: 'Accepted by EMS agency'
}
TCC_DEBUG: Parsed fields: {
  tripId: 'cmh7sjgag0000pohpw785q551',
  agencyId: 'cmgzdos7h0005pgnvqjcczd8b',
  response: 'ACCEPTED',
  responseNotes: 'Accepted by EMS agency',
  estimatedArrival: undefined
}
TCC_DEBUG: Creating agency response: {
  tripId: 'cmh7sjgag0000pohpw785q551',
  agencyId: 'cmgzdos7h0005pgnvqjcczd8b',
  response: 'ACCEPTED',
  responseNotes: 'Accepted by EMS agency',
  estimatedArrival: undefined
}
prisma:error 
Invalid `prisma.agencyResponse.create()` invocation in
/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:58

  1029 
  1030 try {
  1031   // Create the agency response record
‚Üí 1032   const agencyResponse = await prisma.agencyResponse.create(
Foreign key constraint violated: `agency_responses_tripId_fkey (index)`
TCC_DEBUG: Error creating agency response: PrismaClientKnownRequestError: 
Invalid `prisma.agencyResponse.create()` invocation in
/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:58

  1029 
  1030 try {
  1031   // Create the agency response record
‚Üí 1032   const agencyResponse = await prisma.agencyResponse.create(
Foreign key constraint violated: `agency_responses_tripId_fkey (index)`
    at $n.handleRequestError (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
    at $n.handleAndLogRequestError (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async TripService.createAgencyResponse (/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:30)
    at async /Users/scooper/Code/tcc-new-project/backend/src/routes/agencyResponses.ts:44:20 {
  code: 'P2003',
  clientVersion: '5.22.0',
  meta: {
    modelName: 'AgencyResponse',
    field_name: 'agency_responses_tripId_fkey (index)'
  }
}
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Create agency response request received: { tripId: 'test', agencyId: 'test', response: 'ACCEPTED' }
TCC_DEBUG: Parsed fields: {
  tripId: 'test',
  agencyId: 'test',
  response: 'ACCEPTED',
  responseNotes: undefined,
  estimatedArrival: undefined
}
TCC_DEBUG: Creating agency response: {
  tripId: 'test',
  agencyId: 'test',
  response: 'ACCEPTED',
  responseNotes: undefined,
  estimatedArrival: undefined
}
prisma:error 
Invalid `prisma.agencyResponse.create()` invocation in
/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:58

  1029 
  1030 try {
  1031   // Create the agency response record
‚Üí 1032   const agencyResponse = await prisma.agencyResponse.create(
Foreign key constraint violated: `agency_responses_tripId_fkey (index)`
TCC_DEBUG: Error creating agency response: PrismaClientKnownRequestError: 
Invalid `prisma.agencyResponse.create()` invocation in
/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:58

  1029 
  1030 try {
  1031   // Create the agency response record
‚Üí 1032   const agencyResponse = await prisma.agencyResponse.create(
Foreign key constraint violated: `agency_responses_tripId_fkey (index)`
    at $n.handleRequestError (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
    at $n.handleAndLogRequestError (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async TripService.createAgencyResponse (/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:30)
    at async /Users/scooper/Code/tcc-new-project/backend/src/routes/agencyResponses.ts:44:20 {
  code: 'P2003',
  clientVersion: '5.22.0',
  meta: {
    modelName: 'AgencyResponse',
    field_name: 'agency_responses_tripId_fkey (index)'
  }
}
TCC_DEBUG: Get agency responses request with query: {}
TCC_DEBUG: Getting agency responses with filters: {
  tripId: undefined,
  agencyId: undefined,
  response: undefined,
  isSelected: undefined,
  dateFrom: undefined,
  dateTo: undefined
}
TCC_DEBUG: Found 2 agency responses in database
TCC_DEBUG: Returning 2 agency responses with trip details
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Create agency response request received: {
  tripId: 'test123',
  agencyId: 'test456',
  response: 'ACCEPTED',
  responseNotes: 'Test'
}
TCC_DEBUG: Parsed fields: {
  tripId: 'test123',
  agencyId: 'test456',
  response: 'ACCEPTED',
  responseNotes: 'Test',
  estimatedArrival: undefined
}
TCC_DEBUG: Creating agency response: {
  tripId: 'test123',
  agencyId: 'test456',
  response: 'ACCEPTED',
  responseNotes: 'Test',
  estimatedArrival: undefined
}
prisma:error 
Invalid `prisma.agencyResponse.create()` invocation in
/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:58

  1029 
  1030 try {
  1031   // Create the agency response record
‚Üí 1032   const agencyResponse = await prisma.agencyResponse.create(
Foreign key constraint violated: `agency_responses_tripId_fkey (index)`
TCC_DEBUG: Error creating agency response: PrismaClientKnownRequestError: 
Invalid `prisma.agencyResponse.create()` invocation in
/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:58

  1029 
  1030 try {
  1031   // Create the agency response record
‚Üí 1032   const agencyResponse = await prisma.agencyResponse.create(
Foreign key constraint violated: `agency_responses_tripId_fkey (index)`
    at $n.handleRequestError (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
    at $n.handleAndLogRequestError (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async TripService.createAgencyResponse (/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:30)
    at async /Users/scooper/Code/tcc-new-project/backend/src/routes/agencyResponses.ts:44:20 {
  code: 'P2003',
  clientVersion: '5.22.0',
  meta: {
    modelName: 'AgencyResponse',
    field_name: 'agency_responses_tripId_fkey (index)'
  }
}
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Create agency response request received: { tripId: 'test', agencyId: 'test', response: 'ACCEPTED' }
TCC_DEBUG: Parsed fields: {
  tripId: 'test',
  agencyId: 'test',
  response: 'ACCEPTED',
  responseNotes: undefined,
  estimatedArrival: undefined
}
TCC_DEBUG: Creating agency response: {
  tripId: 'test',
  agencyId: 'test',
  response: 'ACCEPTED',
  responseNotes: undefined,
  estimatedArrival: undefined
}
prisma:error 
Invalid `prisma.agencyResponse.create()` invocation in
/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:58

  1029 
  1030 try {
  1031   // Create the agency response record
‚Üí 1032   const agencyResponse = await prisma.agencyResponse.create(
Foreign key constraint violated: `agency_responses_tripId_fkey (index)`
TCC_DEBUG: Error creating agency response: PrismaClientKnownRequestError: 
Invalid `prisma.agencyResponse.create()` invocation in
/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:58

  1029 
  1030 try {
  1031   // Create the agency response record
‚Üí 1032   const agencyResponse = await prisma.agencyResponse.create(
Foreign key constraint violated: `agency_responses_tripId_fkey (index)`
    at $n.handleRequestError (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:7315)
    at $n.handleAndLogRequestError (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:6623)
    at $n.request (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:121:6307)
    at async l (/Users/scooper/Code/tcc-new-project/backend/node_modules/@prisma/client/runtime/library.js:130:9633)
    at async TripService.createAgencyResponse (/Users/scooper/Code/tcc-new-project/backend/src/services/tripService.ts:1032:30)
    at async /Users/scooper/Code/tcc-new-project/backend/src/routes/agencyResponses.ts:44:20 {
  code: 'P2003',
  clientVersion: '5.22.0',
  meta: {
    modelName: 'AgencyResponse',
    field_name: 'agency_responses_tripId_fkey (index)'
  }
}
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node src/index.ts`[39m
TCC_DEBUG: AuthService constructor - JWT_SECRET loaded: YES
TCC_DEBUG: JWT_SECRET value: your-super-secret-jwt-key-here
TCC_DEBUG: SMS carriers initialized: 5
TCC_DEBUG: Twilio credentials not configured
TCC_DEBUG: SendGrid API key not configured
TCC_DEBUG: FRONTEND_URL = "http://localhost:3000"
TCC_DEBUG: Cleaned frontendUrl = "http://localhost:3000"
TCC_DEBUG: Cleaned corsOrigin = "http://localhost:3000"
üöÄ TCC Backend server running on port 5001
üìä Health check: http://localhost:5001/health
üîê Auth endpoint: http://localhost:5001/api/auth/login
üöó Trips API: http://localhost:5001/api/trips
üè• Hospitals API: http://localhost:5001/api/tcc/hospitals
üöë Agencies API: http://localhost:5001/api/tcc/agencies
üè¢ Facilities API: http://localhost:5001/api/tcc/facilities
üìà Analytics API: http://localhost:5001/api/tcc/analytics
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node src/index.ts`[39m
TCC_DEBUG: AuthService constructor - JWT_SECRET loaded: YES
TCC_DEBUG: JWT_SECRET value: your-super-secret-jwt-key-here
TCC_DEBUG: SMS carriers initialized: 5
TCC_DEBUG: Twilio credentials not configured
TCC_DEBUG: SendGrid API key not configured
TCC_DEBUG: FRONTEND_URL = "http://localhost:3000"
TCC_DEBUG: Cleaned frontendUrl = "http://localhost:3000"
TCC_DEBUG: Cleaned corsOrigin = "http://localhost:3000"
üöÄ TCC Backend server running on port 5001
üìä Health check: http://localhost:5001/health
üîê Auth endpoint: http://localhost:5001/api/auth/login
üöó Trips API: http://localhost:5001/api/trips
üè• Hospitals API: http://localhost:5001/api/tcc/hospitals
üöë Agencies API: http://localhost:5001/api/tcc/agencies
üè¢ Facilities API: http://localhost:5001/api/tcc/facilities
üìà Analytics API: http://localhost:5001/api/tcc/analytics
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'PENDING' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'PENDING',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 1
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7sjgag0000pohpw785q551',
    status: 'PENDING',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [ { id: 'cmh7sjgag0000pohpw785q551', healthcareCreatedById: null } ]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands State College',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands State College
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'ACCEPTED,IN_PROGRESS' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'ACCEPTED,IN_PROGRESS',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 2
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh7rul1u0002nskmzlurq6y8',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh219ud20003hizqjm4nueum',
    assignedUnit: {
      id: 'cmh219ud20003hizqjm4nueum',
      unitNumber: 'Test-003- Wheelchair',
      type: 'WHEELCHAIR_VAN'
    }
  },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    status: 'ACCEPTED',
    assignedUnitId: 'cmh7mv0mx000611zcskleddr0',
    assignedUnit: {
      id: 'cmh7mv0mx000611zcskleddr0',
      unitNumber: 'Elk - 420',
      type: 'AMBULANCE'
    }
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  { id: 'cmh7rul1u0002nskmzlurq6y8', healthcareCreatedById: null },
  {
    id: 'cmh7rl1pq0001nskmxke796py',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Huntingdon',
  toLocation: 'Penn Highlands DuBois',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Calculate distance request: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands State College',
  fromLocationId: undefined,
  destinationFacilityId: undefined
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Huntingdon
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: authenticateAdmin - authHeader: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA
TCC_DEBUG: authenticateAdmin - cookies: {
  tcc_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImNtZ3pkb3M3azAwMDZwZ252aXR4cHcxd2IiLCJlbWFpbCI6ImRvZUBlbGtjb2Vtcy5jb20iLCJ1c2VyVHlwZSI6IkVNUyIsImlhdCI6MTc2MTQ4ODM1NSwiZXhwIjoxNzYxNTc0NzU1fQ.Pdy_M6yhYUS02DiP4qDLwADCTc8UELI0OE3iLJqRCBA'
}
TCC_DEBUG: authenticateAdmin - token from header: eyJhbGciOiJIUzI1NiIs...
TCC_DEBUG: verifyToken called with JWT_SECRET: SET
TCC_DEBUG: Token decoded successfully: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  userType: 'EMS'
}
TCC_DEBUG: Get trips request with query: { status: 'COMPLETED' }
TCC_DEBUG: Authenticated user: {
  id: 'cmgzdos7k0006pgnvitxpw1wb',
  email: 'doe@elkcoems.com',
  name: 'John Doer',
  userType: 'EMS',
  agencyName: 'Elk County EMS',
  agencyId: 'cmgzdos7k0006pgnvitxpw1wb'
}
TCC_DEBUG: Getting trips with filters: {
  status: 'COMPLETED',
  transportLevel: undefined,
  priority: undefined,
  agencyId: undefined,
  healthcareUserId: undefined
}
MULTI_LOC: Location filters - fromLocationId: undefined healthcareUserId: undefined
TCC_DEBUG: Found trips: 13
TCC_DEBUG: Trips sample fields ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    status: 'COMPLETED',
    assignedUnitId: null,
    assignedUnit: null
  }
]
TCC_FILTER_DEBUG: Trips healthcareCreatedById sample ‚Üí [
  {
    id: 'cmh3iqiig0002uv104b5onjc2',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh3gyfeu0000ypb6eai3juyf',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  },
  {
    id: 'cmh0npdd60008pgnv7a4wdx5j',
    healthcareCreatedById: 'cmgibjbrg0000jdab1lrxhfe1'
  }
]
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands DuBois',
  toLocation: 'Penn Highlands Elk'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands DuBois
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Connellsville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Penn Highlands Tyrone' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Test Hospital',
  toLocation: 'Penn Highlands State College'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Brookville',
  toLocation: 'Penn Highlands DuBois'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Brookville
TCC_DEBUG: Calculating trip distance and time: { fromLocation: 'Test Hospital', toLocation: 'Cleveland Clinic' }
TCC_DEBUG: Looking up coordinates for fromLocation: Test Hospital
TCC_DEBUG: Calculating trip distance and time: {
  fromLocation: 'Penn Highlands Clearfield',
  toLocation: 'Penn Highlands Brookville'
}
TCC_DEBUG: Looking up coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Connellsville
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands DuBois
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 40.7128, longitude: -74.006 }
TCC_DEBUG: Looking up coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Using mock coordinates for fromLocation: Penn Highlands Clearfield
TCC_DEBUG: Looking up coordinates for toLocation: Penn Highlands Brookville
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Elk
TCC_DEBUG: Calculated distance: 150.83238869714305 miles, estimated time: 302 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 87.98432552000615 miles, estimated time: 176 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 126.13463604926514 miles, estimated time: 252 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 133.7870504023064 miles, estimated time: 268 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands Tyrone
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Penn Highlands State College
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1192, longitude: -78.7603 }
TCC_DEBUG: Calculated distance: 17.048887048562566 miles, estimated time: 34 minutes
TCC_DEBUG: Using mock coordinates for toLocation: Cleveland Clinic
TCC_DEBUG: Calculated distance: 400.08515273699214 miles, estimated time: 800 minutes
TCC_DEBUG: Found coordinates from healthcare location: { latitude: 41.1614, longitude: -79.0831 }
TCC_DEBUG: Calculated distance: 79.59963248949543 miles, estimated time: 159 minutes
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node src/index.ts`[39m
TCC_DEBUG: AuthService constructor - JWT_SECRET loaded: YES
TCC_DEBUG: JWT_SECRET value: your-super-secret-jwt-key-here
/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:859
    return new TSError(diagnosticText, diagnosticCodes, diagnostics);
           ^
TSError: ‚®Ø Unable to compile TypeScript:
src/routes/agencyResponses.ts(319,38): error TS2554: Expected 2 arguments, but got 1.

    at createTSError (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:859:12)
    at reportTSError (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:863:19)
    at getOutput (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1077:36)
    at Object.compile (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1433:41)
    at Module.m._compile (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1617:30)
    at node:internal/modules/cjs/loader:1824:10
    at Object.require.extensions.<computed> [as .ts] (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1427:32)
    at Module._load (node:internal/modules/cjs/loader:1250:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14) {
  diagnosticCodes: [ 2554 ]
}
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node src/index.ts`[39m
TCC_DEBUG: AuthService constructor - JWT_SECRET loaded: YES
TCC_DEBUG: JWT_SECRET value: your-super-secret-jwt-key-here
/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:859
    return new TSError(diagnosticText, diagnosticCodes, diagnostics);
           ^
TSError: ‚®Ø Unable to compile TypeScript:
src/services/tripService.ts(1275,47): error TS2552: Cannot find name 'agencyResponseId'. Did you mean 'agencyResponse'?

    at createTSError (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:859:12)
    at reportTSError (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:863:19)
    at getOutput (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1077:36)
    at Object.compile (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1433:41)
    at Module.m._compile (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1617:30)
    at node:internal/modules/cjs/loader:1824:10
    at Object.require.extensions.<computed> [as .ts] (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1427:32)
    at Module._load (node:internal/modules/cjs/loader:1250:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14) {
  diagnosticCodes: [ 2552 ]
}
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node src/index.ts`[39m
TCC_DEBUG: AuthService constructor - JWT_SECRET loaded: YES
TCC_DEBUG: JWT_SECRET value: your-super-secret-jwt-key-here
/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:859
    return new TSError(diagnosticText, diagnosticCodes, diagnostics);
           ^
TSError: ‚®Ø Unable to compile TypeScript:
src/routes/agencyResponses.ts(219,81): error TS2554: Expected 1 arguments, but got 2.

    at createTSError (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:859:12)
    at reportTSError (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:863:19)
    at getOutput (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1077:36)
    at Object.compile (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1433:41)
    at Module.m._compile (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1617:30)
    at node:internal/modules/cjs/loader:1824:10
    at Object.require.extensions.<computed> [as .ts] (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1427:32)
    at Module._load (node:internal/modules/cjs/loader:1250:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14) {
  diagnosticCodes: [ 2554 ]
}
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node src/index.ts`[39m
TCC_DEBUG: AuthService constructor - JWT_SECRET loaded: YES
TCC_DEBUG: JWT_SECRET value: your-super-secret-jwt-key-here
TCC_DEBUG: SMS carriers initialized: 5
TCC_DEBUG: Twilio credentials not configured
TCC_DEBUG: SendGrid API key not configured
TCC_DEBUG: FRONTEND_URL = "http://localhost:3000"
TCC_DEBUG: Cleaned frontendUrl = "http://localhost:3000"
TCC_DEBUG: Cleaned corsOrigin = "http://localhost:3000"
Error: listen EADDRINUSE: address already in use :::5001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at Server.listen (node:net:2102:7)
    at app.listen (/Users/scooper/Code/tcc-new-project/backend/node_modules/express/lib/application.js:635:24)
    at startServer (/Users/scooper/Code/tcc-new-project/backend/src/index.ts:333:9)
    at Object.<anonymous> (/Users/scooper/Code/tcc-new-project/backend/src/index.ts:351:3)
    at Module._compile (node:internal/modules/cjs/loader:1692:14)
    at Module.m._compile (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1618:23)
    at node:internal/modules/cjs/loader:1824:10
    at Object.require.extensions.<computed> [as .ts] (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1621:12) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '::',
  port: 5001
}
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node src/index.ts`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node src/index.ts`[39m
TCC_DEBUG: AuthService constructor - JWT_SECRET loaded: YES
TCC_DEBUG: JWT_SECRET value: your-super-secret-jwt-key-here
TCC_DEBUG: SMS carriers initialized: 5
TCC_DEBUG: Twilio credentials not configured
TCC_DEBUG: SendGrid API key not configured
TCC_DEBUG: FRONTEND_URL = "http://localhost:3000"
TCC_DEBUG: Cleaned frontendUrl = "http://localhost:3000"
TCC_DEBUG: Cleaned corsOrigin = "http://localhost:3000"
Error: listen EADDRINUSE: address already in use :::5001
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at Server.listen (node:net:2102:7)
    at app.listen (/Users/scooper/Code/tcc-new-project/backend/node_modules/express/lib/application.js:635:24)
    at startServer (/Users/scooper/Code/tcc-new-project/backend/src/index.ts:333:9)
    at Object.<anonymous> (/Users/scooper/Code/tcc-new-project/backend/src/index.ts:351:3)
    at Module._compile (node:internal/modules/cjs/loader:1692:14)
    at Module.m._compile (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1618:23)
    at node:internal/modules/cjs/loader:1824:10
    at Object.require.extensions.<computed> [as .ts] (/Users/scooper/Code/tcc-new-project/backend/node_modules/ts-node/src/index.ts:1621:12) {
  code: 'EADDRINUSE',
  errno: -48,
  syscall: 'listen',
  address: '::',
  port: 5001
}
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
