var Nh=Object.defineProperty;var wh=(e,s,n)=>s in e?Nh(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n;var bc=(e,s,n)=>wh(e,typeof s!="symbol"?s+"":s,n);function Ch(e,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Sh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gu={exports:{}},Wa={},xu={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cr=Symbol.for("react.element"),kh=Symbol.for("react.portal"),Lh=Symbol.for("react.fragment"),Eh=Symbol.for("react.strict_mode"),Th=Symbol.for("react.profiler"),Ah=Symbol.for("react.provider"),Rh=Symbol.for("react.context"),Dh=Symbol.for("react.forward_ref"),Ph=Symbol.for("react.suspense"),Mh=Symbol.for("react.memo"),Ih=Symbol.for("react.lazy"),jc=Symbol.iterator;function _h(e){return e===null||typeof e!="object"?null:(e=jc&&e[jc]||e["@@iterator"],typeof e=="function"?e:null)}var yu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vu=Object.assign,bu={};function An(e,s,n){this.props=e,this.context=s,this.refs=bu,this.updater=n||yu}An.prototype.isReactComponent={};An.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};An.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ju(){}ju.prototype=An.prototype;function si(e,s,n){this.props=e,this.context=s,this.refs=bu,this.updater=n||yu}var ni=si.prototype=new ju;ni.constructor=si;vu(ni,An.prototype);ni.isPureReactComponent=!0;var Nc=Array.isArray,Nu=Object.prototype.hasOwnProperty,ri={current:null},wu={key:!0,ref:!0,__self:!0,__source:!0};function Cu(e,s,n){var r,a={},l=null,o=null;if(s!=null)for(r in s.ref!==void 0&&(o=s.ref),s.key!==void 0&&(l=""+s.key),s)Nu.call(s,r)&&!wu.hasOwnProperty(r)&&(a[r]=s[r]);var i=arguments.length-2;if(i===1)a.children=n;else if(1<i){for(var c=Array(i),m=0;m<i;m++)c[m]=arguments[m+2];a.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)a[r]===void 0&&(a[r]=i[r]);return{$$typeof:Cr,type:e,key:l,ref:o,props:a,_owner:ri.current}}function Uh(e,s){return{$$typeof:Cr,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function ai(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cr}function Fh(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return s[n]})}var wc=/\/+/g;function yl(e,s){return typeof e=="object"&&e!==null&&e.key!=null?Fh(""+e.key):s.toString(36)}function sa(e,s,n,r,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Cr:case kh:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+yl(o,0):r,Nc(a)?(n="",e!=null&&(n=e.replace(wc,"$&/")+"/"),sa(a,s,n,"",function(m){return m})):a!=null&&(ai(a)&&(a=Uh(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(wc,"$&/")+"/")+e)),s.push(a)),1;if(o=0,r=r===""?".":r+":",Nc(e))for(var i=0;i<e.length;i++){l=e[i];var c=r+yl(l,i);o+=sa(l,s,n,c,a)}else if(c=_h(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=r+yl(l,i++),o+=sa(l,s,n,c,a);else if(l==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return o}function Ur(e,s,n){if(e==null)return e;var r=[],a=0;return sa(e,r,"","",function(l){return s.call(n,l,a++)}),r}function Oh(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var lt={current:null},na={transition:null},Bh={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:na,ReactCurrentOwner:ri};function Su(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Ur,forEach:function(e,s,n){Ur(e,function(){s.apply(this,arguments)},n)},count:function(e){var s=0;return Ur(e,function(){s++}),s},toArray:function(e){return Ur(e,function(s){return s})||[]},only:function(e){if(!ai(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=An;we.Fragment=Lh;we.Profiler=Th;we.PureComponent=si;we.StrictMode=Eh;we.Suspense=Ph;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bh;we.act=Su;we.cloneElement=function(e,s,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=vu({},e.props),a=e.key,l=e.ref,o=e._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,o=ri.current),s.key!==void 0&&(a=""+s.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in s)Nu.call(s,c)&&!wu.hasOwnProperty(c)&&(r[c]=s[c]===void 0&&i!==void 0?i[c]:s[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var m=0;m<c;m++)i[m]=arguments[m+2];r.children=i}return{$$typeof:Cr,type:e.type,key:a,ref:l,props:r,_owner:o}};we.createContext=function(e){return e={$$typeof:Rh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ah,_context:e},e.Consumer=e};we.createElement=Cu;we.createFactory=function(e){var s=Cu.bind(null,e);return s.type=e,s};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:Dh,render:e}};we.isValidElement=ai;we.lazy=function(e){return{$$typeof:Ih,_payload:{_status:-1,_result:e},_init:Oh}};we.memo=function(e,s){return{$$typeof:Mh,type:e,compare:s===void 0?null:s}};we.startTransition=function(e){var s=na.transition;na.transition={};try{e()}finally{na.transition=s}};we.unstable_act=Su;we.useCallback=function(e,s){return lt.current.useCallback(e,s)};we.useContext=function(e){return lt.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return lt.current.useDeferredValue(e)};we.useEffect=function(e,s){return lt.current.useEffect(e,s)};we.useId=function(){return lt.current.useId()};we.useImperativeHandle=function(e,s,n){return lt.current.useImperativeHandle(e,s,n)};we.useInsertionEffect=function(e,s){return lt.current.useInsertionEffect(e,s)};we.useLayoutEffect=function(e,s){return lt.current.useLayoutEffect(e,s)};we.useMemo=function(e,s){return lt.current.useMemo(e,s)};we.useReducer=function(e,s,n){return lt.current.useReducer(e,s,n)};we.useRef=function(e){return lt.current.useRef(e)};we.useState=function(e){return lt.current.useState(e)};we.useSyncExternalStore=function(e,s,n){return lt.current.useSyncExternalStore(e,s,n)};we.useTransition=function(){return lt.current.useTransition()};we.version="18.3.1";xu.exports=we;var x=xu.exports;const Sr=Sh(x),zh=Ch({__proto__:null,default:Sr},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $h=x,Gh=Symbol.for("react.element"),Hh=Symbol.for("react.fragment"),qh=Object.prototype.hasOwnProperty,Wh=$h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vh={key:!0,ref:!0,__self:!0,__source:!0};function ku(e,s,n){var r,a={},l=null,o=null;n!==void 0&&(l=""+n),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(o=s.ref);for(r in s)qh.call(s,r)&&!Vh.hasOwnProperty(r)&&(a[r]=s[r]);if(e&&e.defaultProps)for(r in s=e.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:Gh,type:e,key:l,ref:o,props:a,_owner:Wh.current}}Wa.Fragment=Hh;Wa.jsx=ku;Wa.jsxs=ku;gu.exports=Wa;var t=gu.exports,Jl={},Lu={exports:{}},Nt={},Eu={exports:{}},Tu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(T,A){var L=T.length;T.push(A);e:for(;0<L;){var R=L-1>>>1,q=T[R];if(0<a(q,A))T[R]=A,T[L]=q,L=R;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var A=T[0],L=T.pop();if(L!==A){T[0]=L;e:for(var R=0,q=T.length,k=q>>>1;R<k;){var G=2*(R+1)-1,Y=T[G],te=G+1,pe=T[te];if(0>a(Y,L))te<q&&0>a(pe,Y)?(T[R]=pe,T[te]=L,R=te):(T[R]=Y,T[G]=L,R=G);else if(te<q&&0>a(pe,L))T[R]=pe,T[te]=L,R=te;else break e}}return A}function a(T,A){var L=T.sortIndex-A.sortIndex;return L!==0?L:T.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var c=[],m=[],g=1,u=null,f=3,p=!1,d=!1,h=!1,j=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(T){for(var A=n(m);A!==null;){if(A.callback===null)r(m);else if(A.startTime<=T)r(m),A.sortIndex=A.expirationTime,s(c,A);else break;A=n(m)}}function C(T){if(h=!1,w(T),!d)if(n(c)!==null)d=!0,W(D);else{var A=n(m);A!==null&&M(C,A.startTime-T)}}function D(T,A){d=!1,h&&(h=!1,b(B),B=-1),p=!0;var L=f;try{for(w(A),u=n(c);u!==null&&(!(u.expirationTime>A)||T&&!ce());){var R=u.callback;if(typeof R=="function"){u.callback=null,f=u.priorityLevel;var q=R(u.expirationTime<=A);A=e.unstable_now(),typeof q=="function"?u.callback=q:u===n(c)&&r(c),w(A)}else r(c);u=n(c)}if(u!==null)var k=!0;else{var G=n(m);G!==null&&M(C,G.startTime-A),k=!1}return k}finally{u=null,f=L,p=!1}}var $=!1,O=null,B=-1,U=5,z=-1;function ce(){return!(e.unstable_now()-z<U)}function de(){if(O!==null){var T=e.unstable_now();z=T;var A=!0;try{A=O(!0,T)}finally{A?oe():($=!1,O=null)}}else $=!1}var oe;if(typeof y=="function")oe=function(){y(de)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,Q=S.port2;S.port1.onmessage=de,oe=function(){Q.postMessage(null)}}else oe=function(){j(de,0)};function W(T){O=T,$||($=!0,oe())}function M(T,A){B=j(function(){T(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){d||p||(d=!0,W(D))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var A=3;break;default:A=f}var L=f;f=A;try{return T()}finally{f=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,A){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var L=f;f=T;try{return A()}finally{f=L}},e.unstable_scheduleCallback=function(T,A,L){var R=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?R+L:R):L=R,T){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=L+q,T={id:g++,callback:A,priorityLevel:T,startTime:L,expirationTime:q,sortIndex:-1},L>R?(T.sortIndex=L,s(m,T),n(c)===null&&T===n(m)&&(h?(b(B),B=-1):h=!0,M(C,L-R))):(T.sortIndex=q,s(c,T),d||p||(d=!0,W(D))),T},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(T){var A=f;return function(){var L=f;f=A;try{return T.apply(this,arguments)}finally{f=L}}}})(Tu);Eu.exports=Tu;var Kh=Eu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh=x,jt=Kh;function ne(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)s+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Au=new Set,rr={};function Qs(e,s){jn(e,s),jn(e+"Capture",s)}function jn(e,s){for(rr[e]=s,e=0;e<s.length;e++)Au.add(s[e])}var es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yl=Object.prototype.hasOwnProperty,Jh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cc={},Sc={};function Yh(e){return Yl.call(Sc,e)?!0:Yl.call(Cc,e)?!1:Jh.test(e)?Sc[e]=!0:(Cc[e]=!0,!1)}function Xh(e,s,n,r){if(n!==null&&n.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Zh(e,s,n,r){if(s===null||typeof s>"u"||Xh(e,s,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function ot(e,s,n,r,a,l,o){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=s,this.sanitizeURL=l,this.removeEmptyString=o}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ye[e]=new ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];Ye[s]=new ot(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ye[e]=new ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ye[e]=new ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ye[e]=new ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ye[e]=new ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ye[e]=new ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ye[e]=new ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ye[e]=new ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var li=/[\-:]([a-z])/g;function oi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(li,oi);Ye[s]=new ot(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(li,oi);Ye[s]=new ot(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(li,oi);Ye[s]=new ot(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ye[e]=new ot(e,1,!1,e.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ye[e]=new ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function ii(e,s,n,r){var a=Ye.hasOwnProperty(s)?Ye[s]:null;(a!==null?a.type!==0:r||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Zh(s,n,a,r)&&(n=null),r||a===null?Yh(s)&&(n===null?e.removeAttribute(s):e.setAttribute(s,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(s=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(s):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,s,n):e.setAttribute(s,n))))}var as=Qh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fr=Symbol.for("react.element"),tn=Symbol.for("react.portal"),sn=Symbol.for("react.fragment"),ci=Symbol.for("react.strict_mode"),Xl=Symbol.for("react.profiler"),Ru=Symbol.for("react.provider"),Du=Symbol.for("react.context"),di=Symbol.for("react.forward_ref"),Zl=Symbol.for("react.suspense"),eo=Symbol.for("react.suspense_list"),ui=Symbol.for("react.memo"),os=Symbol.for("react.lazy"),Pu=Symbol.for("react.offscreen"),kc=Symbol.iterator;function _n(e){return e===null||typeof e!="object"?null:(e=kc&&e[kc]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,vl;function qn(e){if(vl===void 0)try{throw Error()}catch(n){var s=n.stack.trim().match(/\n( *(at )?)/);vl=s&&s[1]||""}return`
`+vl+e}var bl=!1;function jl(e,s){if(!e||bl)return"";bl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(m){var r=m}Reflect.construct(e,[],s)}else{try{s.call()}catch(m){r=m}e.call(s.prototype)}else{try{throw Error()}catch(m){r=m}e()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),l=r.stack.split(`
`),o=a.length-1,i=l.length-1;1<=o&&0<=i&&a[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==l[i]){if(o!==1||i!==1)do if(o--,i--,0>i||a[o]!==l[i]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=i);break}}}finally{bl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qn(e):""}function ef(e){switch(e.tag){case 5:return qn(e.type);case 16:return qn("Lazy");case 13:return qn("Suspense");case 19:return qn("SuspenseList");case 0:case 2:case 15:return e=jl(e.type,!1),e;case 11:return e=jl(e.type.render,!1),e;case 1:return e=jl(e.type,!0),e;default:return""}}function to(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case sn:return"Fragment";case tn:return"Portal";case Xl:return"Profiler";case ci:return"StrictMode";case Zl:return"Suspense";case eo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Du:return(e.displayName||"Context")+".Consumer";case Ru:return(e._context.displayName||"Context")+".Provider";case di:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ui:return s=e.displayName||null,s!==null?s:to(e.type)||"Memo";case os:s=e._payload,e=e._init;try{return to(e(s))}catch{}}return null}function tf(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return to(s);case 8:return s===ci?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ws(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Mu(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function sf(e){var s=Mu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),r=""+e[s];if(!e.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,l.call(this,o)}}),Object.defineProperty(e,s,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Or(e){e._valueTracker||(e._valueTracker=sf(e))}function Iu(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var n=s.getValue(),r="";return e&&(r=Mu(e)?e.checked?"true":"false":e.value),e=r,e!==n?(s.setValue(e),!0):!1}function va(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function so(e,s){var n=s.checked;return _e({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Lc(e,s){var n=s.defaultValue==null?"":s.defaultValue,r=s.checked!=null?s.checked:s.defaultChecked;n=ws(s.value!=null?s.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function _u(e,s){s=s.checked,s!=null&&ii(e,"checked",s,!1)}function no(e,s){_u(e,s);var n=ws(s.value),r=s.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?ro(e,s.type,n):s.hasOwnProperty("defaultValue")&&ro(e,s.type,ws(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function Ec(e,s,n){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var r=s.type;if(!(r!=="submit"&&r!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,n||s===e.value||(e.value=s),e.defaultValue=s}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ro(e,s,n){(s!=="number"||va(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Wn=Array.isArray;function hn(e,s,n,r){if(e=e.options,s){s={};for(var a=0;a<n.length;a++)s["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=s.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ws(n),s=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}s!==null||e[a].disabled||(s=e[a])}s!==null&&(s.selected=!0)}}function ao(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(ne(91));return _e({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Tc(e,s){var n=s.value;if(n==null){if(n=s.children,s=s.defaultValue,n!=null){if(s!=null)throw Error(ne(92));if(Wn(n)){if(1<n.length)throw Error(ne(93));n=n[0]}s=n}s==null&&(s=""),n=s}e._wrapperState={initialValue:ws(n)}}function Uu(e,s){var n=ws(s.value),r=ws(s.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),s.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ac(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function Fu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lo(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?Fu(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Br,Ou=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(s,n,r,a)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(Br=Br||document.createElement("div"),Br.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Br.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function ar(e,s){if(s){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=s;return}}e.textContent=s}var Qn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nf=["Webkit","ms","Moz","O"];Object.keys(Qn).forEach(function(e){nf.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),Qn[s]=Qn[e]})});function Bu(e,s,n){return s==null||typeof s=="boolean"||s===""?"":n||typeof s!="number"||s===0||Qn.hasOwnProperty(e)&&Qn[e]?(""+s).trim():s+"px"}function zu(e,s){e=e.style;for(var n in s)if(s.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=Bu(n,s[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var rf=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oo(e,s){if(s){if(rf[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(ne(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(ne(61))}if(s.style!=null&&typeof s.style!="object")throw Error(ne(62))}}function io(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var co=null;function mi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var uo=null,fn=null,gn=null;function Rc(e){if(e=Er(e)){if(typeof uo!="function")throw Error(ne(280));var s=e.stateNode;s&&(s=Ya(s),uo(e.stateNode,e.type,s))}}function $u(e){fn?gn?gn.push(e):gn=[e]:fn=e}function Gu(){if(fn){var e=fn,s=gn;if(gn=fn=null,Rc(e),s)for(e=0;e<s.length;e++)Rc(s[e])}}function Hu(e,s){return e(s)}function qu(){}var Nl=!1;function Wu(e,s,n){if(Nl)return e(s,n);Nl=!0;try{return Hu(e,s,n)}finally{Nl=!1,(fn!==null||gn!==null)&&(qu(),Gu())}}function lr(e,s){var n=e.stateNode;if(n===null)return null;var r=Ya(n);if(r===null)return null;n=r[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ne(231,s,typeof n));return n}var mo=!1;if(es)try{var Un={};Object.defineProperty(Un,"passive",{get:function(){mo=!0}}),window.addEventListener("test",Un,Un),window.removeEventListener("test",Un,Un)}catch{mo=!1}function af(e,s,n,r,a,l,o,i,c){var m=Array.prototype.slice.call(arguments,3);try{s.apply(n,m)}catch(g){this.onError(g)}}var Jn=!1,ba=null,ja=!1,po=null,lf={onError:function(e){Jn=!0,ba=e}};function of(e,s,n,r,a,l,o,i,c){Jn=!1,ba=null,af.apply(lf,arguments)}function cf(e,s,n,r,a,l,o,i,c){if(of.apply(this,arguments),Jn){if(Jn){var m=ba;Jn=!1,ba=null}else throw Error(ne(198));ja||(ja=!0,po=m)}}function Js(e){var s=e,n=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(n=s.return),e=s.return;while(e)}return s.tag===3?n:null}function Vu(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function Dc(e){if(Js(e)!==e)throw Error(ne(188))}function df(e){var s=e.alternate;if(!s){if(s=Js(e),s===null)throw Error(ne(188));return s!==e?null:e}for(var n=e,r=s;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return Dc(a),e;if(l===r)return Dc(a),s;l=l.sibling}throw Error(ne(188))}if(n.return!==r.return)n=a,r=l;else{for(var o=!1,i=a.child;i;){if(i===n){o=!0,n=a,r=l;break}if(i===r){o=!0,r=a,n=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===n){o=!0,n=l,r=a;break}if(i===r){o=!0,r=l,n=a;break}i=i.sibling}if(!o)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?e:s}function Ku(e){return e=df(e),e!==null?Qu(e):null}function Qu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=Qu(e);if(s!==null)return s;e=e.sibling}return null}var Ju=jt.unstable_scheduleCallback,Pc=jt.unstable_cancelCallback,uf=jt.unstable_shouldYield,mf=jt.unstable_requestPaint,Oe=jt.unstable_now,pf=jt.unstable_getCurrentPriorityLevel,pi=jt.unstable_ImmediatePriority,Yu=jt.unstable_UserBlockingPriority,Na=jt.unstable_NormalPriority,hf=jt.unstable_LowPriority,Xu=jt.unstable_IdlePriority,Va=null,qt=null;function ff(e){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Va,e,void 0,(e.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:yf,gf=Math.log,xf=Math.LN2;function yf(e){return e>>>=0,e===0?32:31-(gf(e)/xf|0)|0}var zr=64,$r=4194304;function Vn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wa(e,s){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,o=n&268435455;if(o!==0){var i=o&~a;i!==0?r=Vn(i):(l&=o,l!==0&&(r=Vn(l)))}else o=n&~a,o!==0?r=Vn(o):l!==0&&(r=Vn(l));if(r===0)return 0;if(s!==0&&s!==r&&!(s&a)&&(a=r&-r,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(r&4&&(r|=n&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=r;0<s;)n=31-It(s),a=1<<n,r|=e[n],s&=~a;return r}function vf(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bf(e,s){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-It(l),i=1<<o,c=a[o];c===-1?(!(i&n)||i&r)&&(a[o]=vf(i,s)):c<=s&&(e.expiredLanes|=i),l&=~i}}function ho(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Zu(){var e=zr;return zr<<=1,!(zr&4194240)&&(zr=64),e}function wl(e){for(var s=[],n=0;31>n;n++)s.push(e);return s}function kr(e,s,n){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-It(s),e[s]=n}function jf(e,s){var n=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-It(n),l=1<<a;s[a]=0,r[a]=-1,e[a]=-1,n&=~l}}function hi(e,s){var n=e.entangledLanes|=s;for(e=e.entanglements;n;){var r=31-It(n),a=1<<r;a&s|e[r]&s&&(e[r]|=s),n&=~a}}var Ee=0;function em(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var tm,fi,sm,nm,rm,fo=!1,Gr=[],fs=null,gs=null,xs=null,or=new Map,ir=new Map,cs=[],Nf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mc(e,s){switch(e){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":or.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ir.delete(s.pointerId)}}function Fn(e,s,n,r,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:s,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},s!==null&&(s=Er(s),s!==null&&fi(s)),e):(e.eventSystemFlags|=r,s=e.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),e)}function wf(e,s,n,r,a){switch(s){case"focusin":return fs=Fn(fs,e,s,n,r,a),!0;case"dragenter":return gs=Fn(gs,e,s,n,r,a),!0;case"mouseover":return xs=Fn(xs,e,s,n,r,a),!0;case"pointerover":var l=a.pointerId;return or.set(l,Fn(or.get(l)||null,e,s,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,ir.set(l,Fn(ir.get(l)||null,e,s,n,r,a)),!0}return!1}function am(e){var s=Ms(e.target);if(s!==null){var n=Js(s);if(n!==null){if(s=n.tag,s===13){if(s=Vu(n),s!==null){e.blockedOn=s,rm(e.priority,function(){sm(n)});return}}else if(s===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ra(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var n=go(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);co=r,n.target.dispatchEvent(r),co=null}else return s=Er(n),s!==null&&fi(s),e.blockedOn=n,!1;s.shift()}return!0}function Ic(e,s,n){ra(e)&&n.delete(s)}function Cf(){fo=!1,fs!==null&&ra(fs)&&(fs=null),gs!==null&&ra(gs)&&(gs=null),xs!==null&&ra(xs)&&(xs=null),or.forEach(Ic),ir.forEach(Ic)}function On(e,s){e.blockedOn===s&&(e.blockedOn=null,fo||(fo=!0,jt.unstable_scheduleCallback(jt.unstable_NormalPriority,Cf)))}function cr(e){function s(a){return On(a,e)}if(0<Gr.length){On(Gr[0],e);for(var n=1;n<Gr.length;n++){var r=Gr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(fs!==null&&On(fs,e),gs!==null&&On(gs,e),xs!==null&&On(xs,e),or.forEach(s),ir.forEach(s),n=0;n<cs.length;n++)r=cs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<cs.length&&(n=cs[0],n.blockedOn===null);)am(n),n.blockedOn===null&&cs.shift()}var xn=as.ReactCurrentBatchConfig,Ca=!0;function Sf(e,s,n,r){var a=Ee,l=xn.transition;xn.transition=null;try{Ee=1,gi(e,s,n,r)}finally{Ee=a,xn.transition=l}}function kf(e,s,n,r){var a=Ee,l=xn.transition;xn.transition=null;try{Ee=4,gi(e,s,n,r)}finally{Ee=a,xn.transition=l}}function gi(e,s,n,r){if(Ca){var a=go(e,s,n,r);if(a===null)Pl(e,s,r,Sa,n),Mc(e,r);else if(wf(a,e,s,n,r))r.stopPropagation();else if(Mc(e,r),s&4&&-1<Nf.indexOf(e)){for(;a!==null;){var l=Er(a);if(l!==null&&tm(l),l=go(e,s,n,r),l===null&&Pl(e,s,r,Sa,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else Pl(e,s,r,null,n)}}var Sa=null;function go(e,s,n,r){if(Sa=null,e=mi(r),e=Ms(e),e!==null)if(s=Js(e),s===null)e=null;else if(n=s.tag,n===13){if(e=Vu(s),e!==null)return e;e=null}else if(n===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return Sa=e,null}function lm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pf()){case pi:return 1;case Yu:return 4;case Na:case hf:return 16;case Xu:return 536870912;default:return 16}default:return 16}}var us=null,xi=null,aa=null;function om(){if(aa)return aa;var e,s=xi,n=s.length,r,a="value"in us?us.value:us.textContent,l=a.length;for(e=0;e<n&&s[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&s[n-r]===a[l-r];r++);return aa=a.slice(e,1<r?1-r:void 0)}function la(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function Hr(){return!0}function _c(){return!1}function wt(e){function s(n,r,a,l,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Hr:_c,this.isPropagationStopped=_c,this}return _e(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hr)},persist:function(){},isPersistent:Hr}),s}var Rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yi=wt(Rn),Lr=_e({},Rn,{view:0,detail:0}),Lf=wt(Lr),Cl,Sl,Bn,Ka=_e({},Lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bn&&(Bn&&e.type==="mousemove"?(Cl=e.screenX-Bn.screenX,Sl=e.screenY-Bn.screenY):Sl=Cl=0,Bn=e),Cl)},movementY:function(e){return"movementY"in e?e.movementY:Sl}}),Uc=wt(Ka),Ef=_e({},Ka,{dataTransfer:0}),Tf=wt(Ef),Af=_e({},Lr,{relatedTarget:0}),kl=wt(Af),Rf=_e({},Rn,{animationName:0,elapsedTime:0,pseudoElement:0}),Df=wt(Rf),Pf=_e({},Rn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mf=wt(Pf),If=_e({},Rn,{data:0}),Fc=wt(If),_f={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ff={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Of(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Ff[e])?!!s[e]:!1}function vi(){return Of}var Bf=_e({},Lr,{key:function(e){if(e.key){var s=_f[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=la(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Uf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vi,charCode:function(e){return e.type==="keypress"?la(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?la(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zf=wt(Bf),$f=_e({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oc=wt($f),Gf=_e({},Lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vi}),Hf=wt(Gf),qf=_e({},Rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wf=wt(qf),Vf=_e({},Ka,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Kf=wt(Vf),Qf=[9,13,27,32],bi=es&&"CompositionEvent"in window,Yn=null;es&&"documentMode"in document&&(Yn=document.documentMode);var Jf=es&&"TextEvent"in window&&!Yn,im=es&&(!bi||Yn&&8<Yn&&11>=Yn),Bc=" ",zc=!1;function cm(e,s){switch(e){case"keyup":return Qf.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nn=!1;function Yf(e,s){switch(e){case"compositionend":return dm(s);case"keypress":return s.which!==32?null:(zc=!0,Bc);case"textInput":return e=s.data,e===Bc&&zc?null:e;default:return null}}function Xf(e,s){if(nn)return e==="compositionend"||!bi&&cm(e,s)?(e=om(),aa=xi=us=null,nn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return im&&s.locale!=="ko"?null:s.data;default:return null}}var Zf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $c(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!Zf[e.type]:s==="textarea"}function um(e,s,n,r){$u(r),s=ka(s,"onChange"),0<s.length&&(n=new yi("onChange","change",null,n,r),e.push({event:n,listeners:s}))}var Xn=null,dr=null;function eg(e){Nm(e,0)}function Qa(e){var s=ln(e);if(Iu(s))return e}function tg(e,s){if(e==="change")return s}var mm=!1;if(es){var Ll;if(es){var El="oninput"in document;if(!El){var Gc=document.createElement("div");Gc.setAttribute("oninput","return;"),El=typeof Gc.oninput=="function"}Ll=El}else Ll=!1;mm=Ll&&(!document.documentMode||9<document.documentMode)}function Hc(){Xn&&(Xn.detachEvent("onpropertychange",pm),dr=Xn=null)}function pm(e){if(e.propertyName==="value"&&Qa(dr)){var s=[];um(s,dr,e,mi(e)),Wu(eg,s)}}function sg(e,s,n){e==="focusin"?(Hc(),Xn=s,dr=n,Xn.attachEvent("onpropertychange",pm)):e==="focusout"&&Hc()}function ng(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qa(dr)}function rg(e,s){if(e==="click")return Qa(s)}function ag(e,s){if(e==="input"||e==="change")return Qa(s)}function lg(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Ut=typeof Object.is=="function"?Object.is:lg;function ur(e,s){if(Ut(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var n=Object.keys(e),r=Object.keys(s);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Yl.call(s,a)||!Ut(e[a],s[a]))return!1}return!0}function qc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wc(e,s){var n=qc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=s&&r>=s)return{node:n,offset:s-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qc(n)}}function hm(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?hm(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function fm(){for(var e=window,s=va();s instanceof e.HTMLIFrameElement;){try{var n=typeof s.contentWindow.location.href=="string"}catch{n=!1}if(n)e=s.contentWindow;else break;s=va(e.document)}return s}function ji(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function og(e){var s=fm(),n=e.focusedElem,r=e.selectionRange;if(s!==n&&n&&n.ownerDocument&&hm(n.ownerDocument.documentElement,n)){if(r!==null&&ji(n)){if(s=r.start,e=r.end,e===void 0&&(e=s),"selectionStart"in n)n.selectionStart=s,n.selectionEnd=Math.min(e,n.value.length);else if(e=(s=n.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=Wc(n,l);var o=Wc(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(s),e.extend(o.node,o.offset)):(s.setEnd(o.node,o.offset),e.addRange(s)))}}for(s=[],e=n;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<s.length;n++)e=s[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ig=es&&"documentMode"in document&&11>=document.documentMode,rn=null,xo=null,Zn=null,yo=!1;function Vc(e,s,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yo||rn==null||rn!==va(r)||(r=rn,"selectionStart"in r&&ji(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zn&&ur(Zn,r)||(Zn=r,r=ka(xo,"onSelect"),0<r.length&&(s=new yi("onSelect","select",null,s,n),e.push({event:s,listeners:r}),s.target=rn)))}function qr(e,s){var n={};return n[e.toLowerCase()]=s.toLowerCase(),n["Webkit"+e]="webkit"+s,n["Moz"+e]="moz"+s,n}var an={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionend:qr("Transition","TransitionEnd")},Tl={},gm={};es&&(gm=document.createElement("div").style,"AnimationEvent"in window||(delete an.animationend.animation,delete an.animationiteration.animation,delete an.animationstart.animation),"TransitionEvent"in window||delete an.transitionend.transition);function Ja(e){if(Tl[e])return Tl[e];if(!an[e])return e;var s=an[e],n;for(n in s)if(s.hasOwnProperty(n)&&n in gm)return Tl[e]=s[n];return e}var xm=Ja("animationend"),ym=Ja("animationiteration"),vm=Ja("animationstart"),bm=Ja("transitionend"),jm=new Map,Kc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(e,s){jm.set(e,s),Qs(s,[e])}for(var Al=0;Al<Kc.length;Al++){var Rl=Kc[Al],cg=Rl.toLowerCase(),dg=Rl[0].toUpperCase()+Rl.slice(1);ks(cg,"on"+dg)}ks(xm,"onAnimationEnd");ks(ym,"onAnimationIteration");ks(vm,"onAnimationStart");ks("dblclick","onDoubleClick");ks("focusin","onFocus");ks("focusout","onBlur");ks(bm,"onTransitionEnd");jn("onMouseEnter",["mouseout","mouseover"]);jn("onMouseLeave",["mouseout","mouseover"]);jn("onPointerEnter",["pointerout","pointerover"]);jn("onPointerLeave",["pointerout","pointerover"]);Qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ug=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kn));function Qc(e,s,n){var r=e.type||"unknown-event";e.currentTarget=n,cf(r,s,void 0,e),e.currentTarget=null}function Nm(e,s){s=(s&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(s)for(var o=r.length-1;0<=o;o--){var i=r[o],c=i.instance,m=i.currentTarget;if(i=i.listener,c!==l&&a.isPropagationStopped())break e;Qc(a,i,m),l=c}else for(o=0;o<r.length;o++){if(i=r[o],c=i.instance,m=i.currentTarget,i=i.listener,c!==l&&a.isPropagationStopped())break e;Qc(a,i,m),l=c}}}if(ja)throw e=po,ja=!1,po=null,e}function Ae(e,s){var n=s[wo];n===void 0&&(n=s[wo]=new Set);var r=e+"__bubble";n.has(r)||(wm(s,e,2,!1),n.add(r))}function Dl(e,s,n){var r=0;s&&(r|=4),wm(n,e,r,s)}var Wr="_reactListening"+Math.random().toString(36).slice(2);function mr(e){if(!e[Wr]){e[Wr]=!0,Au.forEach(function(n){n!=="selectionchange"&&(ug.has(n)||Dl(n,!1,e),Dl(n,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[Wr]||(s[Wr]=!0,Dl("selectionchange",!1,s))}}function wm(e,s,n,r){switch(lm(s)){case 1:var a=Sf;break;case 4:a=kf;break;default:a=gi}n=a.bind(null,s,n,e),a=void 0,!mo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(s,n,{capture:!0,passive:a}):e.addEventListener(s,n,!0):a!==void 0?e.addEventListener(s,n,{passive:a}):e.addEventListener(s,n,!1)}function Pl(e,s,n,r,a){var l=r;if(!(s&1)&&!(s&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var i=r.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;i!==null;){if(o=Ms(i),o===null)return;if(c=o.tag,c===5||c===6){r=l=o;continue e}i=i.parentNode}}r=r.return}Wu(function(){var m=l,g=mi(n),u=[];e:{var f=jm.get(e);if(f!==void 0){var p=yi,d=e;switch(e){case"keypress":if(la(n)===0)break e;case"keydown":case"keyup":p=zf;break;case"focusin":d="focus",p=kl;break;case"focusout":d="blur",p=kl;break;case"beforeblur":case"afterblur":p=kl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Tf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Hf;break;case xm:case ym:case vm:p=Df;break;case bm:p=Wf;break;case"scroll":p=Lf;break;case"wheel":p=Kf;break;case"copy":case"cut":case"paste":p=Mf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Oc}var h=(s&4)!==0,j=!h&&e==="scroll",b=h?f!==null?f+"Capture":null:f;h=[];for(var y=m,w;y!==null;){w=y;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,b!==null&&(C=lr(y,b),C!=null&&h.push(pr(y,C,w)))),j)break;y=y.return}0<h.length&&(f=new p(f,d,null,n,g),u.push({event:f,listeners:h}))}}if(!(s&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==co&&(d=n.relatedTarget||n.fromElement)&&(Ms(d)||d[ts]))break e;if((p||f)&&(f=g.window===g?g:(f=g.ownerDocument)?f.defaultView||f.parentWindow:window,p?(d=n.relatedTarget||n.toElement,p=m,d=d?Ms(d):null,d!==null&&(j=Js(d),d!==j||d.tag!==5&&d.tag!==6)&&(d=null)):(p=null,d=m),p!==d)){if(h=Uc,C="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(h=Oc,C="onPointerLeave",b="onPointerEnter",y="pointer"),j=p==null?f:ln(p),w=d==null?f:ln(d),f=new h(C,y+"leave",p,n,g),f.target=j,f.relatedTarget=w,C=null,Ms(g)===m&&(h=new h(b,y+"enter",d,n,g),h.target=w,h.relatedTarget=j,C=h),j=C,p&&d)t:{for(h=p,b=d,y=0,w=h;w;w=en(w))y++;for(w=0,C=b;C;C=en(C))w++;for(;0<y-w;)h=en(h),y--;for(;0<w-y;)b=en(b),w--;for(;y--;){if(h===b||b!==null&&h===b.alternate)break t;h=en(h),b=en(b)}h=null}else h=null;p!==null&&Jc(u,f,p,h,!1),d!==null&&j!==null&&Jc(u,j,d,h,!0)}}e:{if(f=m?ln(m):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var D=tg;else if($c(f))if(mm)D=ag;else{D=ng;var $=sg}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=rg);if(D&&(D=D(e,m))){um(u,D,n,g);break e}$&&$(e,f,m),e==="focusout"&&($=f._wrapperState)&&$.controlled&&f.type==="number"&&ro(f,"number",f.value)}switch($=m?ln(m):window,e){case"focusin":($c($)||$.contentEditable==="true")&&(rn=$,xo=m,Zn=null);break;case"focusout":Zn=xo=rn=null;break;case"mousedown":yo=!0;break;case"contextmenu":case"mouseup":case"dragend":yo=!1,Vc(u,n,g);break;case"selectionchange":if(ig)break;case"keydown":case"keyup":Vc(u,n,g)}var O;if(bi)e:{switch(e){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else nn?cm(e,n)&&(B="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(im&&n.locale!=="ko"&&(nn||B!=="onCompositionStart"?B==="onCompositionEnd"&&nn&&(O=om()):(us=g,xi="value"in us?us.value:us.textContent,nn=!0)),$=ka(m,B),0<$.length&&(B=new Fc(B,e,null,n,g),u.push({event:B,listeners:$}),O?B.data=O:(O=dm(n),O!==null&&(B.data=O)))),(O=Jf?Yf(e,n):Xf(e,n))&&(m=ka(m,"onBeforeInput"),0<m.length&&(g=new Fc("onBeforeInput","beforeinput",null,n,g),u.push({event:g,listeners:m}),g.data=O))}Nm(u,s)})}function pr(e,s,n){return{instance:e,listener:s,currentTarget:n}}function ka(e,s){for(var n=s+"Capture",r=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=lr(e,n),l!=null&&r.unshift(pr(e,l,a)),l=lr(e,s),l!=null&&r.push(pr(e,l,a))),e=e.return}return r}function en(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Jc(e,s,n,r,a){for(var l=s._reactName,o=[];n!==null&&n!==r;){var i=n,c=i.alternate,m=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&m!==null&&(i=m,a?(c=lr(n,l),c!=null&&o.unshift(pr(n,c,i))):a||(c=lr(n,l),c!=null&&o.push(pr(n,c,i)))),n=n.return}o.length!==0&&e.push({event:s,listeners:o})}var mg=/\r\n?/g,pg=/\u0000|\uFFFD/g;function Yc(e){return(typeof e=="string"?e:""+e).replace(mg,`
`).replace(pg,"")}function Vr(e,s,n){if(s=Yc(s),Yc(e)!==s&&n)throw Error(ne(425))}function La(){}var vo=null,bo=null;function jo(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var No=typeof setTimeout=="function"?setTimeout:void 0,hg=typeof clearTimeout=="function"?clearTimeout:void 0,Xc=typeof Promise=="function"?Promise:void 0,fg=typeof queueMicrotask=="function"?queueMicrotask:typeof Xc<"u"?function(e){return Xc.resolve(null).then(e).catch(gg)}:No;function gg(e){setTimeout(function(){throw e})}function Ml(e,s){var n=s,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),cr(s);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);cr(s)}function ys(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function Zc(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(s===0)return e;s--}else n==="/$"&&s++}e=e.previousSibling}return null}var Dn=Math.random().toString(36).slice(2),$t="__reactFiber$"+Dn,hr="__reactProps$"+Dn,ts="__reactContainer$"+Dn,wo="__reactEvents$"+Dn,xg="__reactListeners$"+Dn,yg="__reactHandles$"+Dn;function Ms(e){var s=e[$t];if(s)return s;for(var n=e.parentNode;n;){if(s=n[ts]||n[$t]){if(n=s.alternate,s.child!==null||n!==null&&n.child!==null)for(e=Zc(e);e!==null;){if(n=e[$t])return n;e=Zc(e)}return s}e=n,n=e.parentNode}return null}function Er(e){return e=e[$t]||e[ts],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ln(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function Ya(e){return e[hr]||null}var Co=[],on=-1;function Ls(e){return{current:e}}function Re(e){0>on||(e.current=Co[on],Co[on]=null,on--)}function Te(e,s){on++,Co[on]=e.current,e.current=s}var Cs={},st=Ls(Cs),dt=Ls(!1),$s=Cs;function Nn(e,s){var n=e.type.contextTypes;if(!n)return Cs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===s)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=s[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),a}function ut(e){return e=e.childContextTypes,e!=null}function Ea(){Re(dt),Re(st)}function ed(e,s,n){if(st.current!==Cs)throw Error(ne(168));Te(st,s),Te(dt,n)}function Cm(e,s,n){var r=e.stateNode;if(s=s.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in s))throw Error(ne(108,tf(e)||"Unknown",a));return _e({},n,r)}function Ta(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,$s=st.current,Te(st,e),Te(dt,dt.current),!0}function td(e,s,n){var r=e.stateNode;if(!r)throw Error(ne(169));n?(e=Cm(e,s,$s),r.__reactInternalMemoizedMergedChildContext=e,Re(dt),Re(st),Te(st,e)):Re(dt),Te(dt,n)}var Kt=null,Xa=!1,Il=!1;function Sm(e){Kt===null?Kt=[e]:Kt.push(e)}function vg(e){Xa=!0,Sm(e)}function Es(){if(!Il&&Kt!==null){Il=!0;var e=0,s=Ee;try{var n=Kt;for(Ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Kt=null,Xa=!1}catch(a){throw Kt!==null&&(Kt=Kt.slice(e+1)),Ju(pi,Es),a}finally{Ee=s,Il=!1}}return null}var cn=[],dn=0,Aa=null,Ra=0,Ct=[],St=0,Gs=null,Qt=1,Jt="";function Ds(e,s){cn[dn++]=Ra,cn[dn++]=Aa,Aa=e,Ra=s}function km(e,s,n){Ct[St++]=Qt,Ct[St++]=Jt,Ct[St++]=Gs,Gs=e;var r=Qt;e=Jt;var a=32-It(r)-1;r&=~(1<<a),n+=1;var l=32-It(s)+a;if(30<l){var o=a-a%5;l=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Qt=1<<32-It(s)+a|n<<a|r,Jt=l+e}else Qt=1<<l|n<<a|r,Jt=e}function Ni(e){e.return!==null&&(Ds(e,1),km(e,1,0))}function wi(e){for(;e===Aa;)Aa=cn[--dn],cn[dn]=null,Ra=cn[--dn],cn[dn]=null;for(;e===Gs;)Gs=Ct[--St],Ct[St]=null,Jt=Ct[--St],Ct[St]=null,Qt=Ct[--St],Ct[St]=null}var bt=null,vt=null,Pe=!1,Mt=null;function Lm(e,s){var n=kt(5,null,null,0);n.elementType="DELETED",n.stateNode=s,n.return=e,s=e.deletions,s===null?(e.deletions=[n],e.flags|=16):s.push(n)}function sd(e,s){switch(e.tag){case 5:var n=e.type;return s=s.nodeType!==1||n.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,bt=e,vt=ys(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,bt=e,vt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(n=Gs!==null?{id:Qt,overflow:Jt}:null,e.memoizedState={dehydrated:s,treeContext:n,retryLane:1073741824},n=kt(18,null,null,0),n.stateNode=s,n.return=e,e.child=n,bt=e,vt=null,!0):!1;default:return!1}}function So(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ko(e){if(Pe){var s=vt;if(s){var n=s;if(!sd(e,s)){if(So(e))throw Error(ne(418));s=ys(n.nextSibling);var r=bt;s&&sd(e,s)?Lm(r,n):(e.flags=e.flags&-4097|2,Pe=!1,bt=e)}}else{if(So(e))throw Error(ne(418));e.flags=e.flags&-4097|2,Pe=!1,bt=e}}}function nd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bt=e}function Kr(e){if(e!==bt)return!1;if(!Pe)return nd(e),Pe=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!jo(e.type,e.memoizedProps)),s&&(s=vt)){if(So(e))throw Em(),Error(ne(418));for(;s;)Lm(e,s),s=ys(s.nextSibling)}if(nd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(s===0){vt=ys(e.nextSibling);break e}s--}else n!=="$"&&n!=="$!"&&n!=="$?"||s++}e=e.nextSibling}vt=null}}else vt=bt?ys(e.stateNode.nextSibling):null;return!0}function Em(){for(var e=vt;e;)e=ys(e.nextSibling)}function wn(){vt=bt=null,Pe=!1}function Ci(e){Mt===null?Mt=[e]:Mt.push(e)}var bg=as.ReactCurrentBatchConfig;function zn(e,s,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,e));var a=r,l=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(o){var i=a.refs;o===null?delete i[l]:i[l]=o},s._stringRef=l,s)}if(typeof e!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,e))}return e}function Qr(e,s){throw e=Object.prototype.toString.call(s),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function rd(e){var s=e._init;return s(e._payload)}function Tm(e){function s(b,y){if(e){var w=b.deletions;w===null?(b.deletions=[y],b.flags|=16):w.push(y)}}function n(b,y){if(!e)return null;for(;y!==null;)s(b,y),y=y.sibling;return null}function r(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function a(b,y){return b=Ns(b,y),b.index=0,b.sibling=null,b}function l(b,y,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<y?(b.flags|=2,y):w):(b.flags|=2,y)):(b.flags|=1048576,y)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function i(b,y,w,C){return y===null||y.tag!==6?(y=$l(w,b.mode,C),y.return=b,y):(y=a(y,w),y.return=b,y)}function c(b,y,w,C){var D=w.type;return D===sn?g(b,y,w.props.children,C,w.key):y!==null&&(y.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===os&&rd(D)===y.type)?(C=a(y,w.props),C.ref=zn(b,y,w),C.return=b,C):(C=pa(w.type,w.key,w.props,null,b.mode,C),C.ref=zn(b,y,w),C.return=b,C)}function m(b,y,w,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Gl(w,b.mode,C),y.return=b,y):(y=a(y,w.children||[]),y.return=b,y)}function g(b,y,w,C,D){return y===null||y.tag!==7?(y=Os(w,b.mode,C,D),y.return=b,y):(y=a(y,w),y.return=b,y)}function u(b,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=$l(""+y,b.mode,w),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Fr:return w=pa(y.type,y.key,y.props,null,b.mode,w),w.ref=zn(b,null,y),w.return=b,w;case tn:return y=Gl(y,b.mode,w),y.return=b,y;case os:var C=y._init;return u(b,C(y._payload),w)}if(Wn(y)||_n(y))return y=Os(y,b.mode,w,null),y.return=b,y;Qr(b,y)}return null}function f(b,y,w,C){var D=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return D!==null?null:i(b,y,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fr:return w.key===D?c(b,y,w,C):null;case tn:return w.key===D?m(b,y,w,C):null;case os:return D=w._init,f(b,y,D(w._payload),C)}if(Wn(w)||_n(w))return D!==null?null:g(b,y,w,C,null);Qr(b,w)}return null}function p(b,y,w,C,D){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(w)||null,i(y,b,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Fr:return b=b.get(C.key===null?w:C.key)||null,c(y,b,C,D);case tn:return b=b.get(C.key===null?w:C.key)||null,m(y,b,C,D);case os:var $=C._init;return p(b,y,w,$(C._payload),D)}if(Wn(C)||_n(C))return b=b.get(w)||null,g(y,b,C,D,null);Qr(y,C)}return null}function d(b,y,w,C){for(var D=null,$=null,O=y,B=y=0,U=null;O!==null&&B<w.length;B++){O.index>B?(U=O,O=null):U=O.sibling;var z=f(b,O,w[B],C);if(z===null){O===null&&(O=U);break}e&&O&&z.alternate===null&&s(b,O),y=l(z,y,B),$===null?D=z:$.sibling=z,$=z,O=U}if(B===w.length)return n(b,O),Pe&&Ds(b,B),D;if(O===null){for(;B<w.length;B++)O=u(b,w[B],C),O!==null&&(y=l(O,y,B),$===null?D=O:$.sibling=O,$=O);return Pe&&Ds(b,B),D}for(O=r(b,O);B<w.length;B++)U=p(O,b,B,w[B],C),U!==null&&(e&&U.alternate!==null&&O.delete(U.key===null?B:U.key),y=l(U,y,B),$===null?D=U:$.sibling=U,$=U);return e&&O.forEach(function(ce){return s(b,ce)}),Pe&&Ds(b,B),D}function h(b,y,w,C){var D=_n(w);if(typeof D!="function")throw Error(ne(150));if(w=D.call(w),w==null)throw Error(ne(151));for(var $=D=null,O=y,B=y=0,U=null,z=w.next();O!==null&&!z.done;B++,z=w.next()){O.index>B?(U=O,O=null):U=O.sibling;var ce=f(b,O,z.value,C);if(ce===null){O===null&&(O=U);break}e&&O&&ce.alternate===null&&s(b,O),y=l(ce,y,B),$===null?D=ce:$.sibling=ce,$=ce,O=U}if(z.done)return n(b,O),Pe&&Ds(b,B),D;if(O===null){for(;!z.done;B++,z=w.next())z=u(b,z.value,C),z!==null&&(y=l(z,y,B),$===null?D=z:$.sibling=z,$=z);return Pe&&Ds(b,B),D}for(O=r(b,O);!z.done;B++,z=w.next())z=p(O,b,B,z.value,C),z!==null&&(e&&z.alternate!==null&&O.delete(z.key===null?B:z.key),y=l(z,y,B),$===null?D=z:$.sibling=z,$=z);return e&&O.forEach(function(de){return s(b,de)}),Pe&&Ds(b,B),D}function j(b,y,w,C){if(typeof w=="object"&&w!==null&&w.type===sn&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Fr:e:{for(var D=w.key,$=y;$!==null;){if($.key===D){if(D=w.type,D===sn){if($.tag===7){n(b,$.sibling),y=a($,w.props.children),y.return=b,b=y;break e}}else if($.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===os&&rd(D)===$.type){n(b,$.sibling),y=a($,w.props),y.ref=zn(b,$,w),y.return=b,b=y;break e}n(b,$);break}else s(b,$);$=$.sibling}w.type===sn?(y=Os(w.props.children,b.mode,C,w.key),y.return=b,b=y):(C=pa(w.type,w.key,w.props,null,b.mode,C),C.ref=zn(b,y,w),C.return=b,b=C)}return o(b);case tn:e:{for($=w.key;y!==null;){if(y.key===$)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(b,y.sibling),y=a(y,w.children||[]),y.return=b,b=y;break e}else{n(b,y);break}else s(b,y);y=y.sibling}y=Gl(w,b.mode,C),y.return=b,b=y}return o(b);case os:return $=w._init,j(b,y,$(w._payload),C)}if(Wn(w))return d(b,y,w,C);if(_n(w))return h(b,y,w,C);Qr(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(b,y.sibling),y=a(y,w),y.return=b,b=y):(n(b,y),y=$l(w,b.mode,C),y.return=b,b=y),o(b)):n(b,y)}return j}var Cn=Tm(!0),Am=Tm(!1),Da=Ls(null),Pa=null,un=null,Si=null;function ki(){Si=un=Pa=null}function Li(e){var s=Da.current;Re(Da),e._currentValue=s}function Lo(e,s,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,r!==null&&(r.childLanes|=s)):r!==null&&(r.childLanes&s)!==s&&(r.childLanes|=s),e===n)break;e=e.return}}function yn(e,s){Pa=e,Si=un=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(ct=!0),e.firstContext=null)}function Et(e){var s=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:s,next:null},un===null){if(Pa===null)throw Error(ne(308));un=e,Pa.dependencies={lanes:0,firstContext:e}}else un=un.next=e;return s}var Is=null;function Ei(e){Is===null?Is=[e]:Is.push(e)}function Rm(e,s,n,r){var a=s.interleaved;return a===null?(n.next=n,Ei(s)):(n.next=a.next,a.next=n),s.interleaved=n,ss(e,r)}function ss(e,s){e.lanes|=s;var n=e.alternate;for(n!==null&&(n.lanes|=s),n=e,e=e.return;e!==null;)e.childLanes|=s,n=e.alternate,n!==null&&(n.childLanes|=s),n=e,e=e.return;return n.tag===3?n.stateNode:null}var is=!1;function Ti(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dm(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xt(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function vs(e,s,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var a=r.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s,ss(e,n)}return a=r.interleaved,a===null?(s.next=s,Ei(r)):(s.next=a.next,a.next=s),r.interleaved=s,ss(e,n)}function oa(e,s,n){if(s=s.updateQueue,s!==null&&(s=s.shared,(n&4194240)!==0)){var r=s.lanes;r&=e.pendingLanes,n|=r,s.lanes=n,hi(e,n)}}function ad(e,s){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=o:l=l.next=o,n=n.next}while(n!==null);l===null?a=l=s:l=l.next=s}else a=l=s;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=s:e.next=s,n.lastBaseUpdate=s}function Ma(e,s,n,r){var a=e.updateQueue;is=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,m=c.next;c.next=null,o===null?l=m:o.next=m,o=c;var g=e.alternate;g!==null&&(g=g.updateQueue,i=g.lastBaseUpdate,i!==o&&(i===null?g.firstBaseUpdate=m:i.next=m,g.lastBaseUpdate=c))}if(l!==null){var u=a.baseState;o=0,g=m=c=null,i=l;do{var f=i.lane,p=i.eventTime;if((r&f)===f){g!==null&&(g=g.next={eventTime:p,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var d=e,h=i;switch(f=s,p=n,h.tag){case 1:if(d=h.payload,typeof d=="function"){u=d.call(p,u,f);break e}u=d;break e;case 3:d.flags=d.flags&-65537|128;case 0:if(d=h.payload,f=typeof d=="function"?d.call(p,u,f):d,f==null)break e;u=_e({},u,f);break e;case 2:is=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[i]:f.push(i))}else p={eventTime:p,lane:f,tag:i.tag,payload:i.payload,callback:i.callback,next:null},g===null?(m=g=p,c=u):g=g.next=p,o|=f;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;f=i,i=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(g===null&&(c=u),a.baseState=c,a.firstBaseUpdate=m,a.lastBaseUpdate=g,s=a.shared.interleaved,s!==null){a=s;do o|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);qs|=o,e.lanes=o,e.memoizedState=u}}function ld(e,s,n){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var r=e[s],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(ne(191,a));a.call(r)}}}var Tr={},Wt=Ls(Tr),fr=Ls(Tr),gr=Ls(Tr);function _s(e){if(e===Tr)throw Error(ne(174));return e}function Ai(e,s){switch(Te(gr,s),Te(fr,e),Te(Wt,Tr),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lo(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=lo(s,e)}Re(Wt),Te(Wt,s)}function Sn(){Re(Wt),Re(fr),Re(gr)}function Pm(e){_s(gr.current);var s=_s(Wt.current),n=lo(s,e.type);s!==n&&(Te(fr,e),Te(Wt,n))}function Ri(e){fr.current===e&&(Re(Wt),Re(fr))}var Me=Ls(0);function Ia(e){for(var s=e;s!==null;){if(s.tag===13){var n=s.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var _l=[];function Di(){for(var e=0;e<_l.length;e++)_l[e]._workInProgressVersionPrimary=null;_l.length=0}var ia=as.ReactCurrentDispatcher,Ul=as.ReactCurrentBatchConfig,Hs=0,Ie=null,Ge=null,qe=null,_a=!1,er=!1,xr=0,jg=0;function Xe(){throw Error(ne(321))}function Pi(e,s){if(s===null)return!1;for(var n=0;n<s.length&&n<e.length;n++)if(!Ut(e[n],s[n]))return!1;return!0}function Mi(e,s,n,r,a,l){if(Hs=l,Ie=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ia.current=e===null||e.memoizedState===null?Sg:kg,e=n(r,a),er){l=0;do{if(er=!1,xr=0,25<=l)throw Error(ne(301));l+=1,qe=Ge=null,s.updateQueue=null,ia.current=Lg,e=n(r,a)}while(er)}if(ia.current=Ua,s=Ge!==null&&Ge.next!==null,Hs=0,qe=Ge=Ie=null,_a=!1,s)throw Error(ne(300));return e}function Ii(){var e=xr!==0;return xr=0,e}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Ie.memoizedState=qe=e:qe=qe.next=e,qe}function Tt(){if(Ge===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var s=qe===null?Ie.memoizedState:qe.next;if(s!==null)qe=s,Ge=e;else{if(e===null)throw Error(ne(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},qe===null?Ie.memoizedState=qe=e:qe=qe.next=e}return qe}function yr(e,s){return typeof s=="function"?s(e):s}function Fl(e){var s=Tt(),n=s.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var r=Ge,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var i=o=null,c=null,m=l;do{var g=m.lane;if((Hs&g)===g)c!==null&&(c=c.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:e(r,m.action);else{var u={lane:g,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};c===null?(i=c=u,o=r):c=c.next=u,Ie.lanes|=g,qs|=g}m=m.next}while(m!==null&&m!==l);c===null?o=r:c.next=i,Ut(r,s.memoizedState)||(ct=!0),s.memoizedState=r,s.baseState=o,s.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do l=a.lane,Ie.lanes|=l,qs|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[s.memoizedState,n.dispatch]}function Ol(e){var s=Tt(),n=s.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=s.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);Ut(l,s.memoizedState)||(ct=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),n.lastRenderedState=l}return[l,r]}function Mm(){}function Im(e,s){var n=Ie,r=Tt(),a=s(),l=!Ut(r.memoizedState,a);if(l&&(r.memoizedState=a,ct=!0),r=r.queue,_i(Fm.bind(null,n,r,e),[e]),r.getSnapshot!==s||l||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,vr(9,Um.bind(null,n,r,a,s),void 0,null),Ve===null)throw Error(ne(349));Hs&30||_m(n,s,a)}return a}function _m(e,s,n){e.flags|=16384,e={getSnapshot:s,value:n},s=Ie.updateQueue,s===null?(s={lastEffect:null,stores:null},Ie.updateQueue=s,s.stores=[e]):(n=s.stores,n===null?s.stores=[e]:n.push(e))}function Um(e,s,n,r){s.value=n,s.getSnapshot=r,Om(s)&&Bm(e)}function Fm(e,s,n){return n(function(){Om(s)&&Bm(e)})}function Om(e){var s=e.getSnapshot;e=e.value;try{var n=s();return!Ut(e,n)}catch{return!0}}function Bm(e){var s=ss(e,1);s!==null&&_t(s,e,1,-1)}function od(e){var s=zt();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yr,lastRenderedState:e},s.queue=e,e=e.dispatch=Cg.bind(null,Ie,e),[s.memoizedState,e]}function vr(e,s,n,r){return e={tag:e,create:s,destroy:n,deps:r,next:null},s=Ie.updateQueue,s===null?(s={lastEffect:null,stores:null},Ie.updateQueue=s,s.lastEffect=e.next=e):(n=s.lastEffect,n===null?s.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,s.lastEffect=e)),e}function zm(){return Tt().memoizedState}function ca(e,s,n,r){var a=zt();Ie.flags|=e,a.memoizedState=vr(1|s,n,void 0,r===void 0?null:r)}function Za(e,s,n,r){var a=Tt();r=r===void 0?null:r;var l=void 0;if(Ge!==null){var o=Ge.memoizedState;if(l=o.destroy,r!==null&&Pi(r,o.deps)){a.memoizedState=vr(s,n,l,r);return}}Ie.flags|=e,a.memoizedState=vr(1|s,n,l,r)}function id(e,s){return ca(8390656,8,e,s)}function _i(e,s){return Za(2048,8,e,s)}function $m(e,s){return Za(4,2,e,s)}function Gm(e,s){return Za(4,4,e,s)}function Hm(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function qm(e,s,n){return n=n!=null?n.concat([e]):null,Za(4,4,Hm.bind(null,s,e),n)}function Ui(){}function Wm(e,s){var n=Tt();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&Pi(s,r[1])?r[0]:(n.memoizedState=[e,s],e)}function Vm(e,s){var n=Tt();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&Pi(s,r[1])?r[0]:(e=e(),n.memoizedState=[e,s],e)}function Km(e,s,n){return Hs&21?(Ut(n,s)||(n=Zu(),Ie.lanes|=n,qs|=n,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,ct=!0),e.memoizedState=n)}function Ng(e,s){var n=Ee;Ee=n!==0&&4>n?n:4,e(!0);var r=Ul.transition;Ul.transition={};try{e(!1),s()}finally{Ee=n,Ul.transition=r}}function Qm(){return Tt().memoizedState}function wg(e,s,n){var r=js(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jm(e))Ym(s,n);else if(n=Rm(e,s,n,r),n!==null){var a=rt();_t(n,e,r,a),Xm(n,s,r)}}function Cg(e,s,n){var r=js(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jm(e))Ym(s,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var o=s.lastRenderedState,i=l(o,n);if(a.hasEagerState=!0,a.eagerState=i,Ut(i,o)){var c=s.interleaved;c===null?(a.next=a,Ei(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}n=Rm(e,s,a,r),n!==null&&(a=rt(),_t(n,e,r,a),Xm(n,s,r))}}function Jm(e){var s=e.alternate;return e===Ie||s!==null&&s===Ie}function Ym(e,s){er=_a=!0;var n=e.pending;n===null?s.next=s:(s.next=n.next,n.next=s),e.pending=s}function Xm(e,s,n){if(n&4194240){var r=s.lanes;r&=e.pendingLanes,n|=r,s.lanes=n,hi(e,n)}}var Ua={readContext:Et,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},Sg={readContext:Et,useCallback:function(e,s){return zt().memoizedState=[e,s===void 0?null:s],e},useContext:Et,useEffect:id,useImperativeHandle:function(e,s,n){return n=n!=null?n.concat([e]):null,ca(4194308,4,Hm.bind(null,s,e),n)},useLayoutEffect:function(e,s){return ca(4194308,4,e,s)},useInsertionEffect:function(e,s){return ca(4,2,e,s)},useMemo:function(e,s){var n=zt();return s=s===void 0?null:s,e=e(),n.memoizedState=[e,s],e},useReducer:function(e,s,n){var r=zt();return s=n!==void 0?n(s):s,r.memoizedState=r.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=wg.bind(null,Ie,e),[r.memoizedState,e]},useRef:function(e){var s=zt();return e={current:e},s.memoizedState=e},useState:od,useDebugValue:Ui,useDeferredValue:function(e){return zt().memoizedState=e},useTransition:function(){var e=od(!1),s=e[0];return e=Ng.bind(null,e[1]),zt().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,n){var r=Ie,a=zt();if(Pe){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=s(),Ve===null)throw Error(ne(349));Hs&30||_m(r,s,n)}a.memoizedState=n;var l={value:n,getSnapshot:s};return a.queue=l,id(Fm.bind(null,r,l,e),[e]),r.flags|=2048,vr(9,Um.bind(null,r,l,n,s),void 0,null),n},useId:function(){var e=zt(),s=Ve.identifierPrefix;if(Pe){var n=Jt,r=Qt;n=(r&~(1<<32-It(r)-1)).toString(32)+n,s=":"+s+"R"+n,n=xr++,0<n&&(s+="H"+n.toString(32)),s+=":"}else n=jg++,s=":"+s+"r"+n.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},kg={readContext:Et,useCallback:Wm,useContext:Et,useEffect:_i,useImperativeHandle:qm,useInsertionEffect:$m,useLayoutEffect:Gm,useMemo:Vm,useReducer:Fl,useRef:zm,useState:function(){return Fl(yr)},useDebugValue:Ui,useDeferredValue:function(e){var s=Tt();return Km(s,Ge.memoizedState,e)},useTransition:function(){var e=Fl(yr)[0],s=Tt().memoizedState;return[e,s]},useMutableSource:Mm,useSyncExternalStore:Im,useId:Qm,unstable_isNewReconciler:!1},Lg={readContext:Et,useCallback:Wm,useContext:Et,useEffect:_i,useImperativeHandle:qm,useInsertionEffect:$m,useLayoutEffect:Gm,useMemo:Vm,useReducer:Ol,useRef:zm,useState:function(){return Ol(yr)},useDebugValue:Ui,useDeferredValue:function(e){var s=Tt();return Ge===null?s.memoizedState=e:Km(s,Ge.memoizedState,e)},useTransition:function(){var e=Ol(yr)[0],s=Tt().memoizedState;return[e,s]},useMutableSource:Mm,useSyncExternalStore:Im,useId:Qm,unstable_isNewReconciler:!1};function Dt(e,s){if(e&&e.defaultProps){s=_e({},s),e=e.defaultProps;for(var n in e)s[n]===void 0&&(s[n]=e[n]);return s}return s}function Eo(e,s,n,r){s=e.memoizedState,n=n(r,s),n=n==null?s:_e({},s,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var el={isMounted:function(e){return(e=e._reactInternals)?Js(e)===e:!1},enqueueSetState:function(e,s,n){e=e._reactInternals;var r=rt(),a=js(e),l=Xt(r,a);l.payload=s,n!=null&&(l.callback=n),s=vs(e,l,a),s!==null&&(_t(s,e,a,r),oa(s,e,a))},enqueueReplaceState:function(e,s,n){e=e._reactInternals;var r=rt(),a=js(e),l=Xt(r,a);l.tag=1,l.payload=s,n!=null&&(l.callback=n),s=vs(e,l,a),s!==null&&(_t(s,e,a,r),oa(s,e,a))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var n=rt(),r=js(e),a=Xt(n,r);a.tag=2,s!=null&&(a.callback=s),s=vs(e,a,r),s!==null&&(_t(s,e,r,n),oa(s,e,r))}};function cd(e,s,n,r,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,o):s.prototype&&s.prototype.isPureReactComponent?!ur(n,r)||!ur(a,l):!0}function Zm(e,s,n){var r=!1,a=Cs,l=s.contextType;return typeof l=="object"&&l!==null?l=Et(l):(a=ut(s)?$s:st.current,r=s.contextTypes,l=(r=r!=null)?Nn(e,a):Cs),s=new s(n,l),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=el,e.stateNode=s,s._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),s}function dd(e,s,n,r){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(n,r),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(n,r),s.state!==e&&el.enqueueReplaceState(s,s.state,null)}function To(e,s,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Ti(e);var l=s.contextType;typeof l=="object"&&l!==null?a.context=Et(l):(l=ut(s)?$s:st.current,a.context=Nn(e,l)),a.state=e.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(Eo(e,s,l,n),a.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&el.enqueueReplaceState(a,a.state,null),Ma(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function kn(e,s){try{var n="",r=s;do n+=ef(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:s,stack:a,digest:null}}function Bl(e,s,n){return{value:e,source:null,stack:n??null,digest:s??null}}function Ao(e,s){try{console.error(s.value)}catch(n){setTimeout(function(){throw n})}}var Eg=typeof WeakMap=="function"?WeakMap:Map;function ep(e,s,n){n=Xt(-1,n),n.tag=3,n.payload={element:null};var r=s.value;return n.callback=function(){Oa||(Oa=!0,Bo=r),Ao(e,s)},n}function tp(e,s,n){n=Xt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=s.value;n.payload=function(){return r(a)},n.callback=function(){Ao(e,s)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Ao(e,s),typeof r!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})}),n}function ud(e,s,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Eg;var a=new Set;r.set(s,a)}else a=r.get(s),a===void 0&&(a=new Set,r.set(s,a));a.has(n)||(a.add(n),e=$g.bind(null,e,s,n),s.then(e,e))}function md(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function pd(e,s,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===s?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(s=Xt(-1,1),s.tag=2,vs(n,s,1))),n.lanes|=1),e)}var Tg=as.ReactCurrentOwner,ct=!1;function nt(e,s,n,r){s.child=e===null?Am(s,null,n,r):Cn(s,e.child,n,r)}function hd(e,s,n,r,a){n=n.render;var l=s.ref;return yn(s,a),r=Mi(e,s,n,r,l,a),n=Ii(),e!==null&&!ct?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,ns(e,s,a)):(Pe&&n&&Ni(s),s.flags|=1,nt(e,s,r,a),s.child)}function fd(e,s,n,r,a){if(e===null){var l=n.type;return typeof l=="function"&&!qi(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(s.tag=15,s.type=l,sp(e,s,l,r,a)):(e=pa(n.type,null,r,s,s.mode,a),e.ref=s.ref,e.return=s,s.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(n=n.compare,n=n!==null?n:ur,n(o,r)&&e.ref===s.ref)return ns(e,s,a)}return s.flags|=1,e=Ns(l,r),e.ref=s.ref,e.return=s,s.child=e}function sp(e,s,n,r,a){if(e!==null){var l=e.memoizedProps;if(ur(l,r)&&e.ref===s.ref)if(ct=!1,s.pendingProps=r=l,(e.lanes&a)!==0)e.flags&131072&&(ct=!0);else return s.lanes=e.lanes,ns(e,s,a)}return Ro(e,s,n,r,a)}function np(e,s,n){var r=s.pendingProps,a=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(pn,gt),gt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,Te(pn,gt),gt|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Te(pn,gt),gt|=r}else l!==null?(r=l.baseLanes|n,s.memoizedState=null):r=n,Te(pn,gt),gt|=r;return nt(e,s,a,n),s.child}function rp(e,s){var n=s.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(s.flags|=512,s.flags|=2097152)}function Ro(e,s,n,r,a){var l=ut(n)?$s:st.current;return l=Nn(s,l),yn(s,a),n=Mi(e,s,n,r,l,a),r=Ii(),e!==null&&!ct?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a,ns(e,s,a)):(Pe&&r&&Ni(s),s.flags|=1,nt(e,s,n,a),s.child)}function gd(e,s,n,r,a){if(ut(n)){var l=!0;Ta(s)}else l=!1;if(yn(s,a),s.stateNode===null)da(e,s),Zm(s,n,r),To(s,n,r,a),r=!0;else if(e===null){var o=s.stateNode,i=s.memoizedProps;o.props=i;var c=o.context,m=n.contextType;typeof m=="object"&&m!==null?m=Et(m):(m=ut(n)?$s:st.current,m=Nn(s,m));var g=n.getDerivedStateFromProps,u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==r||c!==m)&&dd(s,o,r,m),is=!1;var f=s.memoizedState;o.state=f,Ma(s,r,o,a),c=s.memoizedState,i!==r||f!==c||dt.current||is?(typeof g=="function"&&(Eo(s,n,g,r),c=s.memoizedState),(i=is||cd(s,n,i,r,f,c,m))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(s.flags|=4194308)):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=r,s.memoizedState=c),o.props=r,o.state=c,o.context=m,r=i):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),r=!1)}else{o=s.stateNode,Dm(e,s),i=s.memoizedProps,m=s.type===s.elementType?i:Dt(s.type,i),o.props=m,u=s.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Et(c):(c=ut(n)?$s:st.current,c=Nn(s,c));var p=n.getDerivedStateFromProps;(g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==u||f!==c)&&dd(s,o,r,c),is=!1,f=s.memoizedState,o.state=f,Ma(s,r,o,a);var d=s.memoizedState;i!==u||f!==d||dt.current||is?(typeof p=="function"&&(Eo(s,n,p,r),d=s.memoizedState),(m=is||cd(s,n,m,r,f,d,c)||!1)?(g||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,d,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,d,c)),typeof o.componentDidUpdate=="function"&&(s.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(s.flags|=1024),s.memoizedProps=r,s.memoizedState=d),o.props=r,o.state=d,o.context=c,r=m):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(s.flags|=1024),r=!1)}return Do(e,s,n,r,l,a)}function Do(e,s,n,r,a,l){rp(e,s);var o=(s.flags&128)!==0;if(!r&&!o)return a&&td(s,n,!1),ns(e,s,l);r=s.stateNode,Tg.current=s;var i=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return s.flags|=1,e!==null&&o?(s.child=Cn(s,e.child,null,l),s.child=Cn(s,null,i,l)):nt(e,s,i,l),s.memoizedState=r.state,a&&td(s,n,!0),s.child}function ap(e){var s=e.stateNode;s.pendingContext?ed(e,s.pendingContext,s.pendingContext!==s.context):s.context&&ed(e,s.context,!1),Ai(e,s.containerInfo)}function xd(e,s,n,r,a){return wn(),Ci(a),s.flags|=256,nt(e,s,n,r),s.child}var Po={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function lp(e,s,n){var r=s.pendingProps,a=Me.current,l=!1,o=(s.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(a&2)!==0),i?(l=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Te(Me,a&1),e===null)return ko(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(o=r.children,e=r.fallback,l?(r=s.mode,l=s.child,o={mode:"hidden",children:o},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=nl(o,r,0,null),e=Os(e,r,n,null),l.return=s,e.return=s,l.sibling=e,s.child=l,s.child.memoizedState=Mo(n),s.memoizedState=Po,e):Fi(s,o));if(a=e.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return Ag(e,s,o,r,i,a,n);if(l){l=r.fallback,o=s.mode,a=e.child,i=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&s.child!==a?(r=s.child,r.childLanes=0,r.pendingProps=c,s.deletions=null):(r=Ns(a,c),r.subtreeFlags=a.subtreeFlags&14680064),i!==null?l=Ns(i,l):(l=Os(l,o,n,null),l.flags|=2),l.return=s,r.return=s,r.sibling=l,s.child=r,r=l,l=s.child,o=e.child.memoizedState,o=o===null?Mo(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~n,s.memoizedState=Po,r}return l=e.child,e=l.sibling,r=Ns(l,{mode:"visible",children:r.children}),!(s.mode&1)&&(r.lanes=n),r.return=s,r.sibling=null,e!==null&&(n=s.deletions,n===null?(s.deletions=[e],s.flags|=16):n.push(e)),s.child=r,s.memoizedState=null,r}function Fi(e,s){return s=nl({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function Jr(e,s,n,r){return r!==null&&Ci(r),Cn(s,e.child,null,n),e=Fi(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Ag(e,s,n,r,a,l,o){if(n)return s.flags&256?(s.flags&=-257,r=Bl(Error(ne(422))),Jr(e,s,o,r)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(l=r.fallback,a=s.mode,r=nl({mode:"visible",children:r.children},a,0,null),l=Os(l,a,o,null),l.flags|=2,r.return=s,l.return=s,r.sibling=l,s.child=r,s.mode&1&&Cn(s,e.child,null,o),s.child.memoizedState=Mo(o),s.memoizedState=Po,l);if(!(s.mode&1))return Jr(e,s,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(ne(419)),r=Bl(l,r,void 0),Jr(e,s,o,r)}if(i=(o&e.childLanes)!==0,ct||i){if(r=Ve,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,ss(e,a),_t(r,e,a,-1))}return Hi(),r=Bl(Error(ne(421))),Jr(e,s,o,r)}return a.data==="$?"?(s.flags|=128,s.child=e.child,s=Gg.bind(null,e),a._reactRetry=s,null):(e=l.treeContext,vt=ys(a.nextSibling),bt=s,Pe=!0,Mt=null,e!==null&&(Ct[St++]=Qt,Ct[St++]=Jt,Ct[St++]=Gs,Qt=e.id,Jt=e.overflow,Gs=s),s=Fi(s,r.children),s.flags|=4096,s)}function yd(e,s,n){e.lanes|=s;var r=e.alternate;r!==null&&(r.lanes|=s),Lo(e.return,s,n)}function zl(e,s,n,r,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function op(e,s,n){var r=s.pendingProps,a=r.revealOrder,l=r.tail;if(nt(e,s,r.children,n),r=Me.current,r&2)r=r&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yd(e,n,s);else if(e.tag===19)yd(e,n,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(Me,r),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(n=s.child,a=null;n!==null;)e=n.alternate,e!==null&&Ia(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=s.child,s.child=null):(a=n.sibling,n.sibling=null),zl(s,!1,a,n,l);break;case"backwards":for(n=null,a=s.child,s.child=null;a!==null;){if(e=a.alternate,e!==null&&Ia(e)===null){s.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}zl(s,!0,n,null,l);break;case"together":zl(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function da(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function ns(e,s,n){if(e!==null&&(s.dependencies=e.dependencies),qs|=s.lanes,!(n&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(ne(153));if(s.child!==null){for(e=s.child,n=Ns(e,e.pendingProps),s.child=n,n.return=s;e.sibling!==null;)e=e.sibling,n=n.sibling=Ns(e,e.pendingProps),n.return=s;n.sibling=null}return s.child}function Rg(e,s,n){switch(s.tag){case 3:ap(s),wn();break;case 5:Pm(s);break;case 1:ut(s.type)&&Ta(s);break;case 4:Ai(s,s.stateNode.containerInfo);break;case 10:var r=s.type._context,a=s.memoizedProps.value;Te(Da,r._currentValue),r._currentValue=a;break;case 13:if(r=s.memoizedState,r!==null)return r.dehydrated!==null?(Te(Me,Me.current&1),s.flags|=128,null):n&s.child.childLanes?lp(e,s,n):(Te(Me,Me.current&1),e=ns(e,s,n),e!==null?e.sibling:null);Te(Me,Me.current&1);break;case 19:if(r=(n&s.childLanes)!==0,e.flags&128){if(r)return op(e,s,n);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Te(Me,Me.current),r)break;return null;case 22:case 23:return s.lanes=0,np(e,s,n)}return ns(e,s,n)}var ip,Io,cp,dp;ip=function(e,s){for(var n=s.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Io=function(){};cp=function(e,s,n,r){var a=e.memoizedProps;if(a!==r){e=s.stateNode,_s(Wt.current);var l=null;switch(n){case"input":a=so(e,a),r=so(e,r),l=[];break;case"select":a=_e({},a,{value:void 0}),r=_e({},r,{value:void 0}),l=[];break;case"textarea":a=ao(e,a),r=ao(e,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=La)}oo(n,r);var o;n=null;for(m in a)if(!r.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var i=a[m];for(o in i)i.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(rr.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in r){var c=r[m];if(i=a!=null?a[m]:void 0,r.hasOwnProperty(m)&&c!==i&&(c!=null||i!=null))if(m==="style")if(i){for(o in i)!i.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&i[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(l||(l=[]),l.push(m,n)),n=c;else m==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(m,c)):m==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(m,""+c):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(rr.hasOwnProperty(m)?(c!=null&&m==="onScroll"&&Ae("scroll",e),l||i===c||(l=[])):(l=l||[]).push(m,c))}n&&(l=l||[]).push("style",n);var m=l;(s.updateQueue=m)&&(s.flags|=4)}};dp=function(e,s,n,r){n!==r&&(s.flags|=4)};function $n(e,s){if(!Pe)switch(e.tailMode){case"hidden":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ze(e){var s=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(s)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,s}function Dg(e,s,n){var r=s.pendingProps;switch(wi(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(s),null;case 1:return ut(s.type)&&Ea(),Ze(s),null;case 3:return r=s.stateNode,Sn(),Re(dt),Re(st),Di(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Kr(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Mt!==null&&(Go(Mt),Mt=null))),Io(e,s),Ze(s),null;case 5:Ri(s);var a=_s(gr.current);if(n=s.type,e!==null&&s.stateNode!=null)cp(e,s,n,r,a),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!r){if(s.stateNode===null)throw Error(ne(166));return Ze(s),null}if(e=_s(Wt.current),Kr(s)){r=s.stateNode,n=s.type;var l=s.memoizedProps;switch(r[$t]=s,r[hr]=l,e=(s.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(a=0;a<Kn.length;a++)Ae(Kn[a],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":Lc(r,l),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ae("invalid",r);break;case"textarea":Tc(r,l),Ae("invalid",r)}oo(n,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var i=l[o];o==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&Vr(r.textContent,i,e),a=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&Vr(r.textContent,i,e),a=["children",""+i]):rr.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Or(r),Ec(r,l,!0);break;case"textarea":Or(r),Ac(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=La)}r=a,s.updateQueue=r,r!==null&&(s.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Fu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[$t]=s,e[hr]=r,ip(e,s,!1,!1),s.stateNode=e;e:{switch(o=io(n,r),n){case"dialog":Ae("cancel",e),Ae("close",e),a=r;break;case"iframe":case"object":case"embed":Ae("load",e),a=r;break;case"video":case"audio":for(a=0;a<Kn.length;a++)Ae(Kn[a],e);a=r;break;case"source":Ae("error",e),a=r;break;case"img":case"image":case"link":Ae("error",e),Ae("load",e),a=r;break;case"details":Ae("toggle",e),a=r;break;case"input":Lc(e,r),a=so(e,r),Ae("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=_e({},r,{value:void 0}),Ae("invalid",e);break;case"textarea":Tc(e,r),a=ao(e,r),Ae("invalid",e);break;default:a=r}oo(n,a),i=a;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?zu(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ou(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ar(e,c):typeof c=="number"&&ar(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(rr.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Ae("scroll",e):c!=null&&ii(e,l,c,o))}switch(n){case"input":Or(e),Ec(e,r,!1);break;case"textarea":Or(e),Ac(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ws(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?hn(e,!!r.multiple,l,!1):r.defaultValue!=null&&hn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=La)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ze(s),null;case 6:if(e&&s.stateNode!=null)dp(e,s,e.memoizedProps,r);else{if(typeof r!="string"&&s.stateNode===null)throw Error(ne(166));if(n=_s(gr.current),_s(Wt.current),Kr(s)){if(r=s.stateNode,n=s.memoizedProps,r[$t]=s,(l=r.nodeValue!==n)&&(e=bt,e!==null))switch(e.tag){case 3:Vr(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Vr(r.nodeValue,n,(e.mode&1)!==0)}l&&(s.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$t]=s,s.stateNode=r}return Ze(s),null;case 13:if(Re(Me),r=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&vt!==null&&s.mode&1&&!(s.flags&128))Em(),wn(),s.flags|=98560,l=!1;else if(l=Kr(s),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(ne(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ne(317));l[$t]=s}else wn(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Ze(s),l=!1}else Mt!==null&&(Go(Mt),Mt=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=n,s):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(s.child.flags|=8192,s.mode&1&&(e===null||Me.current&1?He===0&&(He=3):Hi())),s.updateQueue!==null&&(s.flags|=4),Ze(s),null);case 4:return Sn(),Io(e,s),e===null&&mr(s.stateNode.containerInfo),Ze(s),null;case 10:return Li(s.type._context),Ze(s),null;case 17:return ut(s.type)&&Ea(),Ze(s),null;case 19:if(Re(Me),l=s.memoizedState,l===null)return Ze(s),null;if(r=(s.flags&128)!==0,o=l.rendering,o===null)if(r)$n(l,!1);else{if(He!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(o=Ia(e),o!==null){for(s.flags|=128,$n(l,!1),r=o.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),s.subtreeFlags=0,r=n,n=s.child;n!==null;)l=n,e=r,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(Me,Me.current&1|2),s.child}e=e.sibling}l.tail!==null&&Oe()>Ln&&(s.flags|=128,r=!0,$n(l,!1),s.lanes=4194304)}else{if(!r)if(e=Ia(o),e!==null){if(s.flags|=128,r=!0,n=e.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),$n(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Pe)return Ze(s),null}else 2*Oe()-l.renderingStartTime>Ln&&n!==1073741824&&(s.flags|=128,r=!0,$n(l,!1),s.lanes=4194304);l.isBackwards?(o.sibling=s.child,s.child=o):(n=l.last,n!==null?n.sibling=o:s.child=o,l.last=o)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Oe(),s.sibling=null,n=Me.current,Te(Me,r?n&1|2:n&1),s):(Ze(s),null);case 22:case 23:return Gi(),r=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(s.flags|=8192),r&&s.mode&1?gt&1073741824&&(Ze(s),s.subtreeFlags&6&&(s.flags|=8192)):Ze(s),null;case 24:return null;case 25:return null}throw Error(ne(156,s.tag))}function Pg(e,s){switch(wi(s),s.tag){case 1:return ut(s.type)&&Ea(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Sn(),Re(dt),Re(st),Di(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return Ri(s),null;case 13:if(Re(Me),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(ne(340));wn()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return Re(Me),null;case 4:return Sn(),null;case 10:return Li(s.type._context),null;case 22:case 23:return Gi(),null;case 24:return null;default:return null}}var Yr=!1,et=!1,Mg=typeof WeakSet=="function"?WeakSet:Set,me=null;function mn(e,s){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(e,s,r)}else n.current=null}function _o(e,s,n){try{n()}catch(r){Ue(e,s,r)}}var vd=!1;function Ig(e,s){if(vo=Ca,e=fm(),ji(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var o=0,i=-1,c=-1,m=0,g=0,u=e,f=null;t:for(;;){for(var p;u!==n||a!==0&&u.nodeType!==3||(i=o+a),u!==l||r!==0&&u.nodeType!==3||(c=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(p=u.firstChild)!==null;)f=u,u=p;for(;;){if(u===e)break t;if(f===n&&++m===a&&(i=o),f===l&&++g===r&&(c=o),(p=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=p}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(bo={focusedElem:e,selectionRange:n},Ca=!1,me=s;me!==null;)if(s=me,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,me=e;else for(;me!==null;){s=me;try{var d=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(d!==null){var h=d.memoizedProps,j=d.memoizedState,b=s.stateNode,y=b.getSnapshotBeforeUpdate(s.elementType===s.type?h:Dt(s.type,h),j);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=s.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(C){Ue(s,s.return,C)}if(e=s.sibling,e!==null){e.return=s.return,me=e;break}me=s.return}return d=vd,vd=!1,d}function tr(e,s,n){var r=s.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&_o(s,n,l)}a=a.next}while(a!==r)}}function tl(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==s)}}function Uo(e){var s=e.ref;if(s!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof s=="function"?s(e):s.current=e}}function up(e){var s=e.alternate;s!==null&&(e.alternate=null,up(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[$t],delete s[hr],delete s[wo],delete s[xg],delete s[yg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mp(e){return e.tag===5||e.tag===3||e.tag===4}function bd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fo(e,s,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,s?n.nodeType===8?n.parentNode.insertBefore(e,s):n.insertBefore(e,s):(n.nodeType===8?(s=n.parentNode,s.insertBefore(e,n)):(s=n,s.appendChild(e)),n=n._reactRootContainer,n!=null||s.onclick!==null||(s.onclick=La));else if(r!==4&&(e=e.child,e!==null))for(Fo(e,s,n),e=e.sibling;e!==null;)Fo(e,s,n),e=e.sibling}function Oo(e,s,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,s?n.insertBefore(e,s):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Oo(e,s,n),e=e.sibling;e!==null;)Oo(e,s,n),e=e.sibling}var Qe=null,Pt=!1;function ls(e,s,n){for(n=n.child;n!==null;)pp(e,s,n),n=n.sibling}function pp(e,s,n){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Va,n)}catch{}switch(n.tag){case 5:et||mn(n,s);case 6:var r=Qe,a=Pt;Qe=null,ls(e,s,n),Qe=r,Pt=a,Qe!==null&&(Pt?(e=Qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(Pt?(e=Qe,n=n.stateNode,e.nodeType===8?Ml(e.parentNode,n):e.nodeType===1&&Ml(e,n),cr(e)):Ml(Qe,n.stateNode));break;case 4:r=Qe,a=Pt,Qe=n.stateNode.containerInfo,Pt=!0,ls(e,s,n),Qe=r,Pt=a;break;case 0:case 11:case 14:case 15:if(!et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&_o(n,s,o),a=a.next}while(a!==r)}ls(e,s,n);break;case 1:if(!et&&(mn(n,s),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ue(n,s,i)}ls(e,s,n);break;case 21:ls(e,s,n);break;case 22:n.mode&1?(et=(r=et)||n.memoizedState!==null,ls(e,s,n),et=r):ls(e,s,n);break;default:ls(e,s,n)}}function jd(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Mg),s.forEach(function(r){var a=Hg.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Rt(e,s){var n=s.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=e,o=s,i=o;e:for(;i!==null;){switch(i.tag){case 5:Qe=i.stateNode,Pt=!1;break e;case 3:Qe=i.stateNode.containerInfo,Pt=!0;break e;case 4:Qe=i.stateNode.containerInfo,Pt=!0;break e}i=i.return}if(Qe===null)throw Error(ne(160));pp(l,o,a),Qe=null,Pt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(m){Ue(a,s,m)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)hp(s,e),s=s.sibling}function hp(e,s){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(s,e),Ot(e),r&4){try{tr(3,e,e.return),tl(3,e)}catch(h){Ue(e,e.return,h)}try{tr(5,e,e.return)}catch(h){Ue(e,e.return,h)}}break;case 1:Rt(s,e),Ot(e),r&512&&n!==null&&mn(n,n.return);break;case 5:if(Rt(s,e),Ot(e),r&512&&n!==null&&mn(n,n.return),e.flags&32){var a=e.stateNode;try{ar(a,"")}catch(h){Ue(e,e.return,h)}}if(r&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=n!==null?n.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&_u(a,l),io(i,o);var m=io(i,l);for(o=0;o<c.length;o+=2){var g=c[o],u=c[o+1];g==="style"?zu(a,u):g==="dangerouslySetInnerHTML"?Ou(a,u):g==="children"?ar(a,u):ii(a,g,u,m)}switch(i){case"input":no(a,l);break;case"textarea":Uu(a,l);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var p=l.value;p!=null?hn(a,!!l.multiple,p,!1):f!==!!l.multiple&&(l.defaultValue!=null?hn(a,!!l.multiple,l.defaultValue,!0):hn(a,!!l.multiple,l.multiple?[]:"",!1))}a[hr]=l}catch(h){Ue(e,e.return,h)}}break;case 6:if(Rt(s,e),Ot(e),r&4){if(e.stateNode===null)throw Error(ne(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(h){Ue(e,e.return,h)}}break;case 3:if(Rt(s,e),Ot(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{cr(s.containerInfo)}catch(h){Ue(e,e.return,h)}break;case 4:Rt(s,e),Ot(e);break;case 13:Rt(s,e),Ot(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(zi=Oe())),r&4&&jd(e);break;case 22:if(g=n!==null&&n.memoizedState!==null,e.mode&1?(et=(m=et)||g,Rt(s,e),et=m):Rt(s,e),Ot(e),r&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!g&&e.mode&1)for(me=e,g=e.child;g!==null;){for(u=me=g;me!==null;){switch(f=me,p=f.child,f.tag){case 0:case 11:case 14:case 15:tr(4,f,f.return);break;case 1:mn(f,f.return);var d=f.stateNode;if(typeof d.componentWillUnmount=="function"){r=f,n=f.return;try{s=r,d.props=s.memoizedProps,d.state=s.memoizedState,d.componentWillUnmount()}catch(h){Ue(r,n,h)}}break;case 5:mn(f,f.return);break;case 22:if(f.memoizedState!==null){wd(u);continue}}p!==null?(p.return=f,me=p):wd(u)}g=g.sibling}e:for(g=null,u=e;;){if(u.tag===5){if(g===null){g=u;try{a=u.stateNode,m?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=u.stateNode,c=u.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=Bu("display",o))}catch(h){Ue(e,e.return,h)}}}else if(u.tag===6){if(g===null)try{u.stateNode.nodeValue=m?"":u.memoizedProps}catch(h){Ue(e,e.return,h)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Rt(s,e),Ot(e),r&4&&jd(e);break;case 21:break;default:Rt(s,e),Ot(e)}}function Ot(e){var s=e.flags;if(s&2){try{e:{for(var n=e.return;n!==null;){if(mp(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(ar(a,""),r.flags&=-33);var l=bd(e);Oo(e,l,a);break;case 3:case 4:var o=r.stateNode.containerInfo,i=bd(e);Fo(e,i,o);break;default:throw Error(ne(161))}}catch(c){Ue(e,e.return,c)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function _g(e,s,n){me=e,fp(e)}function fp(e,s,n){for(var r=(e.mode&1)!==0;me!==null;){var a=me,l=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Yr;if(!o){var i=a.alternate,c=i!==null&&i.memoizedState!==null||et;i=Yr;var m=et;if(Yr=o,(et=c)&&!m)for(me=a;me!==null;)o=me,c=o.child,o.tag===22&&o.memoizedState!==null?Cd(a):c!==null?(c.return=o,me=c):Cd(a);for(;l!==null;)me=l,fp(l),l=l.sibling;me=a,Yr=i,et=m}Nd(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,me=l):Nd(e)}}function Nd(e){for(;me!==null;){var s=me;if(s.flags&8772){var n=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:et||tl(5,s);break;case 1:var r=s.stateNode;if(s.flags&4&&!et)if(n===null)r.componentDidMount();else{var a=s.elementType===s.type?n.memoizedProps:Dt(s.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&ld(s,l,r);break;case 3:var o=s.updateQueue;if(o!==null){if(n=null,s.child!==null)switch(s.child.tag){case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}ld(s,o,n)}break;case 5:var i=s.stateNode;if(n===null&&s.flags&4){n=i;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var m=s.alternate;if(m!==null){var g=m.memoizedState;if(g!==null){var u=g.dehydrated;u!==null&&cr(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}et||s.flags&512&&Uo(s)}catch(f){Ue(s,s.return,f)}}if(s===e){me=null;break}if(n=s.sibling,n!==null){n.return=s.return,me=n;break}me=s.return}}function wd(e){for(;me!==null;){var s=me;if(s===e){me=null;break}var n=s.sibling;if(n!==null){n.return=s.return,me=n;break}me=s.return}}function Cd(e){for(;me!==null;){var s=me;try{switch(s.tag){case 0:case 11:case 15:var n=s.return;try{tl(4,s)}catch(c){Ue(s,n,c)}break;case 1:var r=s.stateNode;if(typeof r.componentDidMount=="function"){var a=s.return;try{r.componentDidMount()}catch(c){Ue(s,a,c)}}var l=s.return;try{Uo(s)}catch(c){Ue(s,l,c)}break;case 5:var o=s.return;try{Uo(s)}catch(c){Ue(s,o,c)}}}catch(c){Ue(s,s.return,c)}if(s===e){me=null;break}var i=s.sibling;if(i!==null){i.return=s.return,me=i;break}me=s.return}}var Ug=Math.ceil,Fa=as.ReactCurrentDispatcher,Oi=as.ReactCurrentOwner,Lt=as.ReactCurrentBatchConfig,Se=0,Ve=null,ze=null,Je=0,gt=0,pn=Ls(0),He=0,br=null,qs=0,sl=0,Bi=0,sr=null,it=null,zi=0,Ln=1/0,Vt=null,Oa=!1,Bo=null,bs=null,Xr=!1,ms=null,Ba=0,nr=0,zo=null,ua=-1,ma=0;function rt(){return Se&6?Oe():ua!==-1?ua:ua=Oe()}function js(e){return e.mode&1?Se&2&&Je!==0?Je&-Je:bg.transition!==null?(ma===0&&(ma=Zu()),ma):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:lm(e.type)),e):1}function _t(e,s,n,r){if(50<nr)throw nr=0,zo=null,Error(ne(185));kr(e,n,r),(!(Se&2)||e!==Ve)&&(e===Ve&&(!(Se&2)&&(sl|=n),He===4&&ds(e,Je)),mt(e,r),n===1&&Se===0&&!(s.mode&1)&&(Ln=Oe()+500,Xa&&Es()))}function mt(e,s){var n=e.callbackNode;bf(e,s);var r=wa(e,e===Ve?Je:0);if(r===0)n!==null&&Pc(n),e.callbackNode=null,e.callbackPriority=0;else if(s=r&-r,e.callbackPriority!==s){if(n!=null&&Pc(n),s===1)e.tag===0?vg(Sd.bind(null,e)):Sm(Sd.bind(null,e)),fg(function(){!(Se&6)&&Es()}),n=null;else{switch(em(r)){case 1:n=pi;break;case 4:n=Yu;break;case 16:n=Na;break;case 536870912:n=Xu;break;default:n=Na}n=wp(n,gp.bind(null,e))}e.callbackPriority=s,e.callbackNode=n}}function gp(e,s){if(ua=-1,ma=0,Se&6)throw Error(ne(327));var n=e.callbackNode;if(vn()&&e.callbackNode!==n)return null;var r=wa(e,e===Ve?Je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||s)s=za(e,r);else{s=r;var a=Se;Se|=2;var l=yp();(Ve!==e||Je!==s)&&(Vt=null,Ln=Oe()+500,Fs(e,s));do try{Bg();break}catch(i){xp(e,i)}while(!0);ki(),Fa.current=l,Se=a,ze!==null?s=0:(Ve=null,Je=0,s=He)}if(s!==0){if(s===2&&(a=ho(e),a!==0&&(r=a,s=$o(e,a))),s===1)throw n=br,Fs(e,0),ds(e,r),mt(e,Oe()),n;if(s===6)ds(e,r);else{if(a=e.current.alternate,!(r&30)&&!Fg(a)&&(s=za(e,r),s===2&&(l=ho(e),l!==0&&(r=l,s=$o(e,l))),s===1))throw n=br,Fs(e,0),ds(e,r),mt(e,Oe()),n;switch(e.finishedWork=a,e.finishedLanes=r,s){case 0:case 1:throw Error(ne(345));case 2:Ps(e,it,Vt);break;case 3:if(ds(e,r),(r&130023424)===r&&(s=zi+500-Oe(),10<s)){if(wa(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){rt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=No(Ps.bind(null,e,it,Vt),s);break}Ps(e,it,Vt);break;case 4:if(ds(e,r),(r&4194240)===r)break;for(s=e.eventTimes,a=-1;0<r;){var o=31-It(r);l=1<<o,o=s[o],o>a&&(a=o),r&=~l}if(r=a,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ug(r/1960))-r,10<r){e.timeoutHandle=No(Ps.bind(null,e,it,Vt),r);break}Ps(e,it,Vt);break;case 5:Ps(e,it,Vt);break;default:throw Error(ne(329))}}}return mt(e,Oe()),e.callbackNode===n?gp.bind(null,e):null}function $o(e,s){var n=sr;return e.current.memoizedState.isDehydrated&&(Fs(e,s).flags|=256),e=za(e,s),e!==2&&(s=it,it=n,s!==null&&Go(s)),e}function Go(e){it===null?it=e:it.push.apply(it,e)}function Fg(e){for(var s=e;;){if(s.flags&16384){var n=s.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!Ut(l(),a))return!1}catch{return!1}}}if(n=s.child,s.subtreeFlags&16384&&n!==null)n.return=s,s=n;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ds(e,s){for(s&=~Bi,s&=~sl,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var n=31-It(s),r=1<<n;e[n]=-1,s&=~r}}function Sd(e){if(Se&6)throw Error(ne(327));vn();var s=wa(e,0);if(!(s&1))return mt(e,Oe()),null;var n=za(e,s);if(e.tag!==0&&n===2){var r=ho(e);r!==0&&(s=r,n=$o(e,r))}if(n===1)throw n=br,Fs(e,0),ds(e,s),mt(e,Oe()),n;if(n===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,Ps(e,it,Vt),mt(e,Oe()),null}function $i(e,s){var n=Se;Se|=1;try{return e(s)}finally{Se=n,Se===0&&(Ln=Oe()+500,Xa&&Es())}}function Ws(e){ms!==null&&ms.tag===0&&!(Se&6)&&vn();var s=Se;Se|=1;var n=Lt.transition,r=Ee;try{if(Lt.transition=null,Ee=1,e)return e()}finally{Ee=r,Lt.transition=n,Se=s,!(Se&6)&&Es()}}function Gi(){gt=pn.current,Re(pn)}function Fs(e,s){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,hg(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(wi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ea();break;case 3:Sn(),Re(dt),Re(st),Di();break;case 5:Ri(r);break;case 4:Sn();break;case 13:Re(Me);break;case 19:Re(Me);break;case 10:Li(r.type._context);break;case 22:case 23:Gi()}n=n.return}if(Ve=e,ze=e=Ns(e.current,null),Je=gt=s,He=0,br=null,Bi=sl=qs=0,it=sr=null,Is!==null){for(s=0;s<Is.length;s++)if(n=Is[s],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var o=l.next;l.next=a,r.next=o}n.pending=r}Is=null}return e}function xp(e,s){do{var n=ze;try{if(ki(),ia.current=Ua,_a){for(var r=Ie.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}_a=!1}if(Hs=0,qe=Ge=Ie=null,er=!1,xr=0,Oi.current=null,n===null||n.return===null){He=1,br=s,ze=null;break}e:{var l=e,o=n.return,i=n,c=s;if(s=Je,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var m=c,g=i,u=g.tag;if(!(g.mode&1)&&(u===0||u===11||u===15)){var f=g.alternate;f?(g.updateQueue=f.updateQueue,g.memoizedState=f.memoizedState,g.lanes=f.lanes):(g.updateQueue=null,g.memoizedState=null)}var p=md(o);if(p!==null){p.flags&=-257,pd(p,o,i,l,s),p.mode&1&&ud(l,m,s),s=p,c=m;var d=s.updateQueue;if(d===null){var h=new Set;h.add(c),s.updateQueue=h}else d.add(c);break e}else{if(!(s&1)){ud(l,m,s),Hi();break e}c=Error(ne(426))}}else if(Pe&&i.mode&1){var j=md(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),pd(j,o,i,l,s),Ci(kn(c,i));break e}}l=c=kn(c,i),He!==4&&(He=2),sr===null?sr=[l]:sr.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var b=ep(l,c,s);ad(l,b);break e;case 1:i=c;var y=l.type,w=l.stateNode;if(!(l.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(bs===null||!bs.has(w)))){l.flags|=65536,s&=-s,l.lanes|=s;var C=tp(l,i,s);ad(l,C);break e}}l=l.return}while(l!==null)}bp(n)}catch(D){s=D,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function yp(){var e=Fa.current;return Fa.current=Ua,e===null?Ua:e}function Hi(){(He===0||He===3||He===2)&&(He=4),Ve===null||!(qs&268435455)&&!(sl&268435455)||ds(Ve,Je)}function za(e,s){var n=Se;Se|=2;var r=yp();(Ve!==e||Je!==s)&&(Vt=null,Fs(e,s));do try{Og();break}catch(a){xp(e,a)}while(!0);if(ki(),Se=n,Fa.current=r,ze!==null)throw Error(ne(261));return Ve=null,Je=0,He}function Og(){for(;ze!==null;)vp(ze)}function Bg(){for(;ze!==null&&!uf();)vp(ze)}function vp(e){var s=Np(e.alternate,e,gt);e.memoizedProps=e.pendingProps,s===null?bp(e):ze=s,Oi.current=null}function bp(e){var s=e;do{var n=s.alternate;if(e=s.return,s.flags&32768){if(n=Pg(n,s),n!==null){n.flags&=32767,ze=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,ze=null;return}}else if(n=Dg(n,s,gt),n!==null){ze=n;return}if(s=s.sibling,s!==null){ze=s;return}ze=s=e}while(s!==null);He===0&&(He=5)}function Ps(e,s,n){var r=Ee,a=Lt.transition;try{Lt.transition=null,Ee=1,zg(e,s,n,r)}finally{Lt.transition=a,Ee=r}return null}function zg(e,s,n,r){do vn();while(ms!==null);if(Se&6)throw Error(ne(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(jf(e,l),e===Ve&&(ze=Ve=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xr||(Xr=!0,wp(Na,function(){return vn(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Lt.transition,Lt.transition=null;var o=Ee;Ee=1;var i=Se;Se|=4,Oi.current=null,Ig(e,n),hp(n,e),og(bo),Ca=!!vo,bo=vo=null,e.current=n,_g(n),mf(),Se=i,Ee=o,Lt.transition=l}else e.current=n;if(Xr&&(Xr=!1,ms=e,Ba=a),l=e.pendingLanes,l===0&&(bs=null),ff(n.stateNode),mt(e,Oe()),s!==null)for(r=e.onRecoverableError,n=0;n<s.length;n++)a=s[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Oa)throw Oa=!1,e=Bo,Bo=null,e;return Ba&1&&e.tag!==0&&vn(),l=e.pendingLanes,l&1?e===zo?nr++:(nr=0,zo=e):nr=0,Es(),null}function vn(){if(ms!==null){var e=em(Ba),s=Lt.transition,n=Ee;try{if(Lt.transition=null,Ee=16>e?16:e,ms===null)var r=!1;else{if(e=ms,ms=null,Ba=0,Se&6)throw Error(ne(331));var a=Se;for(Se|=4,me=e.current;me!==null;){var l=me,o=l.child;if(me.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var m=i[c];for(me=m;me!==null;){var g=me;switch(g.tag){case 0:case 11:case 15:tr(8,g,l)}var u=g.child;if(u!==null)u.return=g,me=u;else for(;me!==null;){g=me;var f=g.sibling,p=g.return;if(up(g),g===m){me=null;break}if(f!==null){f.return=p,me=f;break}me=p}}}var d=l.alternate;if(d!==null){var h=d.child;if(h!==null){d.child=null;do{var j=h.sibling;h.sibling=null,h=j}while(h!==null)}}me=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,me=o;else e:for(;me!==null;){if(l=me,l.flags&2048)switch(l.tag){case 0:case 11:case 15:tr(9,l,l.return)}var b=l.sibling;if(b!==null){b.return=l.return,me=b;break e}me=l.return}}var y=e.current;for(me=y;me!==null;){o=me;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,me=w;else e:for(o=y;me!==null;){if(i=me,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:tl(9,i)}}catch(D){Ue(i,i.return,D)}if(i===o){me=null;break e}var C=i.sibling;if(C!==null){C.return=i.return,me=C;break e}me=i.return}}if(Se=a,Es(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Va,e)}catch{}r=!0}return r}finally{Ee=n,Lt.transition=s}}return!1}function kd(e,s,n){s=kn(n,s),s=ep(e,s,1),e=vs(e,s,1),s=rt(),e!==null&&(kr(e,1,s),mt(e,s))}function Ue(e,s,n){if(e.tag===3)kd(e,e,n);else for(;s!==null;){if(s.tag===3){kd(s,e,n);break}else if(s.tag===1){var r=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bs===null||!bs.has(r))){e=kn(n,e),e=tp(s,e,1),s=vs(s,e,1),e=rt(),s!==null&&(kr(s,1,e),mt(s,e));break}}s=s.return}}function $g(e,s,n){var r=e.pingCache;r!==null&&r.delete(s),s=rt(),e.pingedLanes|=e.suspendedLanes&n,Ve===e&&(Je&n)===n&&(He===4||He===3&&(Je&130023424)===Je&&500>Oe()-zi?Fs(e,0):Bi|=n),mt(e,s)}function jp(e,s){s===0&&(e.mode&1?(s=$r,$r<<=1,!($r&130023424)&&($r=4194304)):s=1);var n=rt();e=ss(e,s),e!==null&&(kr(e,s,n),mt(e,n))}function Gg(e){var s=e.memoizedState,n=0;s!==null&&(n=s.retryLane),jp(e,n)}function Hg(e,s){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(s),jp(e,n)}var Np;Np=function(e,s,n){if(e!==null)if(e.memoizedProps!==s.pendingProps||dt.current)ct=!0;else{if(!(e.lanes&n)&&!(s.flags&128))return ct=!1,Rg(e,s,n);ct=!!(e.flags&131072)}else ct=!1,Pe&&s.flags&1048576&&km(s,Ra,s.index);switch(s.lanes=0,s.tag){case 2:var r=s.type;da(e,s),e=s.pendingProps;var a=Nn(s,st.current);yn(s,n),a=Mi(null,s,r,e,a,n);var l=Ii();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,ut(r)?(l=!0,Ta(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ti(s),a.updater=el,s.stateNode=a,a._reactInternals=s,To(s,r,e,n),s=Do(null,s,r,!0,l,n)):(s.tag=0,Pe&&l&&Ni(s),nt(null,s,a,n),s=s.child),s;case 16:r=s.elementType;e:{switch(da(e,s),e=s.pendingProps,a=r._init,r=a(r._payload),s.type=r,a=s.tag=Wg(r),e=Dt(r,e),a){case 0:s=Ro(null,s,r,e,n);break e;case 1:s=gd(null,s,r,e,n);break e;case 11:s=hd(null,s,r,e,n);break e;case 14:s=fd(null,s,r,Dt(r.type,e),n);break e}throw Error(ne(306,r,""))}return s;case 0:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Dt(r,a),Ro(e,s,r,a,n);case 1:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Dt(r,a),gd(e,s,r,a,n);case 3:e:{if(ap(s),e===null)throw Error(ne(387));r=s.pendingProps,l=s.memoizedState,a=l.element,Dm(e,s),Ma(s,r,null,n);var o=s.memoizedState;if(r=o.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=kn(Error(ne(423)),s),s=xd(e,s,r,n,a);break e}else if(r!==a){a=kn(Error(ne(424)),s),s=xd(e,s,r,n,a);break e}else for(vt=ys(s.stateNode.containerInfo.firstChild),bt=s,Pe=!0,Mt=null,n=Am(s,null,r,n),s.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wn(),r===a){s=ns(e,s,n);break e}nt(e,s,r,n)}s=s.child}return s;case 5:return Pm(s),e===null&&ko(s),r=s.type,a=s.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,jo(r,a)?o=null:l!==null&&jo(r,l)&&(s.flags|=32),rp(e,s),nt(e,s,o,n),s.child;case 6:return e===null&&ko(s),null;case 13:return lp(e,s,n);case 4:return Ai(s,s.stateNode.containerInfo),r=s.pendingProps,e===null?s.child=Cn(s,null,r,n):nt(e,s,r,n),s.child;case 11:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Dt(r,a),hd(e,s,r,a,n);case 7:return nt(e,s,s.pendingProps,n),s.child;case 8:return nt(e,s,s.pendingProps.children,n),s.child;case 12:return nt(e,s,s.pendingProps.children,n),s.child;case 10:e:{if(r=s.type._context,a=s.pendingProps,l=s.memoizedProps,o=a.value,Te(Da,r._currentValue),r._currentValue=o,l!==null)if(Ut(l.value,o)){if(l.children===a.children&&!dt.current){s=ns(e,s,n);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var i=l.dependencies;if(i!==null){o=l.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=Xt(-1,n&-n),c.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var g=m.pending;g===null?c.next=c:(c.next=g.next,g.next=c),m.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Lo(l.return,n,s),i.lanes|=n;break}c=c.next}}else if(l.tag===10)o=l.type===s.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(ne(341));o.lanes|=n,i=o.alternate,i!==null&&(i.lanes|=n),Lo(o,n,s),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===s){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}nt(e,s,a.children,n),s=s.child}return s;case 9:return a=s.type,r=s.pendingProps.children,yn(s,n),a=Et(a),r=r(a),s.flags|=1,nt(e,s,r,n),s.child;case 14:return r=s.type,a=Dt(r,s.pendingProps),a=Dt(r.type,a),fd(e,s,r,a,n);case 15:return sp(e,s,s.type,s.pendingProps,n);case 17:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Dt(r,a),da(e,s),s.tag=1,ut(r)?(e=!0,Ta(s)):e=!1,yn(s,n),Zm(s,r,a),To(s,r,a,n),Do(null,s,r,!0,e,n);case 19:return op(e,s,n);case 22:return np(e,s,n)}throw Error(ne(156,s.tag))};function wp(e,s){return Ju(e,s)}function qg(e,s,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,s,n,r){return new qg(e,s,n,r)}function qi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wg(e){if(typeof e=="function")return qi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===di)return 11;if(e===ui)return 14}return 2}function Ns(e,s){var n=e.alternate;return n===null?(n=kt(e.tag,s,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=s,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,s=e.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function pa(e,s,n,r,a,l){var o=2;if(r=e,typeof e=="function")qi(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case sn:return Os(n.children,a,l,s);case ci:o=8,a|=8;break;case Xl:return e=kt(12,n,s,a|2),e.elementType=Xl,e.lanes=l,e;case Zl:return e=kt(13,n,s,a),e.elementType=Zl,e.lanes=l,e;case eo:return e=kt(19,n,s,a),e.elementType=eo,e.lanes=l,e;case Pu:return nl(n,a,l,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ru:o=10;break e;case Du:o=9;break e;case di:o=11;break e;case ui:o=14;break e;case os:o=16,r=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return s=kt(o,n,s,a),s.elementType=e,s.type=r,s.lanes=l,s}function Os(e,s,n,r){return e=kt(7,e,r,s),e.lanes=n,e}function nl(e,s,n,r){return e=kt(22,e,r,s),e.elementType=Pu,e.lanes=n,e.stateNode={isHidden:!1},e}function $l(e,s,n){return e=kt(6,e,null,s),e.lanes=n,e}function Gl(e,s,n){return s=kt(4,e.children!==null?e.children:[],e.key,s),s.lanes=n,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function Vg(e,s,n,r,a){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wl(0),this.expirationTimes=wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wl(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Wi(e,s,n,r,a,l,o,i,c){return e=new Vg(e,s,n,i,c),s===1?(s=1,l===!0&&(s|=8)):s=0,l=kt(3,null,null,s),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ti(l),e}function Kg(e,s,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tn,key:r==null?null:""+r,children:e,containerInfo:s,implementation:n}}function Cp(e){if(!e)return Cs;e=e._reactInternals;e:{if(Js(e)!==e||e.tag!==1)throw Error(ne(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(ut(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(ne(171))}if(e.tag===1){var n=e.type;if(ut(n))return Cm(e,n,s)}return s}function Sp(e,s,n,r,a,l,o,i,c){return e=Wi(n,r,!0,e,a,l,o,i,c),e.context=Cp(null),n=e.current,r=rt(),a=js(n),l=Xt(r,a),l.callback=s??null,vs(n,l,a),e.current.lanes=a,kr(e,a,r),mt(e,r),e}function rl(e,s,n,r){var a=s.current,l=rt(),o=js(a);return n=Cp(n),s.context===null?s.context=n:s.pendingContext=n,s=Xt(l,o),s.payload={element:e},r=r===void 0?null:r,r!==null&&(s.callback=r),e=vs(a,s,o),e!==null&&(_t(e,a,o,l),oa(e,a,o)),o}function $a(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ld(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<s?n:s}}function Vi(e,s){Ld(e,s),(e=e.alternate)&&Ld(e,s)}function Qg(){return null}var kp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ki(e){this._internalRoot=e}al.prototype.render=Ki.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(ne(409));rl(e,s,null,null)};al.prototype.unmount=Ki.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Ws(function(){rl(null,e,null,null)}),s[ts]=null}};function al(e){this._internalRoot=e}al.prototype.unstable_scheduleHydration=function(e){if(e){var s=nm();e={blockedOn:null,target:e,priority:s};for(var n=0;n<cs.length&&s!==0&&s<cs[n].priority;n++);cs.splice(n,0,e),n===0&&am(e)}};function Qi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ll(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ed(){}function Jg(e,s,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var m=$a(o);l.call(m)}}var o=Sp(s,r,e,0,null,!1,!1,"",Ed);return e._reactRootContainer=o,e[ts]=o.current,mr(e.nodeType===8?e.parentNode:e),Ws(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var i=r;r=function(){var m=$a(c);i.call(m)}}var c=Wi(e,0,!1,null,null,!1,!1,"",Ed);return e._reactRootContainer=c,e[ts]=c.current,mr(e.nodeType===8?e.parentNode:e),Ws(function(){rl(s,c,n,r)}),c}function ol(e,s,n,r,a){var l=n._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var i=a;a=function(){var c=$a(o);i.call(c)}}rl(s,o,e,a)}else o=Jg(n,s,e,a,r);return $a(o)}tm=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var n=Vn(s.pendingLanes);n!==0&&(hi(s,n|1),mt(s,Oe()),!(Se&6)&&(Ln=Oe()+500,Es()))}break;case 13:Ws(function(){var r=ss(e,1);if(r!==null){var a=rt();_t(r,e,1,a)}}),Vi(e,1)}};fi=function(e){if(e.tag===13){var s=ss(e,134217728);if(s!==null){var n=rt();_t(s,e,134217728,n)}Vi(e,134217728)}};sm=function(e){if(e.tag===13){var s=js(e),n=ss(e,s);if(n!==null){var r=rt();_t(n,e,s,r)}Vi(e,s)}};nm=function(){return Ee};rm=function(e,s){var n=Ee;try{return Ee=e,s()}finally{Ee=n}};uo=function(e,s,n){switch(s){case"input":if(no(e,n),s=n.name,n.type==="radio"&&s!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<n.length;s++){var r=n[s];if(r!==e&&r.form===e.form){var a=Ya(r);if(!a)throw Error(ne(90));Iu(r),no(r,a)}}}break;case"textarea":Uu(e,n);break;case"select":s=n.value,s!=null&&hn(e,!!n.multiple,s,!1)}};Hu=$i;qu=Ws;var Yg={usingClientEntryPoint:!1,Events:[Er,ln,Ya,$u,Gu,$i]},Gn={findFiberByHostInstance:Ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xg={bundleType:Gn.bundleType,version:Gn.version,rendererPackageName:Gn.rendererPackageName,rendererConfig:Gn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:as.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ku(e),e===null?null:e.stateNode},findFiberByHostInstance:Gn.findFiberByHostInstance||Qg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zr.isDisabled&&Zr.supportsFiber)try{Va=Zr.inject(Xg),qt=Zr}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yg;Nt.createPortal=function(e,s){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qi(s))throw Error(ne(200));return Kg(e,s,null,n)};Nt.createRoot=function(e,s){if(!Qi(e))throw Error(ne(299));var n=!1,r="",a=kp;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=Wi(e,1,!1,null,null,n,!1,r,a),e[ts]=s.current,mr(e.nodeType===8?e.parentNode:e),new Ki(s)};Nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=Ku(s),e=e===null?null:e.stateNode,e};Nt.flushSync=function(e){return Ws(e)};Nt.hydrate=function(e,s,n){if(!ll(s))throw Error(ne(200));return ol(null,e,s,!0,n)};Nt.hydrateRoot=function(e,s,n){if(!Qi(e))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",o=kp;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),s=Sp(s,null,e,1,n??null,a,!1,l,o),e[ts]=s.current,mr(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[n,a]:s.mutableSourceEagerHydrationData.push(n,a);return new al(s)};Nt.render=function(e,s,n){if(!ll(s))throw Error(ne(200));return ol(null,e,s,!1,n)};Nt.unmountComponentAtNode=function(e){if(!ll(e))throw Error(ne(40));return e._reactRootContainer?(Ws(function(){ol(null,null,e,!1,function(){e._reactRootContainer=null,e[ts]=null})}),!0):!1};Nt.unstable_batchedUpdates=$i;Nt.unstable_renderSubtreeIntoContainer=function(e,s,n,r){if(!ll(n))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return ol(e,s,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function Lp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lp)}catch(e){console.error(e)}}Lp(),Lu.exports=Nt;var Zg=Lu.exports,Td=Zg;Jl.createRoot=Td.createRoot,Jl.hydrateRoot=Td.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jr(){return jr=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jr.apply(this,arguments)}var ps;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ps||(ps={}));const Ad="popstate";function ex(e){e===void 0&&(e={});function s(r,a){let{pathname:l,search:o,hash:i}=r.location;return Ho("",{pathname:l,search:o,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Tp(a)}return sx(s,n,null,e)}function $e(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function Ep(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function tx(){return Math.random().toString(36).substr(2,8)}function Rd(e,s){return{usr:e.state,key:e.key,idx:s}}function Ho(e,s,n,r){return n===void 0&&(n=null),jr({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof s=="string"?Pn(s):s,{state:n,key:s&&s.key||r||tx()})}function Tp(e){let{pathname:s="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(s+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function Pn(e){let s={};if(e){let n=e.indexOf("#");n>=0&&(s.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(s.search=e.substr(r),e=e.substr(0,r)),e&&(s.pathname=e)}return s}function sx(e,s,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,o=a.history,i=ps.Pop,c=null,m=g();m==null&&(m=0,o.replaceState(jr({},o.state,{idx:m}),""));function g(){return(o.state||{idx:null}).idx}function u(){i=ps.Pop;let j=g(),b=j==null?null:j-m;m=j,c&&c({action:i,location:h.location,delta:b})}function f(j,b){i=ps.Push;let y=Ho(h.location,j,b);m=g()+1;let w=Rd(y,m),C=h.createHref(y);try{o.pushState(w,"",C)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(C)}l&&c&&c({action:i,location:h.location,delta:1})}function p(j,b){i=ps.Replace;let y=Ho(h.location,j,b);m=g();let w=Rd(y,m),C=h.createHref(y);o.replaceState(w,"",C),l&&c&&c({action:i,location:h.location,delta:0})}function d(j){let b=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof j=="string"?j:Tp(j);return y=y.replace(/ $/,"%20"),$e(b,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,b)}let h={get action(){return i},get location(){return e(a,o)},listen(j){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Ad,u),c=j,()=>{a.removeEventListener(Ad,u),c=null}},createHref(j){return s(a,j)},createURL:d,encodeLocation(j){let b=d(j);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:p,go(j){return o.go(j)}};return h}var Dd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Dd||(Dd={}));function nx(e,s,n){return n===void 0&&(n="/"),rx(e,s,n)}function rx(e,s,n,r){let a=typeof s=="string"?Pn(s):s,l=Dp(a.pathname||"/",n);if(l==null)return null;let o=Ap(e);ax(o);let i=null;for(let c=0;i==null&&c<o.length;++c){let m=xx(l);i=hx(o[c],m)}return i}function Ap(e,s,n,r){s===void 0&&(s=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(l,o,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};c.relativePath.startsWith("/")&&($e(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let m=Bs([r,c.relativePath]),g=n.concat(c);l.children&&l.children.length>0&&($e(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Ap(l.children,s,g,m)),!(l.path==null&&!l.index)&&s.push({path:m,score:mx(m,l.index),routesMeta:g})};return e.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))a(l,o);else for(let c of Rp(l.path))a(l,o,c)}),s}function Rp(e){let s=e.split("/");if(s.length===0)return[];let[n,...r]=s,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let o=Rp(r.join("/")),i=[];return i.push(...o.map(c=>c===""?l:[l,c].join("/"))),a&&i.push(...o),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function ax(e){e.sort((s,n)=>s.score!==n.score?n.score-s.score:px(s.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lx=/^:[\w-]+$/,ox=3,ix=2,cx=1,dx=10,ux=-2,Pd=e=>e==="*";function mx(e,s){let n=e.split("/"),r=n.length;return n.some(Pd)&&(r+=ux),s&&(r+=ix),n.filter(a=>!Pd(a)).reduce((a,l)=>a+(lx.test(l)?ox:l===""?cx:dx),r)}function px(e,s){return e.length===s.length&&e.slice(0,-1).every((r,a)=>r===s[a])?e[e.length-1]-s[s.length-1]:0}function hx(e,s,n){let{routesMeta:r}=e,a={},l="/",o=[];for(let i=0;i<r.length;++i){let c=r[i],m=i===r.length-1,g=l==="/"?s:s.slice(l.length)||"/",u=fx({path:c.relativePath,caseSensitive:c.caseSensitive,end:m},g),f=c.route;if(!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:Bs([l,u.pathname]),pathnameBase:jx(Bs([l,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(l=Bs([l,u.pathnameBase]))}return o}function fx(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=gx(e.path,e.caseSensitive,e.end),a=s.match(n);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:r.reduce((m,g,u)=>{let{paramName:f,isOptional:p}=g;if(f==="*"){let h=i[u]||"";o=l.slice(0,l.length-h.length).replace(/(.)\/+$/,"$1")}const d=i[u];return p&&!d?m[f]=void 0:m[f]=(d||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:o,pattern:e}}function gx(e,s,n){s===void 0&&(s=!1),n===void 0&&(n=!0),Ep(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),r]}function xx(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Ep(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),e}}function Dp(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let n=s.endsWith("/")?s.length-1:s.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function yx(e,s){s===void 0&&(s="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Pn(e):e;return{pathname:n?n.startsWith("/")?n:vx(n,s):s,search:Nx(r),hash:wx(a)}}function vx(e,s){let n=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Hl(e,s,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bx(e){return e.filter((s,n)=>n===0||s.route.path&&s.route.path.length>0)}function Pp(e,s){let n=bx(e);return s?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Mp(e,s,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=Pn(e):(a=jr({},e),$e(!a.pathname||!a.pathname.includes("?"),Hl("?","pathname","search",a)),$e(!a.pathname||!a.pathname.includes("#"),Hl("#","pathname","hash",a)),$e(!a.search||!a.search.includes("#"),Hl("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,i;if(o==null)i=n;else{let u=s.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),u-=1;a.pathname=f.join("/")}i=u>=0?s[u]:"/"}let c=yx(a,i),m=o&&o!=="/"&&o.endsWith("/"),g=(l||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(m||g)&&(c.pathname+="/"),c}const Bs=e=>e.join("/").replace(/\/\/+/g,"/"),jx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Nx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,wx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Cx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ip=["post","put","patch","delete"];new Set(Ip);const Sx=["get",...Ip];new Set(Sx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nr(){return Nr=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nr.apply(this,arguments)}const Ji=x.createContext(null),kx=x.createContext(null),Ar=x.createContext(null),il=x.createContext(null),Ts=x.createContext({outlet:null,matches:[],isDataRoute:!1}),_p=x.createContext(null);function Rr(){return x.useContext(il)!=null}function Dr(){return Rr()||$e(!1),x.useContext(il).location}function Up(e){x.useContext(Ar).static||x.useLayoutEffect(e)}function As(){let{isDataRoute:e}=x.useContext(Ts);return e?Bx():Lx()}function Lx(){Rr()||$e(!1);let e=x.useContext(Ji),{basename:s,future:n,navigator:r}=x.useContext(Ar),{matches:a}=x.useContext(Ts),{pathname:l}=Dr(),o=JSON.stringify(Pp(a,n.v7_relativeSplatPath)),i=x.useRef(!1);return Up(()=>{i.current=!0}),x.useCallback(function(m,g){if(g===void 0&&(g={}),!i.current)return;if(typeof m=="number"){r.go(m);return}let u=Mp(m,JSON.parse(o),l,g.relative==="path");e==null&&s!=="/"&&(u.pathname=u.pathname==="/"?s:Bs([s,u.pathname])),(g.replace?r.replace:r.push)(u,g.state,g)},[s,r,o,l,e])}function Ex(){let{matches:e}=x.useContext(Ts),s=e[e.length-1];return s?s.params:{}}function Tx(e,s){return Ax(e,s)}function Ax(e,s,n,r){Rr()||$e(!1);let{navigator:a}=x.useContext(Ar),{matches:l}=x.useContext(Ts),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let m=Dr(),g;if(s){var u;let j=typeof s=="string"?Pn(s):s;c==="/"||(u=j.pathname)!=null&&u.startsWith(c)||$e(!1),g=j}else g=m;let f=g.pathname||"/",p=f;if(c!=="/"){let j=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(j.length).join("/")}let d=nx(e,{pathname:p}),h=Ix(d&&d.map(j=>Object.assign({},j,{params:Object.assign({},i,j.params),pathname:Bs([c,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:Bs([c,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),l,n,r);return s&&h?x.createElement(il.Provider,{value:{location:Nr({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:ps.Pop}},h):h}function Rx(){let e=Ox(),s=Cx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},s),n?x.createElement("pre",{style:a},n):null,null)}const Dx=x.createElement(Rx,null);class Px extends x.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,n){return n.location!==s.location||n.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:n.error,location:n.location,revalidation:s.revalidation||n.revalidation}}componentDidCatch(s,n){console.error("React Router caught the following error during render",s,n)}render(){return this.state.error!==void 0?x.createElement(Ts.Provider,{value:this.props.routeContext},x.createElement(_p.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mx(e){let{routeContext:s,match:n,children:r}=e,a=x.useContext(Ji);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Ts.Provider,{value:s},r)}function Ix(e,s,n,r){var a;if(s===void 0&&(s=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&s.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,i=(a=n)==null?void 0:a.errors;if(i!=null){let g=o.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);g>=0||$e(!1),o=o.slice(0,Math.min(o.length,g+1))}let c=!1,m=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<o.length;g++){let u=o[g];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(m=g),u.route.id){let{loaderData:f,errors:p}=n,d=u.route.loader&&f[u.route.id]===void 0&&(!p||p[u.route.id]===void 0);if(u.route.lazy||d){c=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((g,u,f)=>{let p,d=!1,h=null,j=null;n&&(p=i&&u.route.id?i[u.route.id]:void 0,h=u.route.errorElement||Dx,c&&(m<0&&f===0?(zx("route-fallback"),d=!0,j=null):m===f&&(d=!0,j=u.route.hydrateFallbackElement||null)));let b=s.concat(o.slice(0,f+1)),y=()=>{let w;return p?w=h:d?w=j:u.route.Component?w=x.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=g,x.createElement(Mx,{match:u,routeContext:{outlet:g,matches:b,isDataRoute:n!=null},children:w})};return n&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?x.createElement(Px,{location:n.location,revalidation:n.revalidation,component:h,error:p,children:y(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):y()},null)}var Fp=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Fp||{}),Op=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Op||{});function _x(e){let s=x.useContext(Ji);return s||$e(!1),s}function Ux(e){let s=x.useContext(kx);return s||$e(!1),s}function Fx(e){let s=x.useContext(Ts);return s||$e(!1),s}function Bp(e){let s=Fx(),n=s.matches[s.matches.length-1];return n.route.id||$e(!1),n.route.id}function Ox(){var e;let s=x.useContext(_p),n=Ux(),r=Bp();return s!==void 0?s:(e=n.errors)==null?void 0:e[r]}function Bx(){let{router:e}=_x(Fp.UseNavigateStable),s=Bp(Op.UseNavigateStable),n=x.useRef(!1);return Up(()=>{n.current=!0}),x.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Nr({fromRouteId:s},l)))},[e,s])}const Md={};function zx(e,s,n){Md[e]||(Md[e]=!0)}function $x(e,s){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Id(e){let{to:s,replace:n,state:r,relative:a}=e;Rr()||$e(!1);let{future:l,static:o}=x.useContext(Ar),{matches:i}=x.useContext(Ts),{pathname:c}=Dr(),m=As(),g=Mp(s,Pp(i,l.v7_relativeSplatPath),c,a==="path"),u=JSON.stringify(g);return x.useEffect(()=>m(JSON.parse(u),{replace:n,state:r,relative:a}),[m,u,a,n,r]),null}function Le(e){$e(!1)}function Gx(e){let{basename:s="/",children:n=null,location:r,navigationType:a=ps.Pop,navigator:l,static:o=!1,future:i}=e;Rr()&&$e(!1);let c=s.replace(/^\/*/,"/"),m=x.useMemo(()=>({basename:c,navigator:l,static:o,future:Nr({v7_relativeSplatPath:!1},i)}),[c,i,l,o]);typeof r=="string"&&(r=Pn(r));let{pathname:g="/",search:u="",hash:f="",state:p=null,key:d="default"}=r,h=x.useMemo(()=>{let j=Dp(g,c);return j==null?null:{location:{pathname:j,search:u,hash:f,state:p,key:d},navigationType:a}},[c,g,u,f,p,d,a]);return h==null?null:x.createElement(Ar.Provider,{value:m},x.createElement(il.Provider,{children:n,value:h}))}function qo(e){let{children:s,location:n}=e;return Tx(Wo(s),n)}new Promise(()=>{});function Wo(e,s){s===void 0&&(s=[]);let n=[];return x.Children.forEach(e,(r,a)=>{if(!x.isValidElement(r))return;let l=[...s,a];if(r.type===x.Fragment){n.push.apply(n,Wo(r.props.children,l));return}r.type!==Le&&$e(!1),!r.props.index||!r.props.children||$e(!1);let o={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Wo(r.props.children,l)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Hx="6";try{window.__reactRouterVersion=Hx}catch{}const qx="startTransition",_d=zh[qx];function Wx(e){let{basename:s,children:n,future:r,window:a}=e,l=x.useRef();l.current==null&&(l.current=ex({window:a,v5Compat:!0}));let o=l.current,[i,c]=x.useState({action:o.action,location:o.location}),{v7_startTransition:m}=r||{},g=x.useCallback(u=>{m&&_d?_d(()=>c(u)):c(u)},[c,m]);return x.useLayoutEffect(()=>o.listen(g),[o,g]),x.useEffect(()=>$x(r),[r]),x.createElement(Gx,{basename:s,children:n,location:i.location,navigationType:i.action,navigator:o,future:r})}var Ud;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ud||(Ud={}));var Fd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Fd||(Fd={}));/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ve=(e,s)=>{const n=x.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:i="",children:c,...m},g)=>x.createElement("svg",{ref:g,...Vx,width:a,height:a,stroke:r,strokeWidth:o?Number(l)*24/Number(a):l,className:["lucide",`lucide-${Kx(e)}`,i].join(" "),...m},[...s.map(([u,f])=>x.createElement(u,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=ve("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=ve("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=ve("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=ve("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=ve("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=ve("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=ve("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=ve("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=ve("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=ve("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=ve("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=ve("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=ve("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=ve("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=ve("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=ve("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=ve("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=ve("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=ve("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=ve("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=ve("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function qp(e,s){return function(){return e.apply(s,arguments)}}const{toString:i0}=Object.prototype,{getPrototypeOf:Xi}=Object,{iterator:dl,toStringTag:Wp}=Symbol,ul=(e=>s=>{const n=i0.call(s);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ft=e=>(e=e.toLowerCase(),s=>ul(s)===e),ml=e=>s=>typeof s===e,{isArray:Mn}=Array,En=ml("undefined");function Pr(e){return e!==null&&!En(e)&&e.constructor!==null&&!En(e.constructor)&&pt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Vp=Ft("ArrayBuffer");function c0(e){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(e):s=e&&e.buffer&&Vp(e.buffer),s}const d0=ml("string"),pt=ml("function"),Kp=ml("number"),Mr=e=>e!==null&&typeof e=="object",u0=e=>e===!0||e===!1,ha=e=>{if(ul(e)!=="object")return!1;const s=Xi(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Wp in e)&&!(dl in e)},m0=e=>{if(!Mr(e)||Pr(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},p0=Ft("Date"),h0=Ft("File"),f0=Ft("Blob"),g0=Ft("FileList"),x0=e=>Mr(e)&&pt(e.pipe),y0=e=>{let s;return e&&(typeof FormData=="function"&&e instanceof FormData||pt(e.append)&&((s=ul(e))==="formdata"||s==="object"&&pt(e.toString)&&e.toString()==="[object FormData]"))},v0=Ft("URLSearchParams"),[b0,j0,N0,w0]=["ReadableStream","Request","Response","Headers"].map(Ft),C0=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ir(e,s,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,a;if(typeof e!="object"&&(e=[e]),Mn(e))for(r=0,a=e.length;r<a;r++)s.call(null,e[r],r,e);else{if(Pr(e))return;const l=n?Object.getOwnPropertyNames(e):Object.keys(e),o=l.length;let i;for(r=0;r<o;r++)i=l[r],s.call(null,e[i],i,e)}}function Qp(e,s){if(Pr(e))return null;s=s.toLowerCase();const n=Object.keys(e);let r=n.length,a;for(;r-- >0;)if(a=n[r],s===a.toLowerCase())return a;return null}const Us=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Jp=e=>!En(e)&&e!==Us;function Qo(){const{caseless:e,skipUndefined:s}=Jp(this)&&this||{},n={},r=(a,l)=>{const o=e&&Qp(n,l)||l;ha(n[o])&&ha(a)?n[o]=Qo(n[o],a):ha(a)?n[o]=Qo({},a):Mn(a)?n[o]=a.slice():(!s||!En(a))&&(n[o]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&Ir(arguments[a],r);return n}const S0=(e,s,n,{allOwnKeys:r}={})=>(Ir(s,(a,l)=>{n&&pt(a)?e[l]=qp(a,n):e[l]=a},{allOwnKeys:r}),e),k0=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),L0=(e,s,n,r)=>{e.prototype=Object.create(s.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:s.prototype}),n&&Object.assign(e.prototype,n)},E0=(e,s,n,r)=>{let a,l,o;const i={};if(s=s||{},e==null)return s;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)o=a[l],(!r||r(o,e,s))&&!i[o]&&(s[o]=e[o],i[o]=!0);e=n!==!1&&Xi(e)}while(e&&(!n||n(e,s))&&e!==Object.prototype);return s},T0=(e,s,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=s.length;const r=e.indexOf(s,n);return r!==-1&&r===n},A0=e=>{if(!e)return null;if(Mn(e))return e;let s=e.length;if(!Kp(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=e[s];return n},R0=(e=>s=>e&&s instanceof e)(typeof Uint8Array<"u"&&Xi(Uint8Array)),D0=(e,s)=>{const r=(e&&e[dl]).call(e);let a;for(;(a=r.next())&&!a.done;){const l=a.value;s.call(e,l[0],l[1])}},P0=(e,s)=>{let n;const r=[];for(;(n=e.exec(s))!==null;)r.push(n);return r},M0=Ft("HTMLFormElement"),I0=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),Hd=(({hasOwnProperty:e})=>(s,n)=>e.call(s,n))(Object.prototype),_0=Ft("RegExp"),Yp=(e,s)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Ir(n,(a,l)=>{let o;(o=s(a,l,e))!==!1&&(r[l]=o||a)}),Object.defineProperties(e,r)},U0=e=>{Yp(e,(s,n)=>{if(pt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(pt(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},F0=(e,s)=>{const n={},r=a=>{a.forEach(l=>{n[l]=!0})};return Mn(e)?r(e):r(String(e).split(s)),n},O0=()=>{},B0=(e,s)=>e!=null&&Number.isFinite(e=+e)?e:s;function z0(e){return!!(e&&pt(e.append)&&e[Wp]==="FormData"&&e[dl])}const $0=e=>{const s=new Array(10),n=(r,a)=>{if(Mr(r)){if(s.indexOf(r)>=0)return;if(Pr(r))return r;if(!("toJSON"in r)){s[a]=r;const l=Mn(r)?[]:{};return Ir(r,(o,i)=>{const c=n(o,a+1);!En(c)&&(l[i]=c)}),s[a]=void 0,l}}return r};return n(e,0)},G0=Ft("AsyncFunction"),H0=e=>e&&(Mr(e)||pt(e))&&pt(e.then)&&pt(e.catch),Xp=((e,s)=>e?setImmediate:s?((n,r)=>(Us.addEventListener("message",({source:a,data:l})=>{a===Us&&l===n&&r.length&&r.shift()()},!1),a=>{r.push(a),Us.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",pt(Us.postMessage)),q0=typeof queueMicrotask<"u"?queueMicrotask.bind(Us):typeof process<"u"&&process.nextTick||Xp,W0=e=>e!=null&&pt(e[dl]),_={isArray:Mn,isArrayBuffer:Vp,isBuffer:Pr,isFormData:y0,isArrayBufferView:c0,isString:d0,isNumber:Kp,isBoolean:u0,isObject:Mr,isPlainObject:ha,isEmptyObject:m0,isReadableStream:b0,isRequest:j0,isResponse:N0,isHeaders:w0,isUndefined:En,isDate:p0,isFile:h0,isBlob:f0,isRegExp:_0,isFunction:pt,isStream:x0,isURLSearchParams:v0,isTypedArray:R0,isFileList:g0,forEach:Ir,merge:Qo,extend:S0,trim:C0,stripBOM:k0,inherits:L0,toFlatObject:E0,kindOf:ul,kindOfTest:Ft,endsWith:T0,toArray:A0,forEachEntry:D0,matchAll:P0,isHTMLForm:M0,hasOwnProperty:Hd,hasOwnProp:Hd,reduceDescriptors:Yp,freezeMethods:U0,toObjectSet:F0,toCamelCase:I0,noop:O0,toFiniteNumber:B0,findKey:Qp,global:Us,isContextDefined:Jp,isSpecCompliantForm:z0,toJSONObject:$0,isAsyncFn:G0,isThenable:H0,setImmediate:Xp,asap:q0,isIterable:W0};function be(e,s,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}_.inherits(be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const Zp=be.prototype,eh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{eh[e]={value:e}});Object.defineProperties(be,eh);Object.defineProperty(Zp,"isAxiosError",{value:!0});be.from=(e,s,n,r,a,l)=>{const o=Object.create(Zp);_.toFlatObject(e,o,function(g){return g!==Error.prototype},m=>m!=="isAxiosError");const i=e&&e.message?e.message:"Error",c=s==null&&e?e.code:s;return be.call(o,i,c,n,r,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",l&&Object.assign(o,l),o};const V0=null;function Jo(e){return _.isPlainObject(e)||_.isArray(e)}function th(e){return _.endsWith(e,"[]")?e.slice(0,-2):e}function qd(e,s,n){return e?e.concat(s).map(function(a,l){return a=th(a),!n&&l?"["+a+"]":a}).join(n?".":""):s}function K0(e){return _.isArray(e)&&!e.some(Jo)}const Q0=_.toFlatObject(_,{},null,function(s){return/^is[A-Z]/.test(s)});function pl(e,s,n){if(!_.isObject(e))throw new TypeError("target must be an object");s=s||new FormData,n=_.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,j){return!_.isUndefined(j[h])});const r=n.metaTokens,a=n.visitor||g,l=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(s);if(!_.isFunction(a))throw new TypeError("visitor must be a function");function m(d){if(d===null)return"";if(_.isDate(d))return d.toISOString();if(_.isBoolean(d))return d.toString();if(!c&&_.isBlob(d))throw new be("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(d)||_.isTypedArray(d)?c&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function g(d,h,j){let b=d;if(d&&!j&&typeof d=="object"){if(_.endsWith(h,"{}"))h=r?h:h.slice(0,-2),d=JSON.stringify(d);else if(_.isArray(d)&&K0(d)||(_.isFileList(d)||_.endsWith(h,"[]"))&&(b=_.toArray(d)))return h=th(h),b.forEach(function(w,C){!(_.isUndefined(w)||w===null)&&s.append(o===!0?qd([h],C,l):o===null?h:h+"[]",m(w))}),!1}return Jo(d)?!0:(s.append(qd(j,h,l),m(d)),!1)}const u=[],f=Object.assign(Q0,{defaultVisitor:g,convertValue:m,isVisitable:Jo});function p(d,h){if(!_.isUndefined(d)){if(u.indexOf(d)!==-1)throw Error("Circular reference detected in "+h.join("."));u.push(d),_.forEach(d,function(b,y){(!(_.isUndefined(b)||b===null)&&a.call(s,b,_.isString(y)?y.trim():y,h,f))===!0&&p(b,h?h.concat(y):[y])}),u.pop()}}if(!_.isObject(e))throw new TypeError("data must be an object");return p(e),s}function Wd(e){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function Zi(e,s){this._pairs=[],e&&pl(e,this,s)}const sh=Zi.prototype;sh.append=function(s,n){this._pairs.push([s,n])};sh.toString=function(s){const n=s?function(r){return s.call(this,r,Wd)}:Wd;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function J0(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function nh(e,s,n){if(!s)return e;const r=n&&n.encode||J0;_.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let l;if(a?l=a(s,n):l=_.isURLSearchParams(s)?s.toString():new Zi(s,n).toString(r),l){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class Vd{constructor(){this.handlers=[]}use(s,n,r){return this.handlers.push({fulfilled:s,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){_.forEach(this.handlers,function(r){r!==null&&s(r)})}}const rh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Y0=typeof URLSearchParams<"u"?URLSearchParams:Zi,X0=typeof FormData<"u"?FormData:null,Z0=typeof Blob<"u"?Blob:null,ey={isBrowser:!0,classes:{URLSearchParams:Y0,FormData:X0,Blob:Z0},protocols:["http","https","file","blob","url","data"]},ec=typeof window<"u"&&typeof document<"u",Yo=typeof navigator=="object"&&navigator||void 0,ty=ec&&(!Yo||["ReactNative","NativeScript","NS"].indexOf(Yo.product)<0),sy=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ny=ec&&window.location.href||"http://localhost",ry=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ec,hasStandardBrowserEnv:ty,hasStandardBrowserWebWorkerEnv:sy,navigator:Yo,origin:ny},Symbol.toStringTag,{value:"Module"})),tt={...ry,...ey};function ay(e,s){return pl(e,new tt.classes.URLSearchParams,{visitor:function(n,r,a,l){return tt.isNode&&_.isBuffer(n)?(this.append(r,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...s})}function ly(e){return _.matchAll(/\w+|\[(\w*)]/g,e).map(s=>s[0]==="[]"?"":s[1]||s[0])}function oy(e){const s={},n=Object.keys(e);let r;const a=n.length;let l;for(r=0;r<a;r++)l=n[r],s[l]=e[l];return s}function ah(e){function s(n,r,a,l){let o=n[l++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),c=l>=n.length;return o=!o&&_.isArray(a)?a.length:o,c?(_.hasOwnProp(a,o)?a[o]=[a[o],r]:a[o]=r,!i):((!a[o]||!_.isObject(a[o]))&&(a[o]=[]),s(n,r,a[o],l)&&_.isArray(a[o])&&(a[o]=oy(a[o])),!i)}if(_.isFormData(e)&&_.isFunction(e.entries)){const n={};return _.forEachEntry(e,(r,a)=>{s(ly(r),a,n,0)}),n}return null}function iy(e,s,n){if(_.isString(e))try{return(s||JSON.parse)(e),_.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const _r={transitional:rh,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,l=_.isObject(s);if(l&&_.isHTMLForm(s)&&(s=new FormData(s)),_.isFormData(s))return a?JSON.stringify(ah(s)):s;if(_.isArrayBuffer(s)||_.isBuffer(s)||_.isStream(s)||_.isFile(s)||_.isBlob(s)||_.isReadableStream(s))return s;if(_.isArrayBufferView(s))return s.buffer;if(_.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let i;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return ay(s,this.formSerializer).toString();if((i=_.isFileList(s))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return pl(i?{"files[]":s}:s,c&&new c,this.formSerializer)}}return l||a?(n.setContentType("application/json",!1),iy(s)):s}],transformResponse:[function(s){const n=this.transitional||_r.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(_.isResponse(s)||_.isReadableStream(s))return s;if(s&&_.isString(s)&&(r&&!this.responseType||a)){const o=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(s,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?be.from(i,be.ERR_BAD_RESPONSE,this,null,this.response):i}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tt.classes.FormData,Blob:tt.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],e=>{_r.headers[e]={}});const cy=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dy=e=>{const s={};let n,r,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),n=o.substring(0,a).trim().toLowerCase(),r=o.substring(a+1).trim(),!(!n||s[n]&&cy[n])&&(n==="set-cookie"?s[n]?s[n].push(r):s[n]=[r]:s[n]=s[n]?s[n]+", "+r:r)}),s},Kd=Symbol("internals");function Hn(e){return e&&String(e).trim().toLowerCase()}function fa(e){return e===!1||e==null?e:_.isArray(e)?e.map(fa):String(e)}function uy(e){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)s[r[1]]=r[2];return s}const my=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Wl(e,s,n,r,a){if(_.isFunction(r))return r.call(this,s,n);if(a&&(s=n),!!_.isString(s)){if(_.isString(r))return s.indexOf(r)!==-1;if(_.isRegExp(r))return r.test(s)}}function py(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,r)=>n.toUpperCase()+r)}function hy(e,s){const n=_.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(a,l,o){return this[r].call(this,s,a,l,o)},configurable:!0})})}let ht=class{constructor(s){s&&this.set(s)}set(s,n,r){const a=this;function l(i,c,m){const g=Hn(c);if(!g)throw new Error("header name must be a non-empty string");const u=_.findKey(a,g);(!u||a[u]===void 0||m===!0||m===void 0&&a[u]!==!1)&&(a[u||c]=fa(i))}const o=(i,c)=>_.forEach(i,(m,g)=>l(m,g,c));if(_.isPlainObject(s)||s instanceof this.constructor)o(s,n);else if(_.isString(s)&&(s=s.trim())&&!my(s))o(dy(s),n);else if(_.isObject(s)&&_.isIterable(s)){let i={},c,m;for(const g of s){if(!_.isArray(g))throw TypeError("Object iterator must return a key-value pair");i[m=g[0]]=(c=i[m])?_.isArray(c)?[...c,g[1]]:[c,g[1]]:g[1]}o(i,n)}else s!=null&&l(n,s,r);return this}get(s,n){if(s=Hn(s),s){const r=_.findKey(this,s);if(r){const a=this[r];if(!n)return a;if(n===!0)return uy(a);if(_.isFunction(n))return n.call(this,a,r);if(_.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=Hn(s),s){const r=_.findKey(this,s);return!!(r&&this[r]!==void 0&&(!n||Wl(this,this[r],r,n)))}return!1}delete(s,n){const r=this;let a=!1;function l(o){if(o=Hn(o),o){const i=_.findKey(r,o);i&&(!n||Wl(r,r[i],i,n))&&(delete r[i],a=!0)}}return _.isArray(s)?s.forEach(l):l(s),a}clear(s){const n=Object.keys(this);let r=n.length,a=!1;for(;r--;){const l=n[r];(!s||Wl(this,this[l],l,s,!0))&&(delete this[l],a=!0)}return a}normalize(s){const n=this,r={};return _.forEach(this,(a,l)=>{const o=_.findKey(r,l);if(o){n[o]=fa(a),delete n[l];return}const i=s?py(l):String(l).trim();i!==l&&delete n[l],n[i]=fa(a),r[i]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return _.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=s&&_.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const r=new this(s);return n.forEach(a=>r.set(a)),r}static accessor(s){const r=(this[Kd]=this[Kd]={accessors:{}}).accessors,a=this.prototype;function l(o){const i=Hn(o);r[i]||(hy(a,o),r[i]=!0)}return _.isArray(s)?s.forEach(l):l(s),this}};ht.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(ht.prototype,({value:e},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>e,set(r){this[n]=r}}});_.freezeMethods(ht);function Vl(e,s){const n=this||_r,r=s||n,a=ht.from(r.headers);let l=r.data;return _.forEach(e,function(i){l=i.call(n,l,a.normalize(),s?s.status:void 0)}),a.normalize(),l}function lh(e){return!!(e&&e.__CANCEL__)}function In(e,s,n){be.call(this,e??"canceled",be.ERR_CANCELED,s,n),this.name="CanceledError"}_.inherits(In,be,{__CANCEL__:!0});function oh(e,s,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):s(new be("Request failed with status code "+n.status,[be.ERR_BAD_REQUEST,be.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function fy(e){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return s&&s[1]||""}function gy(e,s){e=e||10;const n=new Array(e),r=new Array(e);let a=0,l=0,o;return s=s!==void 0?s:1e3,function(c){const m=Date.now(),g=r[l];o||(o=m),n[a]=c,r[a]=m;let u=l,f=0;for(;u!==a;)f+=n[u++],u=u%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),m-o<s)return;const p=g&&m-g;return p?Math.round(f*1e3/p):void 0}}function xy(e,s){let n=0,r=1e3/s,a,l;const o=(m,g=Date.now())=>{n=g,a=null,l&&(clearTimeout(l),l=null),e(...m)};return[(...m)=>{const g=Date.now(),u=g-n;u>=r?o(m,g):(a=m,l||(l=setTimeout(()=>{l=null,o(a)},r-u)))},()=>a&&o(a)]}const Ha=(e,s,n=3)=>{let r=0;const a=gy(50,250);return xy(l=>{const o=l.loaded,i=l.lengthComputable?l.total:void 0,c=o-r,m=a(c),g=o<=i;r=o;const u={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:m||void 0,estimated:m&&i&&g?(i-o)/m:void 0,event:l,lengthComputable:i!=null,[s?"download":"upload"]:!0};e(u)},n)},Qd=(e,s)=>{const n=e!=null;return[r=>s[0]({lengthComputable:n,total:e,loaded:r}),s[1]]},Jd=e=>(...s)=>_.asap(()=>e(...s)),yy=tt.hasStandardBrowserEnv?((e,s)=>n=>(n=new URL(n,tt.origin),e.protocol===n.protocol&&e.host===n.host&&(s||e.port===n.port)))(new URL(tt.origin),tt.navigator&&/(msie|trident)/i.test(tt.navigator.userAgent)):()=>!0,vy=tt.hasStandardBrowserEnv?{write(e,s,n,r,a,l){const o=[e+"="+encodeURIComponent(s)];_.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),_.isString(r)&&o.push("path="+r),_.isString(a)&&o.push("domain="+a),l===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const s=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function by(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function jy(e,s){return s?e.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):e}function ih(e,s,n){let r=!by(s);return e&&(r||n==!1)?jy(e,s):s}const Yd=e=>e instanceof ht?{...e}:e;function Ks(e,s){s=s||{};const n={};function r(m,g,u,f){return _.isPlainObject(m)&&_.isPlainObject(g)?_.merge.call({caseless:f},m,g):_.isPlainObject(g)?_.merge({},g):_.isArray(g)?g.slice():g}function a(m,g,u,f){if(_.isUndefined(g)){if(!_.isUndefined(m))return r(void 0,m,u,f)}else return r(m,g,u,f)}function l(m,g){if(!_.isUndefined(g))return r(void 0,g)}function o(m,g){if(_.isUndefined(g)){if(!_.isUndefined(m))return r(void 0,m)}else return r(void 0,g)}function i(m,g,u){if(u in s)return r(m,g);if(u in e)return r(void 0,m)}const c={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(m,g,u)=>a(Yd(m),Yd(g),u,!0)};return _.forEach(Object.keys({...e,...s}),function(g){const u=c[g]||a,f=u(e[g],s[g],g);_.isUndefined(f)&&u!==i||(n[g]=f)}),n}const ch=e=>{const s=Ks({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:l,headers:o,auth:i}=s;if(s.headers=o=ht.from(o),s.url=nh(ih(s.baseURL,s.url,s.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),_.isFormData(n)){if(tt.hasStandardBrowserEnv||tt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(_.isFunction(n.getHeaders)){const c=n.getHeaders(),m=["content-type","content-length"];Object.entries(c).forEach(([g,u])=>{m.includes(g.toLowerCase())&&o.set(g,u)})}}if(tt.hasStandardBrowserEnv&&(r&&_.isFunction(r)&&(r=r(s)),r||r!==!1&&yy(s.url))){const c=a&&l&&vy.read(l);c&&o.set(a,c)}return s},Ny=typeof XMLHttpRequest<"u",wy=Ny&&function(e){return new Promise(function(n,r){const a=ch(e);let l=a.data;const o=ht.from(a.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:m}=a,g,u,f,p,d;function h(){p&&p(),d&&d(),a.cancelToken&&a.cancelToken.unsubscribe(g),a.signal&&a.signal.removeEventListener("abort",g)}let j=new XMLHttpRequest;j.open(a.method.toUpperCase(),a.url,!0),j.timeout=a.timeout;function b(){if(!j)return;const w=ht.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),D={data:!i||i==="text"||i==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:w,config:e,request:j};oh(function(O){n(O),h()},function(O){r(O),h()},D),j=null}"onloadend"in j?j.onloadend=b:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(b)},j.onabort=function(){j&&(r(new be("Request aborted",be.ECONNABORTED,e,j)),j=null)},j.onerror=function(C){const D=C&&C.message?C.message:"Network Error",$=new be(D,be.ERR_NETWORK,e,j);$.event=C||null,r($),j=null},j.ontimeout=function(){let C=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const D=a.transitional||rh;a.timeoutErrorMessage&&(C=a.timeoutErrorMessage),r(new be(C,D.clarifyTimeoutError?be.ETIMEDOUT:be.ECONNABORTED,e,j)),j=null},l===void 0&&o.setContentType(null),"setRequestHeader"in j&&_.forEach(o.toJSON(),function(C,D){j.setRequestHeader(D,C)}),_.isUndefined(a.withCredentials)||(j.withCredentials=!!a.withCredentials),i&&i!=="json"&&(j.responseType=a.responseType),m&&([f,d]=Ha(m,!0),j.addEventListener("progress",f)),c&&j.upload&&([u,p]=Ha(c),j.upload.addEventListener("progress",u),j.upload.addEventListener("loadend",p)),(a.cancelToken||a.signal)&&(g=w=>{j&&(r(!w||w.type?new In(null,e,j):w),j.abort(),j=null)},a.cancelToken&&a.cancelToken.subscribe(g),a.signal&&(a.signal.aborted?g():a.signal.addEventListener("abort",g)));const y=fy(a.url);if(y&&tt.protocols.indexOf(y)===-1){r(new be("Unsupported protocol "+y+":",be.ERR_BAD_REQUEST,e));return}j.send(l||null)})},Cy=(e,s)=>{const{length:n}=e=e?e.filter(Boolean):[];if(s||n){let r=new AbortController,a;const l=function(m){if(!a){a=!0,i();const g=m instanceof Error?m:this.reason;r.abort(g instanceof be?g:new In(g instanceof Error?g.message:g))}};let o=s&&setTimeout(()=>{o=null,l(new be(`timeout ${s} of ms exceeded`,be.ETIMEDOUT))},s);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),e=null)};e.forEach(m=>m.addEventListener("abort",l));const{signal:c}=r;return c.unsubscribe=()=>_.asap(i),c}},Sy=function*(e,s){let n=e.byteLength;if(n<s){yield e;return}let r=0,a;for(;r<n;)a=r+s,yield e.slice(r,a),r=a},ky=async function*(e,s){for await(const n of Ly(e))yield*Sy(n,s)},Ly=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const s=e.getReader();try{for(;;){const{done:n,value:r}=await s.read();if(n)break;yield r}}finally{await s.cancel()}},Xd=(e,s,n,r)=>{const a=ky(e,s);let l=0,o,i=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:m,value:g}=await a.next();if(m){i(),c.close();return}let u=g.byteLength;if(n){let f=l+=u;n(f)}c.enqueue(new Uint8Array(g))}catch(m){throw i(m),m}},cancel(c){return i(c),a.return()}},{highWaterMark:2})},Zd=64*1024,{isFunction:ea}=_,Ey=(({Request:e,Response:s})=>({Request:e,Response:s}))(_.global),{ReadableStream:eu,TextEncoder:tu}=_.global,su=(e,...s)=>{try{return!!e(...s)}catch{return!1}},Ty=e=>{e=_.merge.call({skipUndefined:!0},Ey,e);const{fetch:s,Request:n,Response:r}=e,a=s?ea(s):typeof fetch=="function",l=ea(n),o=ea(r);if(!a)return!1;const i=a&&ea(eu),c=a&&(typeof tu=="function"?(d=>h=>d.encode(h))(new tu):async d=>new Uint8Array(await new n(d).arrayBuffer())),m=l&&i&&su(()=>{let d=!1;const h=new n(tt.origin,{body:new eu,method:"POST",get duplex(){return d=!0,"half"}}).headers.has("Content-Type");return d&&!h}),g=o&&i&&su(()=>_.isReadableStream(new r("").body)),u={stream:g&&(d=>d.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(d=>{!u[d]&&(u[d]=(h,j)=>{let b=h&&h[d];if(b)return b.call(h);throw new be(`Response type '${d}' is not supported`,be.ERR_NOT_SUPPORT,j)})});const f=async d=>{if(d==null)return 0;if(_.isBlob(d))return d.size;if(_.isSpecCompliantForm(d))return(await new n(tt.origin,{method:"POST",body:d}).arrayBuffer()).byteLength;if(_.isArrayBufferView(d)||_.isArrayBuffer(d))return d.byteLength;if(_.isURLSearchParams(d)&&(d=d+""),_.isString(d))return(await c(d)).byteLength},p=async(d,h)=>{const j=_.toFiniteNumber(d.getContentLength());return j??f(h)};return async d=>{let{url:h,method:j,data:b,signal:y,cancelToken:w,timeout:C,onDownloadProgress:D,onUploadProgress:$,responseType:O,headers:B,withCredentials:U="same-origin",fetchOptions:z}=ch(d),ce=s||fetch;O=O?(O+"").toLowerCase():"text";let de=Cy([y,w&&w.toAbortSignal()],C),oe=null;const S=de&&de.unsubscribe&&(()=>{de.unsubscribe()});let Q;try{if($&&m&&j!=="get"&&j!=="head"&&(Q=await p(B,b))!==0){let R=new n(h,{method:"POST",body:b,duplex:"half"}),q;if(_.isFormData(b)&&(q=R.headers.get("content-type"))&&B.setContentType(q),R.body){const[k,G]=Qd(Q,Ha(Jd($)));b=Xd(R.body,Zd,k,G)}}_.isString(U)||(U=U?"include":"omit");const W=l&&"credentials"in n.prototype,M={...z,signal:de,method:j.toUpperCase(),headers:B.normalize().toJSON(),body:b,duplex:"half",credentials:W?U:void 0};oe=l&&new n(h,M);let T=await(l?ce(oe,z):ce(h,M));const A=g&&(O==="stream"||O==="response");if(g&&(D||A&&S)){const R={};["status","statusText","headers"].forEach(Y=>{R[Y]=T[Y]});const q=_.toFiniteNumber(T.headers.get("content-length")),[k,G]=D&&Qd(q,Ha(Jd(D),!0))||[];T=new r(Xd(T.body,Zd,k,()=>{G&&G(),S&&S()}),R)}O=O||"text";let L=await u[_.findKey(u,O)||"text"](T,d);return!A&&S&&S(),await new Promise((R,q)=>{oh(R,q,{data:L,headers:ht.from(T.headers),status:T.status,statusText:T.statusText,config:d,request:oe})})}catch(W){throw S&&S(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new be("Network Error",be.ERR_NETWORK,d,oe),{cause:W.cause||W}):be.from(W,W&&W.code,d,oe)}}},Ay=new Map,dh=e=>{let s=e?e.env:{};const{fetch:n,Request:r,Response:a}=s,l=[r,a,n];let o=l.length,i=o,c,m,g=Ay;for(;i--;)c=l[i],m=g.get(c),m===void 0&&g.set(c,m=i?new Map:Ty(s)),g=m;return m};dh();const Xo={http:V0,xhr:wy,fetch:{get:dh}};_.forEach(Xo,(e,s)=>{if(e){try{Object.defineProperty(e,"name",{value:s})}catch{}Object.defineProperty(e,"adapterName",{value:s})}});const nu=e=>`- ${e}`,Ry=e=>_.isFunction(e)||e===null||e===!1,uh={getAdapter:(e,s)=>{e=_.isArray(e)?e:[e];const{length:n}=e;let r,a;const l={};for(let o=0;o<n;o++){r=e[o];let i;if(a=r,!Ry(r)&&(a=Xo[(i=String(r)).toLowerCase()],a===void 0))throw new be(`Unknown adapter '${i}'`);if(a&&(_.isFunction(a)||(a=a.get(s))))break;l[i||"#"+o]=a}if(!a){const o=Object.entries(l).map(([c,m])=>`adapter ${c} `+(m===!1?"is not supported by the environment":"is not available in the build"));let i=n?o.length>1?`since :
`+o.map(nu).join(`
`):" "+nu(o[0]):"as no adapter specified";throw new be("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return a},adapters:Xo};function Kl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new In(null,e)}function ru(e){return Kl(e),e.headers=ht.from(e.headers),e.data=Vl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),uh.getAdapter(e.adapter||_r.adapter,e)(e).then(function(r){return Kl(e),r.data=Vl.call(e,e.transformResponse,r),r.headers=ht.from(r.headers),r},function(r){return lh(r)||(Kl(e),r&&r.response&&(r.response.data=Vl.call(e,e.transformResponse,r.response),r.response.headers=ht.from(r.response.headers))),Promise.reject(r)})}const mh="1.12.2",hl={};["object","boolean","number","function","string","symbol"].forEach((e,s)=>{hl[e]=function(r){return typeof r===e||"a"+(s<1?"n ":" ")+e}});const au={};hl.transitional=function(s,n,r){function a(l,o){return"[Axios v"+mh+"] Transitional option '"+l+"'"+o+(r?". "+r:"")}return(l,o,i)=>{if(s===!1)throw new be(a(o," has been removed"+(n?" in "+n:"")),be.ERR_DEPRECATED);return n&&!au[o]&&(au[o]=!0,console.warn(a(o," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(l,o,i):!0}};hl.spelling=function(s){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function Dy(e,s,n){if(typeof e!="object")throw new be("options must be an object",be.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const l=r[a],o=s[l];if(o){const i=e[l],c=i===void 0||o(i,l,e);if(c!==!0)throw new be("option "+l+" must be "+c,be.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new be("Unknown option "+l,be.ERR_BAD_OPTION)}}const ga={assertOptions:Dy,validators:hl},Bt=ga.validators;let zs=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Vd,response:new Vd}}async request(s,n){try{return await this._request(s,n)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=Ks(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:l}=n;r!==void 0&&ga.assertOptions(r,{silentJSONParsing:Bt.transitional(Bt.boolean),forcedJSONParsing:Bt.transitional(Bt.boolean),clarifyTimeoutError:Bt.transitional(Bt.boolean)},!1),a!=null&&(_.isFunction(a)?n.paramsSerializer={serialize:a}:ga.assertOptions(a,{encode:Bt.function,serialize:Bt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ga.assertOptions(n,{baseUrl:Bt.spelling("baseURL"),withXsrfToken:Bt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=l&&_.merge(l.common,l[n.method]);l&&_.forEach(["delete","get","head","post","put","patch","common"],d=>{delete l[d]}),n.headers=ht.concat(o,l);const i=[];let c=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(n)===!1||(c=c&&h.synchronous,i.unshift(h.fulfilled,h.rejected))});const m=[];this.interceptors.response.forEach(function(h){m.push(h.fulfilled,h.rejected)});let g,u=0,f;if(!c){const d=[ru.bind(this),void 0];for(d.unshift(...i),d.push(...m),f=d.length,g=Promise.resolve(n);u<f;)g=g.then(d[u++],d[u++]);return g}f=i.length;let p=n;for(;u<f;){const d=i[u++],h=i[u++];try{p=d(p)}catch(j){h.call(this,j);break}}try{g=ru.call(this,p)}catch(d){return Promise.reject(d)}for(u=0,f=m.length;u<f;)g=g.then(m[u++],m[u++]);return g}getUri(s){s=Ks(this.defaults,s);const n=ih(s.baseURL,s.url,s.allowAbsoluteUrls);return nh(n,s.params,s.paramsSerializer)}};_.forEach(["delete","get","head","options"],function(s){zs.prototype[s]=function(n,r){return this.request(Ks(r||{},{method:s,url:n,data:(r||{}).data}))}});_.forEach(["post","put","patch"],function(s){function n(r){return function(l,o,i){return this.request(Ks(i||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}zs.prototype[s]=n(),zs.prototype[s+"Form"]=n(!0)});let Py=class ph{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const r=this;this.promise.then(a=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](a);r._listeners=null}),this.promise.then=a=>{let l;const o=new Promise(i=>{r.subscribe(i),l=i}).then(a);return o.cancel=function(){r.unsubscribe(l)},o},s(function(l,o,i){r.reason||(r.reason=new In(l,o,i),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=r=>{s.abort(r)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new ph(function(a){s=a}),cancel:s}}};function My(e){return function(n){return e.apply(null,n)}}function Iy(e){return _.isObject(e)&&e.isAxiosError===!0}const Zo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Zo).forEach(([e,s])=>{Zo[s]=e});function hh(e){const s=new zs(e),n=qp(zs.prototype.request,s);return _.extend(n,zs.prototype,s,{allOwnKeys:!0}),_.extend(n,s,null,{allOwnKeys:!0}),n.create=function(a){return hh(Ks(e,a))},n}const Be=hh(_r);Be.Axios=zs;Be.CanceledError=In;Be.CancelToken=Py;Be.isCancel=lh;Be.VERSION=mh;Be.toFormData=pl;Be.AxiosError=be;Be.Cancel=Be.CanceledError;Be.all=function(s){return Promise.all(s)};Be.spread=My;Be.isAxiosError=Iy;Be.mergeConfig=Ks;Be.AxiosHeaders=ht;Be.formToJSON=e=>ah(_.isHTMLForm(e)?new FormData(e):e);Be.getAdapter=uh.getAdapter;Be.HttpStatusCode=Zo;Be.default=Be;const{Axios:bv,AxiosError:jv,CanceledError:Nv,isCancel:wv,CancelToken:Cv,VERSION:Sv,all:kv,Cancel:Lv,isAxiosError:Ev,spread:Tv,toFormData:Av,AxiosHeaders:Rv,HttpStatusCode:Dv,formToJSON:Pv,getAdapter:Mv,mergeConfig:Iv}=Be,fh="production",_y="https://backend-i8skd8g0y-chuck-ferrells-projects.vercel.app";let Tn=_y;try{typeof window<"u"&&window.location.hostname==="localhost"&&Tn!==""&&(console.warn("TCC_WARN: Localhost detected but API_BASE_URL is not empty. For safety using empty string for proxy"),Tn="")}catch{}console.log("TCC_DEBUG: API_BASE_URL is set to:",Tn,"ENV:",fh);const K=Be.create({baseURL:Tn,withCredentials:!0,headers:{"Content-Type":"application/json"}});K.interceptors.request.use(e=>{var n;const s=localStorage.getItem("token");console.log("TCC_DEBUG: API request interceptor - token present:",!!s),console.log("TCC_DEBUG: API request interceptor - token value:",s?s.substring(0,20)+"...":"none"),s&&(e.headers.Authorization=`Bearer ${s}`,console.log("TCC_DEBUG: API request interceptor - Authorization header set:",e.headers.Authorization?"YES":"NO"));try{const r=new URL(Tn).origin,a=typeof window<"u"?window.location.origin:r,l=r===a;!(e.url||"").toString().startsWith("/api/auth/")&&l?e.headers["X-TCC-Env"]=fh:e.headers["X-TCC-Env"]&&delete e.headers["X-TCC-Env"]}catch{}try{const r=(e.baseURL||"")+(e.url||"");(r.includes("/api/tcc/agencies")||r.includes("/api/tcc/analytics")||r.includes("/api/dropdown-options"))&&console.log("TCC_DEBUG: API request ",(n=e.method)==null?void 0:n.toUpperCase(),r,"params:",e.params,"data:",e.data)}catch{}return e});K.interceptors.response.use(e=>{var s,n;try{const r=((s=e.config)==null?void 0:s.baseURL)+(((n=e.config)==null?void 0:n.url)||"");(r!=null&&r.includes("/api/tcc/agencies")||r.includes("/api/tcc/analytics")||r.includes("/api/dropdown-options"))&&console.log("TCC_DEBUG: API response ",e.status,r,"data:",e.data)}catch{}return e},e=>{var s,n,r,a,l,o,i;try{const c=(((n=(s=e.response)==null?void 0:s.config)==null?void 0:n.baseURL)||"")+(((a=(r=e.response)==null?void 0:r.config)==null?void 0:a.url)||"");(c.includes("/api/tcc/agencies")||c.includes("/api/tcc/analytics")||c.includes("/api/dropdown-options"))&&console.log("TCC_DEBUG: API error ",(l=e.response)==null?void 0:l.status,c,"data:",(o=e.response)==null?void 0:o.data)}catch{}return((i=e.response)==null?void 0:i.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});const fl={login:e=>(console.log("TCC_DEBUG: API login called with URL:",Tn+"/api/auth/login"),console.log("TCC_DEBUG: API login called with credentials:",e),K.post("/api/auth/login",e)),logout:()=>K.post("/api/auth/logout"),verify:()=>K.get("/api/auth/verify"),register:e=>K.post("/api/auth/register",e),healthcareRegister:e=>K.post("/api/auth/healthcare/register",e),emsRegister:e=>K.post("/api/auth/ems/register",e),healthcareLogin:e=>K.post("/api/auth/healthcare/login",e),emsLogin:e=>K.post("/api/auth/ems/login",e),getUsers:()=>K.get("/api/auth/users")},Gt={getAll:e=>K.get("/api/trips",{params:e}),create:e=>K.post("/api/trips",e),createEnhanced:e=>K.post("/api/trips/enhanced",e),update:(e,s)=>K.put(`/api/trips/${e}`,s),delete:e=>K.delete(`/api/trips/${e}`),updateStatus:(e,s)=>K.put(`/api/trips/${e}/status`,s),getOptions:{diagnosis:()=>K.get("/api/trips/options/diagnosis"),mobility:()=>K.get("/api/trips/options/mobility"),transportLevel:()=>K.get("/api/trips/options/transport-level"),urgency:()=>K.get("/api/trips/options/urgency"),insurance:()=>K.get("/api/trips/options/insurance")},getAgenciesForHospital:(e,s)=>K.get(`/api/trips/agencies/${encodeURIComponent(e)}`,{params:{radius:s}})},gh={getOnDuty:()=>K.get("/api/units/on-duty"),getAll:()=>K.get("/api/units"),getById:e=>K.get(`/api/units/${e}`)},xa={getAll:e=>K.get("/api/tcc/agencies",{params:e}),create:e=>K.post("/api/tcc/agencies",e),update:(e,s)=>K.put(`/api/tcc/agencies/${e}`,s),delete:e=>K.delete(`/api/tcc/agencies/${e}`)},yt={getCategories:()=>K.get("/api/dropdown-options"),getByCategory:e=>K.get(`/api/dropdown-options/${encodeURIComponent(e)}`),getDefault:e=>K.get(`/api/dropdown-options/${encodeURIComponent(e)}/default`),setDefault:(e,s)=>K.post(`/api/dropdown-options/${encodeURIComponent(e)}/default`,{optionId:s}),create:e=>K.post("/api/dropdown-options",e),update:(e,s)=>K.put(`/api/dropdown-options/${e}`,s),delete:e=>K.delete(`/api/dropdown-options/${e}`)},ei=Object.freeze(Object.defineProperty({__proto__:null,agenciesAPI:xa,authAPI:fl,default:K,dropdownOptionsAPI:yt,tripsAPI:Gt,unitsAPI:gh},Symbol.toStringTag,{value:"Module"})),Uy=({onLogin:e,onBack:s})=>{const[n,r]=x.useState({email:"",password:""}),[a,l]=x.useState(!1),[o,i]=x.useState(""),c=async g=>{var u,f,p,d;g.preventDefault(),l(!0),i("");try{localStorage.removeItem("token"),localStorage.removeItem("user"),console.log("TCC_DEBUG: Attempting login with:",n);const h=await fl.login(n);console.log("TCC_DEBUG: Login response:",h.data),h.data.success?(console.log("TCC_DEBUG: Login successful, calling onLogin"),e(h.data.user,h.data.token)):(console.log("TCC_DEBUG: Login failed:",h.data.error),i(h.data.error||"Login failed"))}catch(h){console.log("TCC_DEBUG: Login error:",h),console.log("TCC_DEBUG: Error response:",h.response),console.log("TCC_DEBUG: Error status:",(u=h.response)==null?void 0:u.status),console.log("TCC_DEBUG: Error data:",(f=h.response)==null?void 0:f.data),i(((d=(p=h.response)==null?void 0:p.data)==null?void 0:d.error)||"Login failed")}finally{l(!1)}},m=g=>{r(u=>({...u,[g.target.name]:g.target.value}))};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{children:[t.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-primary-100",children:t.jsx("svg",{className:"h-8 w-8 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),t.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"TCC Admin Login"}),t.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Transport Control Center"})]}),t.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[t.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),t.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:n.email,onChange:m})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),t.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n.password,onChange:m})]})]}),o&&t.jsx("div",{className:"rounded-md bg-red-50 p-4",children:t.jsx("div",{className:"text-sm text-red-700",children:o})}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Signing in...":"Sign in"})}),s&&t.jsx("div",{className:"text-center",children:t.jsxs("button",{type:"button",onClick:s,className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900",children:[t.jsx(Ss,{className:"h-4 w-4 mr-1"}),"Back to Login Options"]})})]})]})})},Fy=({user:e,onLogout:s,onClearSession:n})=>{const r=As(),a=Dr(),[l,o]=x.useState(null),[i,c]=x.useState(!1);console.log("TCC_DEBUG: TopMenuBar component rendering"),console.log("TCC_DEBUG: TopMenuBar user:",e);const m=[{label:"Actions",icon:Qx,hasDropdown:!0,items:[{label:"Trip Management",path:"/dashboard/operations/trips"},{label:"Route Optimization",path:"/dashboard/operations/route-optimization"}]},{label:"Healthcare",icon:at,hasDropdown:!0,items:[{label:"Facilities List",path:"/dashboard/healthcare/facilities"},{label:"Add Facility",path:"/healthcare-register"}]},{label:"EMS",icon:We,hasDropdown:!0,items:[{label:"Agencies List",path:"/dashboard/ems/agencies"},{label:"Add Agency",path:"/ems-register"},{label:"Units Management",path:"/dashboard/ems/units"}]},{label:"Trip Calculator",icon:Gp,hasDropdown:!1,path:"/dashboard/operations/analytics"}],g=d=>{console.log("TCC_DEBUG: TopMenuBar handleNavigation called with path:",d),d==="/healthcare-register"||d==="/ems-register"?(console.log("TCC_DEBUG: TopMenuBar navigating to external page:",d),n?(console.log("TCC_DEBUG: TopMenuBar clearing session and navigating immediately"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href=d):(console.log("TCC_DEBUG: TopMenuBar onClearSession not available, using direct navigation"),window.location.href=d)):(console.log("TCC_DEBUG: TopMenuBar navigating internally to:",d),r(d)),o(null),c(!1)},u=d=>{o(l===d?null:d)},f=d=>a.pathname.startsWith(d),p=()=>{const d=a.pathname;return d==="/"||d==="/dashboard"||d.startsWith("/dashboard/operations/trips")?"Actions":d.startsWith("/dashboard/healthcare")?"Healthcare":d.startsWith("/dashboard/ems")?"EMS":d.startsWith("/dashboard/operations")?"Trip Calculator":null};return t.jsxs("div",{className:"bg-white shadow-sm border-b border-gray-200",children:[t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[t.jsx("div",{className:"h-8 w-8 bg-blue-600 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold text-lg",children:"T"})}),t.jsx("span",{className:"ml-3 text-xl font-semibold text-gray-900",children:"Transport Command"})]}),t.jsx("button",{onClick:()=>g("/"),className:"ml-6 p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Home - Quick Actions",children:t.jsx(n0,{className:"h-5 w-5 text-gray-600 hover:text-blue-600"})})]}),t.jsx("nav",{className:"hidden md:flex space-x-8",children:m.map(d=>{var h;return t.jsx("div",{className:"relative",children:d.hasDropdown?t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>u(d.label),className:`flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors ${p()===d.label?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"}`,children:[t.jsx(d.icon,{className:"h-4 w-4"}),t.jsx("span",{children:d.label}),t.jsx(Vo,{className:`h-4 w-4 transition-transform ${l===d.label?"rotate-180":""}`})]}),l===d.label&&t.jsx("div",{className:"absolute top-full left-0 mt-1 w-56 bg-white rounded-md shadow-lg border border-gray-200 py-1 z-50",children:(h=d.items)==null?void 0:h.map(j=>t.jsx("button",{type:"button",onClick:b=>{console.log(`TCC_DEBUG: TopMenuBar dropdown item clicked: ${j.label} -> ${j.path}`),console.log("TCC_DEBUG: TopMenuBar current location:",a.pathname),b.preventDefault(),b.stopPropagation(),g(j.path)},className:`w-full text-left px-4 py-2 text-sm transition-colors ${f(j.path)?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"}`,children:j.label},j.path))})]}):t.jsxs("button",{onClick:()=>g(d.path),className:`flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors ${f(d.path)?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"}`,children:[t.jsx(d.icon,{className:"h-4 w-4"}),t.jsx("span",{children:d.label})]})},d.label)})}),t.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:t.jsx(wr,{className:"h-4 w-4 text-gray-600"})}),t.jsxs("div",{className:"text-sm",children:[t.jsx("div",{className:"font-medium text-gray-900",children:e.name}),t.jsx("div",{className:"text-gray-500",children:e.userType})]})]}),t.jsxs("button",{onClick:s,className:"flex items-center space-x-1 px-3 py-2 text-sm font-medium text-gray-700 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[t.jsx(Ga,{className:"h-4 w-4"}),t.jsx("span",{children:"Logout"})]})]}),t.jsx("div",{className:"md:hidden",children:t.jsx("button",{onClick:()=>c(!i),className:"p-2 rounded-md text-gray-700 hover:text-blue-600 hover:bg-gray-50",children:i?t.jsx(Zt,{className:"h-6 w-6"}):t.jsx(a0,{className:"h-6 w-6"})})})]})}),i&&t.jsx("div",{className:"md:hidden border-t border-gray-200 bg-white",children:t.jsxs("div",{className:"px-4 py-3 space-y-1",children:[m.map(d=>{var h;return t.jsx("div",{children:d.hasDropdown?t.jsxs("div",{children:[t.jsxs("button",{onClick:()=>u(d.label),className:`w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-md transition-colors ${p()===d.label?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"}`,children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(d.icon,{className:"h-4 w-4"}),t.jsx("span",{children:d.label})]}),t.jsx(Vo,{className:`h-4 w-4 transition-transform ${l===d.label?"rotate-180":""}`})]}),l===d.label&&t.jsx("div",{className:"pl-8 space-y-1",children:(h=d.items)==null?void 0:h.map(j=>t.jsx("button",{onClick:()=>g(j.path),className:`w-full text-left px-3 py-2 text-sm rounded-md transition-colors ${f(j.path)?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"}`,children:j.label},j.path))})]}):t.jsxs("button",{onClick:()=>g(d.path),className:`w-full flex items-center space-x-2 px-3 py-2 text-sm font-medium rounded-md transition-colors ${f(d.path)?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"}`,children:[t.jsx(d.icon,{className:"h-4 w-4"}),t.jsx("span",{children:d.label})]})},d.label)}),t.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[t.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2",children:[t.jsx("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:t.jsx(wr,{className:"h-4 w-4 text-gray-600"})}),t.jsxs("div",{className:"text-sm",children:[t.jsx("div",{className:"font-medium text-gray-900",children:e.name}),t.jsx("div",{className:"text-gray-500",children:e.userType})]})]}),t.jsxs("button",{onClick:s,className:"w-full flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[t.jsx(Ga,{className:"h-4 w-4"}),t.jsx("span",{children:"Logout"})]})]})]})}),l&&t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(null)})]})},Oy=({user:e,onClearSession:s})=>{const n=As(),r=[{title:"Create Trip",description:"Create a new transport request",icon:rs,onClick:()=>n("/dashboard/operations/trips/create"),color:"bg-blue-600 hover:bg-blue-700",textColor:"text-white"},{title:"Add Healthcare Facility",description:"Register a new healthcare facility",icon:at,onClick:()=>{console.log("TCC_DEBUG: Add Healthcare Facility button clicked"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/healthcare-register"},color:"bg-green-600 hover:bg-green-700",textColor:"text-white"},{title:"Add EMS Agency",description:"Register a new EMS agency",icon:We,onClick:()=>{console.log("TCC_DEBUG: Add EMS Agency button clicked"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/ems-register"},color:"bg-red-600 hover:bg-red-700",textColor:"text-white"},{title:"Existing Trip Management",description:"Manage and optimize existing trips",icon:De,onClick:()=>n("/dashboard/operations/trips"),color:"bg-purple-600 hover:bg-purple-700",textColor:"text-white"}],a=[{title:"Active Trips",value:"15",change:"+12%",changeType:"positive",icon:s0,color:"bg-blue-50 text-blue-600"},{title:"Healthcare Facilities",value:"9",change:"+1",changeType:"positive",icon:at,color:"bg-green-50 text-green-600"},{title:"EMS Agencies",value:"3",change:"0",changeType:"neutral",icon:We,color:"bg-red-50 text-red-600"},{title:"Active Units",value:"12",change:"+2",changeType:"positive",icon:o0,color:"bg-purple-50 text-purple-600"}];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Quick Actions"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:r.map((l,o)=>t.jsx("button",{type:"button",onClick:l.onClick,className:`${l.color} ${l.textColor} p-4 rounded-lg transition-colors text-left group`,children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(l.icon,{className:"h-6 w-6"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:l.title}),t.jsx("div",{className:"text-sm opacity-90",children:l.description})]})]})},o))})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map((l,o)=>t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:l.title}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:l.value}),t.jsxs("div",{className:"flex items-center mt-2",children:[t.jsx("span",{className:`text-sm font-medium ${l.changeType==="positive"?"text-green-600":l.changeType==="negative"?"text-red-600":"text-gray-600"}`,children:l.change}),t.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"from last month"})]})]}),t.jsx("div",{className:`p-3 rounded-lg ${l.color}`,children:t.jsx(l.icon,{className:"h-6 w-6"})})]})},o))}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Recent Activity"}),t.jsx(zp,{className:"h-5 w-5 text-gray-400"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"New trip created"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Patient ID: PY2GHKJE8  Penn Highlands DuBois"})]}),t.jsx("span",{className:"text-sm text-gray-500",children:"2 min ago"})]}),t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"h-2 w-2 bg-green-600 rounded-full"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Pickup location added"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Peds ICU  Penn Highlands DuBois"})]}),t.jsx("span",{className:"text-sm text-gray-500",children:"1 hour ago"})]}),t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"h-2 w-2 bg-purple-600 rounded-full"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Route optimized"}),t.jsx("p",{className:"text-sm text-gray-500",children:"3 trips  15% time reduction"})]}),t.jsx("span",{className:"text-sm text-gray-500",children:"3 hours ago"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"System Status"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[t.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Backend API"}),t.jsx("p",{className:"text-sm text-gray-500",children:"All systems operational"})]})]}),t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[t.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Database"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Connected & responsive"})]})]}),t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[t.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:"External Services"}),t.jsx("p",{className:"text-sm text-gray-500",children:"All integrations healthy"})]})]})]})]})]})},By=({trip:e,user:s})=>{const n=m=>new Date(m).toLocaleString(),r=m=>{console.log("Accept trip:",m.id)},a=m=>{console.log("Decline trip:",m.id)},l=m=>{console.log("Edit trip:",m.id)},o=m=>{window.confirm(`Are you sure you want to delete trip ${m.tripNumber}?`)&&console.log("Delete trip:",m.id)},i=m=>{switch(m){case"COMPLETED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";case"IN_PROGRESS":return"bg-blue-100 text-blue-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"ACCEPTED":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},c=m=>{switch(m){case"CRITICAL":return"EMERGENT";case"HIGH":return"URGENT";case"MEDIUM":case"LOW":return"ROUTINE";default:return m}};return t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["Patient ",e.patientId," - ",e.transportLevel," - ",n(e.scheduledTime)]}),t.jsxs("p",{className:"text-base text-gray-600",children:[e.fromLocation,"  ",e.toLocation]}),e.pickupLocation&&t.jsxs("p",{className:"text-xs text-blue-600",children:["Pickup: ",e.pickupLocation.name,e.pickupLocation.floor&&` (Floor ${e.pickupLocation.floor})`,e.pickupLocation.room&&` - Room ${e.pickupLocation.room}`,e.pickupLocation.contactPhone&&`  ${e.pickupLocation.contactPhone}`]}),t.jsxs("div",{className:"mt-2 flex items-center space-x-6 text-sm text-gray-500",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Priority:"})," ",c(e.priority)]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Distance:"})," ",e.distanceMiles?`${e.distanceMiles.toFixed(1)} miles`:"Calculating..."]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Time:"})," ",e.estimatedTripTimeMinutes?`${Math.round(e.estimatedTripTimeMinutes)} min`:"Calculating..."]})]})]})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${i(e.status)}`,children:e.status.replace("_"," ")}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>r(e),className:"bg-green-600 text-white px-3 py-1 rounded text-sm font-medium hover:bg-green-700 transition-colors",children:"Accept"}),t.jsx("button",{onClick:()=>a(e),className:"bg-red-600 text-white px-3 py-1 rounded text-sm font-medium hover:bg-red-700 transition-colors",children:"Decline"}),t.jsx("button",{onClick:()=>l(e),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm font-medium hover:bg-blue-700 transition-colors",children:"Edit"}),t.jsx("button",{onClick:()=>o(e),className:"bg-gray-600 text-white px-3 py-1 rounded text-sm font-medium hover:bg-gray-700 transition-colors",children:"Delete"})]})]})]})},lu=({user:e})=>{const s=As(),[n,r]=x.useState([]),[a,l]=x.useState([]),[o,i]=x.useState(!0),[c,m]=x.useState(""),[g,u]=x.useState(new Date),[f,p]=x.useState(""),[d,h]=x.useState("ALL"),[j,b]=x.useState("ALL"),[y,w]=x.useState("ALL"),[C,D]=x.useState("ALL"),[$,O]=x.useState("ALL"),[B,U]=x.useState(!1),[z,ce]=x.useState(null),[de,oe]=x.useState(!1),[S,Q]=x.useState("createdAt"),[W,M]=x.useState("desc"),T=async()=>{var k,G;try{i(!0);const Y=await Gt.getAll();Y.data.success?(r(Y.data.data),l(Y.data.data),u(new Date)):m(Y.data.error||"Failed to fetch trips")}catch(Y){m(((G=(k=Y.response)==null?void 0:k.data)==null?void 0:G.error)||"Failed to fetch trips")}finally{i(!1)}};x.useEffect(()=>{T()},[]),x.useEffect(()=>{const k=setInterval(T,3e4);return()=>clearInterval(k)},[]),x.useEffect(()=>{let k=[...n];if(f){const G=f.toLowerCase();k=k.filter(Y=>{var te;return Y.tripNumber.toLowerCase().includes(G)||Y.patientId.toLowerCase().includes(G)||Y.fromLocation.toLowerCase().includes(G)||Y.toLocation.toLowerCase().includes(G)||(((te=Y.assignedAgency)==null?void 0:te.name)||"").toLowerCase().includes(G)})}if(d!=="ALL"&&(k=k.filter(G=>G.status===d)),j!=="ALL"&&(k=k.filter(G=>G.priority===j)),y!=="ALL"&&(k=k.filter(G=>G.transportLevel===y)),C!=="ALL"){const G=new Date,Y=new Date;switch(C){case"24H":Y.setHours(G.getHours()-24);break;case"7D":Y.setDate(G.getDate()-7);break;case"30D":Y.setDate(G.getDate()-30);break}C!=="ALL"&&(k=k.filter(te=>new Date(te.createdAt)>=Y))}e.userType!=="ADMIN"&&e.facilityName&&(k=k.filter(G=>G.fromLocation.toLowerCase().includes(e.facilityName.toLowerCase()))),k.sort((G,Y)=>{const te=G[S],pe=Y[S];return te<pe?W==="asc"?-1:1:te>pe?W==="asc"?1:-1:0}),l(k)},[n,f,d,j,y,C,$,S,W,e]);const A=k=>{const G={PENDING:{color:"bg-yellow-100 text-yellow-800",icon:Ht},ACCEPTED:{color:"bg-blue-100 text-blue-800",icon:Fe},DECLINED:{color:"bg-orange-100 text-orange-800",icon:Zt},IN_PROGRESS:{color:"bg-purple-100 text-purple-800",icon:We},COMPLETED:{color:"bg-green-100 text-green-800",icon:Fe},CANCELLED:{color:"bg-red-100 text-red-800",icon:Zt}},Y=G[k]||G.PENDING,te=Y.icon;return t.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y.color}`,children:[t.jsx(te,{className:"w-3 h-3 mr-1"}),k.replace("_"," ")]})},L=k=>{const G={LOW:{color:"bg-gray-100 text-gray-800"},MEDIUM:{color:"bg-yellow-100 text-yellow-800"},HIGH:{color:"bg-orange-100 text-orange-800"},CRITICAL:{color:"bg-red-100 text-red-800"}},Y=G[k]||G.LOW;return t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y.color}`,children:k})},R=k=>new Date(k).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),q=()=>{const k=["Trip Number","Patient ID","From Location","Pickup Location","Pickup Floor","Pickup Room","Pickup Contact","To Location","Status","Priority","Transport Level","Scheduled Time","Assigned Agency","Created At"],G=a.map(je=>{var F,le,I,v,N,P;return[je.tripNumber,je.patientId,je.fromLocation,((F=je.pickupLocation)==null?void 0:F.name)||"N/A",((le=je.pickupLocation)==null?void 0:le.floor)||"N/A",((I=je.pickupLocation)==null?void 0:I.room)||"N/A",((v=je.pickupLocation)==null?void 0:v.contactPhone)||((N=je.pickupLocation)==null?void 0:N.contactEmail)||"N/A",je.toLocation,je.status,je.priority,je.transportLevel,R(je.scheduledTime),((P=je.assignedAgency)==null?void 0:P.name)||"Unassigned",R(je.createdAt)]}),Y=[k,...G].map(je=>je.map(F=>`"${F}"`).join(",")).join(`
`),te=new Blob([Y],{type:"text/csv"}),pe=window.URL.createObjectURL(te),ke=document.createElement("a");ke.href=pe,ke.download=`trips-${new Date().toISOString().split("T")[0]}.csv`,ke.click(),window.URL.revokeObjectURL(pe)};return o?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Trip Management"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage and monitor all transport requests"})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("button",{onClick:T,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[t.jsx(xt,{className:"w-4 h-4 mr-2"}),"Refresh"]}),t.jsxs("button",{onClick:q,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[t.jsx(t0,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3",children:[t.jsx("button",{onClick:()=>s("/dashboard/trips/create"),className:"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"p-3 rounded-md bg-green-500",children:t.jsx(We,{className:"h-6 w-6 text-white"})})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Create Trip"}),t.jsx("dd",{className:"text-lg font-semibold text-gray-900",children:"New Transport Request"})]})})]})})}),t.jsx("button",{onClick:()=>window.location.href="/dashboard/units",className:"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"p-3 rounded-md bg-blue-500",children:t.jsx(We,{className:"h-6 w-6 text-white"})})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Units"}),t.jsx("dd",{className:"text-lg font-semibold text-gray-900",children:"Manage Units"})]})})]})})}),t.jsx("button",{onClick:()=>window.location.href="/dashboard/route-optimization",className:"bg-white overflow-hidden shadow rounded-lg hover:shadow-md transition-shadow cursor-pointer",children:t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"p-3 rounded-md bg-purple-500",children:t.jsx(De,{className:"h-6 w-6 text-white"})})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Route Optimization"}),t.jsx("dd",{className:"text-lg font-semibold text-gray-900",children:"Optimize Routes"})]})})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[t.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"p-3 rounded-md bg-blue-500",children:t.jsx(We,{className:"h-6 w-6 text-white"})})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Trips"}),t.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:n.length})]})})]})})}),t.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"p-3 rounded-md bg-yellow-500",children:t.jsx(Ht,{className:"h-6 w-6 text-white"})})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pending"}),t.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:n.filter(k=>k.status==="PENDING").length})]})})]})})}),t.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"p-3 rounded-md bg-purple-500",children:t.jsx(We,{className:"h-6 w-6 text-white"})})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"In Progress"}),t.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:n.filter(k=>k.status==="IN_PROGRESS").length})]})})]})})}),t.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"p-3 rounded-md bg-green-500",children:t.jsx(Fe,{className:"h-6 w-6 text-white"})})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Completed"}),t.jsx("dd",{className:"text-2xl font-semibold text-gray-900",children:n.filter(k=>k.status==="COMPLETED").length})]})})]})})})]}),t.jsx("div",{className:"bg-white shadow rounded-lg",children:t.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Filters"}),t.jsxs("button",{onClick:()=>U(!B),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[t.jsx(Hp,{className:"w-4 h-4 mr-2"}),B?"Hide Filters":"Show Filters",B?t.jsx(Zx,{className:"w-4 h-4 ml-2"}):t.jsx(Vo,{className:"w-4 h-4 ml-2"})]})]}),B&&t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Search"}),t.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Yi,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{type:"text",value:f,onChange:k=>p(k.target.value),className:"focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Search trips..."})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),t.jsxs("select",{value:d,onChange:k=>h(k.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",children:[t.jsx("option",{value:"ALL",children:"All Statuses"}),t.jsx("option",{value:"PENDING",children:"Pending"}),t.jsx("option",{value:"ACCEPTED",children:"Accepted"}),t.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),t.jsx("option",{value:"COMPLETED",children:"Completed"}),t.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Priority"}),t.jsxs("select",{value:j,onChange:k=>b(k.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",children:[t.jsx("option",{value:"ALL",children:"All Priorities"}),t.jsx("option",{value:"LOW",children:"Low"}),t.jsx("option",{value:"MEDIUM",children:"Medium"}),t.jsx("option",{value:"HIGH",children:"High"}),t.jsx("option",{value:"CRITICAL",children:"Critical"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transport Level"}),t.jsxs("select",{value:y,onChange:k=>w(k.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",children:[t.jsx("option",{value:"ALL",children:"All Levels"}),t.jsx("option",{value:"BLS",children:"BLS"}),t.jsx("option",{value:"ALS",children:"ALS"}),t.jsx("option",{value:"CCT",children:"CCT"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date Range"}),t.jsxs("select",{value:C,onChange:k=>D(k.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",children:[t.jsx("option",{value:"ALL",children:"All Time"}),t.jsx("option",{value:"24H",children:"Last 24 Hours"}),t.jsx("option",{value:"7D",children:"Last 7 Days"}),t.jsx("option",{value:"30D",children:"Last 30 Days"})]})]}),e.userType==="ADMIN"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hospital"}),t.jsx("select",{value:$,onChange:k=>O(k.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",children:t.jsx("option",{value:"ALL",children:"All Hospitals"})})]})]})]})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",t.jsx("span",{className:"font-medium",children:a.length})," of"," ",t.jsx("span",{className:"font-medium",children:n.length})," trips"]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Last updated: ",g.toLocaleTimeString()]})]}),t.jsxs("div",{className:"space-y-4",children:[a.map(k=>t.jsx(By,{trip:k,user:e},k.id)),a.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(We,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No trips found"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:f||d!=="ALL"||j!=="ALL"||y!=="ALL"||C!=="ALL"?"Try adjusting your filters to see more results.":"No trips have been created yet."})]})]}),de&&z&&t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>oe(!1)}),t.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[t.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Trip Details - ",z.tripNumber]}),t.jsx("button",{onClick:()=>oe(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(Zt,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Patient ID"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:z.patientId})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),t.jsx("div",{className:"mt-1",children:A(z.status)})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Priority"}),t.jsx("div",{className:"mt-1",children:L(z.priority)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transport Level"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:z.transportLevel})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"From Location"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:z.fromLocation})]}),z.pickupLocation&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Pickup Location"}),t.jsxs("div",{className:"mt-1 p-3 bg-blue-50 rounded-md",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:z.pickupLocation.name}),z.pickupLocation.description&&t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:z.pickupLocation.description}),t.jsxs("div",{className:"mt-2 space-y-1",children:[z.pickupLocation.floor&&t.jsxs("p",{className:"text-xs text-gray-500",children:[t.jsx("span",{className:"font-medium",children:"Floor:"})," ",z.pickupLocation.floor]}),z.pickupLocation.room&&t.jsxs("p",{className:"text-xs text-gray-500",children:[t.jsx("span",{className:"font-medium",children:"Room:"})," ",z.pickupLocation.room]}),z.pickupLocation.contactPhone&&t.jsxs("p",{className:"text-xs text-gray-500",children:[t.jsx("span",{className:"font-medium",children:"Phone:"})," ",z.pickupLocation.contactPhone]}),z.pickupLocation.contactEmail&&t.jsxs("p",{className:"text-xs text-gray-500",children:[t.jsx("span",{className:"font-medium",children:"Email:"})," ",z.pickupLocation.contactEmail]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"To Location"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:z.toLocation})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Scheduled Time"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:R(z.scheduledTime)})]}),z.assignedAgency&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Agency"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:z.assignedAgency.name})]}),z.diagnosis&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Diagnosis"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:z.diagnosis})]}),z.mobilityLevel&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobility Level"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:z.mobilityLevel})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Oxygen Required"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:z.oxygenRequired?"Yes":"No"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Monitoring Required"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:z.monitoringRequired?"Yes":"No"})]})]})]})]}),t.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:t.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:()=>oe(!1),children:"Close"})})]})]})})]})},xh=({user:e,onTripCreated:s,onCancel:n})=>{var v;const[r,a]=x.useState(1),[l,o]=x.useState(!1),[i,c]=x.useState(null),[m,g]=x.useState(!1),[u,f]=x.useState({diagnosis:[],mobility:[],transportLevel:[],urgency:[],insurance:[],specialNeeds:[],facilities:[],agencies:[],pickupLocations:[],healthcareLocations:[],availableUnits:[]}),[p,d]=x.useState({patientId:"",ageYears:"",isNewborn:!1,isInfant:!1,isToddler:!1,patientWeight:"",specialNeeds:"",insuranceCompany:"",generateQRCode:!1,fromLocation:e.facilityName||"",fromLocationId:"",pickupLocationId:"",toLocation:"",scheduledTime:new Date().toISOString().slice(0,16),transportLevel:"BLS",urgencyLevel:"Routine",diagnosis:"",mobilityLevel:"Ambulatory",oxygenRequired:!1,monitoringRequired:!1,selectedAgencies:[],notificationRadius:100,assignedUnitId:"N/A",notes:""}),[h,j]=x.useState("select"),[b,y]=x.useState(!1),[w,C]=x.useState(!0),[D,$]=x.useState(!1),[O,B]=x.useState(""),[U,z]=x.useState([]),[ce,de]=x.useState(!1),[oe,S]=x.useState(""),[Q,W]=x.useState(""),M=async()=>{var N,P;if(e.manageMultipleLocations)try{console.log("PHASE_A: Reloading facilities with showAllStates:",D);const V=await K.get("/api/healthcare/locations/active");if((N=V.data)!=null&&N.success&&Array.isArray(V.data.data)){const Z=V.data.data,J=Z.find(ue=>ue.isPrimary)||Z[0];let ee;if(D?(console.log("PHASE_A: Loading all facilities within 100 miles"),ee=await K.get("/api/tcc/facilities",{params:{originLat:J.latitude,originLng:J.longitude,radius:100,isActive:!0}})):(console.log("PHASE_A: Loading PA facilities within 100 miles"),ee=await K.get("/api/tcc/facilities",{params:{state:"PA",originLat:J.latitude,originLng:J.longitude,radius:100,isActive:!0}})),(P=ee.data)!=null&&P.success&&Array.isArray(ee.data.data)){const ue=ee.data.data;console.log("PHASE_A: Reloaded",ue.length,"facilities"),f(H=>({...H,facilities:ue}))}}}catch(V){console.error("PHASE_A: Error reloading facilities:",V)}},T=[{id:1,name:"Patient Info",icon:wr},{id:2,name:"Trip Details",icon:De},{id:3,name:"Clinical Info",icon:$d}];x.useEffect(()=>{console.log("MULTI_LOC: EnhancedTripForm useEffect triggered"),console.log("MULTI_LOC: User object:",e),console.log("MULTI_LOC: user.manageMultipleLocations:",e.manageMultipleLocations),R(),(e.userType==="ADMIN"||e.userType==="USER")&&A()},[]);const A=async()=>{var N;try{de(!0),console.log("TCC_COMMAND: Loading all healthcare facilities for command staff...");const P=await K.get("/api/healthcare/locations/all");(N=P.data)!=null&&N.success&&Array.isArray(P.data.data)&&(z(P.data.data),console.log("TCC_COMMAND: Loaded",P.data.data.length,"active healthcare facilities"))}catch(P){console.error("TCC_COMMAND: Error loading healthcare facilities:",P),c("Failed to load healthcare facilities. Please refresh and try again.")}finally{de(!1)}},L=N=>{console.log("TCC_COMMAND: Facility selected:",N),B(N);const P=U.find(V=>V.id===N);P&&(d(V=>({...V,fromLocation:P.locationName,fromLocationId:P.id})),console.log("TCC_COMMAND: Pre-filled fromLocation with:",P.locationName))};x.useEffect(()=>{if(e.manageMultipleLocations&&p.fromLocationId)console.log("MULTI_LOC: Loading pickup locations for healthcare location:",p.fromLocationId),G(p.fromLocationId);else if(!e.manageMultipleLocations&&p.fromLocation&&u.facilities.length>0){const N=u.facilities.find(P=>P.name===p.fromLocation);if(N){const P=N.hospitalId||N.id;console.log("SINGLE_LOC: Loading pickup locations for user facility:",P),G(P)}else console.log("SINGLE_LOC: Facility not found in options yet:",p.fromLocation,"Available:",u.facilities.map(P=>P.name))}},[p.fromLocation,p.fromLocationId,u.facilities,e.manageMultipleLocations]),x.useEffect(()=>{O&&(e.userType==="ADMIN"||e.userType==="USER")&&(console.log("TCC_COMMAND: Loading pickup locations for selected TCC facility:",O),G(O))},[O,e.userType]),x.useEffect(()=>{if(console.log("TCC_DEBUG: Agency loading useEffect triggered",{currentStep:r,fromLocation:p.fromLocation,facilitiesCount:u.facilities.length}),r===4&&p.fromLocation&&u.facilities.length>0){const N=u.facilities.find(P=>P.name===p.fromLocation);console.log("TCC_DEBUG: Selected facility:",N),N&&q(N.id)}},[r,p.fromLocation,u.facilities]);const R=async()=>{var N,P,V,Z,J,ee;C(!0);try{console.log("TCC_DEBUG: Loading real form options from API...");let ue=[],H=[];const E=(()=>{const ge=typeof window<"u"?localStorage.getItem("tcc_multi_loc")==="true":!1,Ce=e.manageMultipleLocations||ge;return console.log("[FORM-DEBUG] isMultiLocationUser calculation:",{"user.manageMultipleLocations":e.manageMultipleLocations,"persisted (localStorage)":ge,"effective (result)":Ce}),Ce&&typeof window<"u"&&localStorage.setItem("tcc_multi_loc","true"),Ce})();if(console.log("[FORM-DEBUG] About to load facilities. isMultiLocationUser:",E),E){console.log("PHASE_A: Loading healthcare locations and facilities for Penn Highlands user");const ge=await K.get("/api/healthcare/locations/active");if((N=ge.data)!=null&&N.success&&Array.isArray(ge.data.data)){H=ge.data.data,console.log("MULTI_LOC: Loaded",H.length,"healthcare locations for form options:",H);const Ce=H.find(xe=>xe.isPrimary)||H[0];if(Ce&&Ce.latitude&&Ce.longitude){console.log("PHASE_A: Using primary location as origin:",Ce.locationName),console.log("[FORM-DEBUG] Attempting to fetch facilities API with params:",{state:"PA",radius:100});try{const xe=await K.get("/api/tcc/facilities",{params:{state:"PA",originLat:Ce.latitude,originLng:Ce.longitude,radius:100,isActive:!0}});console.log("[FORM-DEBUG] Facilities API response:",xe.data),(P=xe.data)!=null&&P.success&&Array.isArray(xe.data.data)&&(ue=xe.data.data,console.log("PHASE_A: Loaded",ue.length,"PA facilities within 100 miles of",Ce.locationName))}catch(xe){console.error("[FORM-DEBUG] Facilities API failed with error:",xe),console.warn("PHASE_A: Facilities API failed, falling back to public hospitals")}if(console.log("[FORM-DEBUG] Checking if facilities fallback is needed. Current facilities count:",ue.length),!ue||ue.length===0){console.log("[FORM-DEBUG] Facilities empty or zero, attempting public hospitals fallback");try{const xe=await K.get("/api/public/hospitals");console.log("[FORM-DEBUG] Public hospitals response:",xe.data),(V=xe.data)!=null&&V.success&&Array.isArray(xe.data.data)&&(ue=xe.data.data.filter(Rs=>Rs.state==="PA"),console.log("PHASE_A: Fallback loaded",ue.length,"public hospitals in PA"))}catch(xe){console.error("[FORM-DEBUG] Public hospitals fallback failed:",xe),console.warn("PHASE_A: Public hospitals fallback failed")}}}else{console.warn("PHASE_A: Primary location missing coordinates, falling back to PA facilities only");try{const xe=await K.get("/api/tcc/facilities",{params:{state:"PA",isActive:!0}});(Z=xe.data)!=null&&Z.success&&Array.isArray(xe.data.data)&&(ue=xe.data.data)}catch{console.warn("PHASE_A: Facilities API (no-geo) failed, using public hospitals fallback")}if(!ue||ue.length===0)try{const xe=await K.get("/api/public/hospitals");(J=xe.data)!=null&&J.success&&Array.isArray(xe.data.data)&&(ue=xe.data.data.filter(Rs=>Rs.state==="PA"))}catch{}}}}else{console.log("SINGLE_LOC: Single-location user - loading all facilities for destination options");const ge=await K.get("/api/public/hospitals");(ee=ge.data)!=null&&ee.success&&Array.isArray(ge.data.data)&&(ue=ge.data.data,console.log("SINGLE_LOC: Loaded",ue.length,"facilities for destination selection"));let Ce=ue.find(xe=>xe.name===e.facilityName);Ce&&Ce.id==="hosp_test_001"&&(Ce={...Ce,id:"fac_test_hospital_001",hospitalId:"hosp_test_001"},ue=ue.map(xe=>xe.id==="hosp_test_001"?{...xe,id:"fac_test_hospital_001"}:xe)),Ce?(console.log("SINGLE_LOC: Found user hospital for pickup locations:",Ce),d(xe=>({...xe,fromLocation:e.facilityName||""}))):console.warn("SINGLE_LOC: User facility not found in hospitals list:",e.facilityName),H=[]}ue.length===0&&(console.warn("TCC_DEBUG: Failed to load facilities, using fallback"),ue=[]);const[se,ae,ie,re,ye,he]=await Promise.all([yt.getByCategory("diagnosis").catch(()=>({data:{success:!1,data:[]}})),yt.getByCategory("mobility").catch(()=>({data:{success:!1,data:[]}})),yt.getByCategory("transport-level").catch(()=>({data:{success:!1,data:[]}})),yt.getByCategory("urgency").catch(()=>({data:{success:!1,data:[]}})),yt.getByCategory("insurance").catch(()=>({data:{success:!1,data:[]}})),yt.getByCategory("special-needs").catch(()=>({data:{success:!1,data:[]}}))]),Ne=(ge,Ce)=>{var xe;return(xe=ge==null?void 0:ge.data)!=null&&xe.success&&Array.isArray(ge.data.data)?ge.data.data.map(Rs=>Rs.value):Ce},ft=["Routine","Urgent","Emergent"],X=Ne(re,[]),fe=[...ft,...X.filter(ge=>!ft.includes(ge))],Ke={diagnosis:Ne(se,["Cardiac","Respiratory","Neurological","Trauma"]),mobility:Ne(ae,["Ambulatory","Wheelchair","Stretcher","Bed-bound"]),transportLevel:Ne(ie,["BLS","ALS","CCT","Other"]),urgency:fe,insurance:Ne(ye,["Medicare","Medicaid","Private","Self-pay"]),specialNeeds:Ne(he,["Bariatric Stretcher"]),facilities:ue,agencies:[],pickupLocations:[],healthcareLocations:H};if(console.log("TCC_DEBUG: Setting real form options:",Ke),console.log("MULTI_LOC: Healthcare locations being set in formOptions:",H.length,"locations"),f(Ke),E&&H.length>0){const ge=H.find(Ce=>Ce.isPrimary);console.log("MULTI_LOC: Primary location found:",ge),ge&&(d(Ce=>({...Ce,fromLocation:ge.locationName,fromLocationId:ge.id})),console.log("MULTI_LOC: Set default location:",ge.locationName))}try{const[ge,Ce,xe,Rs,bh,jh]=await Promise.all([K.get("/api/dropdown-options/transport-level/default"),K.get("/api/dropdown-options/urgency/default"),K.get("/api/dropdown-options/diagnosis/default"),K.get("/api/dropdown-options/mobility/default"),K.get("/api/dropdown-options/insurance/default"),K.get("/api/dropdown-options/special-needs/default")]);d(Zs=>{var sc,nc,rc,ac,lc,oc,ic,cc,dc,uc,mc,pc,hc,fc,gc,xc,yc,vc;return{...Zs,transportLevel:((rc=(nc=(sc=ge.data)==null?void 0:sc.data)==null?void 0:nc.option)==null?void 0:rc.value)||Zs.transportLevel,urgencyLevel:((oc=(lc=(ac=Ce.data)==null?void 0:ac.data)==null?void 0:lc.option)==null?void 0:oc.value)||Zs.urgencyLevel,diagnosis:(dc=(cc=(ic=xe.data)==null?void 0:ic.data)==null?void 0:cc.option)!=null&&dc.value?xe.data.data.option.value:"",mobilityLevel:((pc=(mc=(uc=Rs.data)==null?void 0:uc.data)==null?void 0:mc.option)==null?void 0:pc.value)||Zs.mobilityLevel,insuranceCompany:((gc=(fc=(hc=bh.data)==null?void 0:hc.data)==null?void 0:fc.option)==null?void 0:gc.value)||Zs.insuranceCompany,specialNeeds:((vc=(yc=(xc=jh.data)==null?void 0:xc.data)==null?void 0:yc.option)==null?void 0:vc.value)||Zs.specialNeeds}})}catch{console.warn("TCC_DEBUG: Defaults not available yet")}C(!1)}catch(ue){console.error("Error loading form options:",ue),C(!1),f({diagnosis:["Cardiac","Respiratory","Neurological","Trauma"],mobility:["Ambulatory","Wheelchair","Stretcher","Bed-bound"],transportLevel:["BLS","ALS","CCT","Other"],urgency:["Routine","Urgent","Emergent"],insurance:["Medicare","Medicaid","Private","Self-pay"],specialNeeds:["Bariatric Stretcher"],facilities:[],agencies:[],pickupLocations:[],healthcareLocations:[]})}},q=async N=>{var P;try{if(console.log("TCC_DEBUG: Loading agencies for hospital:",N,"with radius:",p.notificationRadius),!N){console.warn("TCC_DEBUG: No hospital ID provided for agencies"),f(Z=>({...Z,agencies:[]}));return}const V=await Gt.getAgenciesForHospital(N,p.notificationRadius);console.log("TCC_DEBUG: Agencies response:",V.data),(P=V.data)!=null&&P.success&&Array.isArray(V.data.data)?(console.log("TCC_DEBUG: Setting agencies:",V.data.data.length,"agencies"),f(Z=>({...Z,agencies:V.data.data}))):(console.warn("TCC_DEBUG: Invalid agencies response structure:",V.data),f(Z=>({...Z,agencies:[]})))}catch(V){console.error("Error loading agencies:",V),f(Z=>({...Z,agencies:[]}))}},k=async()=>{try{if(console.log("TCC_DEBUG: Loading available units for selected agencies:",p.selectedAgencies),p.selectedAgencies.length===0){f(N=>({...N,availableUnits:[]}));return}f(N=>({...N,availableUnits:[]}))}catch(N){console.error("TCC_DEBUG: Error loading available units:",N),f(P=>({...P,availableUnits:[]}))}},G=async N=>{var P;try{if(y(!0),console.log("TCC_DEBUG: Loading pickup locations for hospital:",N),!N){console.warn("TCC_DEBUG: No hospital ID provided for pickup locations"),f(Z=>({...Z,pickupLocations:[]}));return}const V=await K.get(`/api/tcc/pickup-locations/hospital/${N}`);if(console.log("TCC_DEBUG: Pickup locations response:",V.data),(P=V.data)!=null&&P.success&&Array.isArray(V.data.data)){console.log("TCC_DEBUG: Setting pickup locations:",V.data.data.length,"locations");const Z=V.data.data.map(J=>({id:J.id||`pickup-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,hospitalId:J.hospitalId||"",name:J.name||"Unnamed Location",description:J.description||"",contactPhone:J.contactPhone||"",contactEmail:J.contactEmail||"",floor:J.floor||"",room:J.room||"",isActive:J.isActive!==void 0?J.isActive:!0,createdAt:J.createdAt||new Date().toISOString(),updatedAt:J.updatedAt||new Date().toISOString(),hospital:J.hospital||J.hospitals||null,hospitals:J.hospitals||J.hospital||null}));console.log("TCC_DEBUG: Transformed pickup locations:",Z),f(J=>({...J,pickupLocations:Z}))}else console.warn("TCC_DEBUG: Invalid pickup locations response structure:",V.data),f(Z=>({...Z,pickupLocations:[]}))}catch(V){console.error("Error loading pickup locations:",V),f(Z=>({...Z,pickupLocations:[]}))}finally{y(!1)}},Y=N=>{const{name:P,value:V,type:Z}=N.target;if(P==="fromLocation"&&(e.manageMultipleLocations||typeof window<"u"&&localStorage.getItem("tcc_multi_loc")==="true")){const J=u.healthcareLocations.find(ee=>ee.locationName===V);J&&(d(ee=>({...ee,fromLocation:J.locationName,fromLocationId:J.id})),console.log("MULTI_LOC: Selected healthcare location:",J),G(J.id))}else d(J=>({...J,[P]:Z==="checkbox"?N.target.checked:V}));if(P==="fromLocation"&&V&&!e.manageMultipleLocations){const J=u.facilities.find(ee=>ee.name===V);J?G(J.id):(f(ee=>({...ee,pickupLocations:[]})),d(ee=>({...ee,pickupLocationId:""})))}if(P==="toLocation"&&V&&h==="select"){const J=u.facilities.find(ee=>ee.name===V);J&&q(J.id)}},te=N=>{j(N),d(P=>({...P,toLocation:""})),N==="manual"&&f(P=>({...P,agencies:[]}))};x.useEffect(()=>{k()},[p.selectedAgencies]);const pe=()=>{const N="P"+Math.random().toString(36).substr(2,8).toUpperCase();d(P=>({...P,patientId:N}))},ke=()=>{n&&n()},je=N=>{N==null||N.preventDefault(),console.log("TCC_DEBUG: handleNext called, current step:",r,"total steps:",T.length),r<T.length&&(a(r+1),console.log("TCC_DEBUG: Advanced to step:",r+1))},F=()=>{r>1&&a(r-1)},le=async N=>{if(N.preventDefault(),console.log("TCC_DEBUG: handleSubmit called, current step:",r),w){console.log("TCC_DEBUG: Form data is still loading, please wait..."),c("Please wait for form data to finish loading");return}if(r<T.length){console.log("TCC_DEBUG: Submission blocked - not on final step");return}o(!0),c(null);try{if(!p.patientId||!p.patientWeight)throw new Error("Please fill in Patient ID and Patient Weight");if(!p.isNewborn&&!p.isInfant&&!p.isToddler){const E=parseInt((p.ageYears||"").trim(),10);if(!Number.isInteger(E)||E<1||E>110)throw new Error("Please enter a valid patient age (1-110 years) or select Newborn/Infant-Toddler")}const P=parseFloat(p.patientWeight);if(isNaN(P)||P<=0)throw new Error("Please enter a valid patient weight");if(!p.fromLocation||!p.toLocation||!p.scheduledTime||!p.transportLevel||!p.urgencyLevel)throw new Error("Please fill in all trip details: From Location, To Location, Scheduled Time, Transport Level, and Urgency Level");if(new Date(p.scheduledTime)<new Date)throw new Error("Scheduled time cannot be in the past");if(!["BLS","ALS","CCT","Other"].includes(p.transportLevel))throw new Error("Invalid transport level");if(!["Routine","Urgent","Emergent","Critical"].includes(p.urgencyLevel))throw new Error("Invalid urgency level");console.log("TCC_DEBUG: Creating trip with data:",p);let V;if(e.manageMultipleLocations?V=u.healthcareLocations.find(E=>E.locationName===p.fromLocation):V=u.facilities.find(E=>E.name===p.fromLocation),!V)throw console.error("TCC_DEBUG: Selected facility not found. fromLocation:",p.fromLocation),console.error("TCC_DEBUG: Available healthcareLocations:",u.healthcareLocations.map(E=>E.locationName)),console.error("TCC_DEBUG: Available facilities:",u.facilities.map(E=>E.name)),new Error("Selected facility not found");const Z=u.facilities.find(E=>E.name===p.toLocation);if(!Z)throw new Error("Destination facility not found");const J={patientId:p.patientId,patientWeight:parseFloat(p.patientWeight),originFacilityId:V.id,destinationFacilityId:Z.id,transportLevel:p.transportLevel,urgencyLevel:p.urgencyLevel,priority:p.urgencyLevel==="Critical"||p.urgencyLevel==="Emergent"?"HIGH":p.urgencyLevel==="Urgent"?"MEDIUM":"LOW",specialRequirements:p.specialNeeds||"",readyStart:new Date(p.scheduledTime).toISOString(),readyEnd:new Date(new Date(p.scheduledTime).getTime()+60*60*1e3).toISOString(),isolation:!1,bariatric:parseFloat(p.patientWeight)>300,pickupLocationId:p.pickupLocationId,notes:p.notes||"",fromLocationId:e.manageMultipleLocations?p.fromLocationId:e.userType==="ADMIN"||e.userType==="USER"?O:void 0,healthcareUserId:e.manageMultipleLocations?e.id:void 0,createdByTCCUserId:e.userType==="ADMIN"||e.userType==="USER"?e.id:void 0,createdByTCCUserEmail:e.userType==="ADMIN"||e.userType==="USER"?e.email:void 0,createdVia:e.userType==="ADMIN"||e.userType==="USER"?"TCC_ADMIN_PORTAL":"HEALTHCARE_PORTAL",assignedUnitId:p.assignedUnitId};console.log("TCC_DEBUG: Submitting trip data:",J);const ee=p.isNewborn?"NEWBORN":p.isInfant?"INFANT":p.isToddler?"TODDLER":"ADULT",ue=ee==="ADULT"&&p.ageYears?parseInt(p.ageYears,10):void 0,H=e.userType==="HEALTHCARE"?await Gt.createEnhanced({patientId:J.patientId,patientWeight:p.patientWeight,specialNeeds:p.specialNeeds,insuranceCompany:p.insuranceCompany,patientAgeCategory:ee,patientAgeYears:ue,fromLocation:p.fromLocation,fromLocationId:p.fromLocationId||void 0,pickupLocationId:p.pickupLocationId,toLocation:p.toLocation,scheduledTime:new Date(p.scheduledTime).toISOString(),transportLevel:p.transportLevel,urgencyLevel:p.urgencyLevel,diagnosis:p.diagnosis||void 0,mobilityLevel:p.mobilityLevel,oxygenRequired:!!p.oxygenRequired,monitoringRequired:!!p.monitoringRequired,generateQRCode:!1,selectedAgencies:p.selectedAgencies,notificationRadius:p.notificationRadius,notes:p.notes,priority:J.priority,createdVia:"HEALTHCARE_PORTAL"}):await Gt.create({...J,assignedUnitId:void 0});if(H.data.success)console.log("TCC_DEBUG: Trip created successfully:",H.data.data),g(!0),setTimeout(()=>{s()},3e3);else throw new Error(H.data.error||"Failed to create transport request")}catch(P){console.error("TCC_DEBUG: Error creating trip:",P),c(P.message||"Failed to create transport request")}finally{o(!1)}},I=()=>{switch(r){case 1:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6",children:[t.jsxs("div",{className:"md:col-span-6",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient ID *"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",name:"patientId",value:p.patientId,onChange:Y,required:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter patient ID"}),t.jsx("button",{type:"button",onClick:pe,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Generate ID"})]})]}),t.jsxs("div",{className:"md:col-span-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient Weight (kgs)"}),t.jsx("input",{type:"text",name:"patientWeight",value:p.patientWeight,onChange:Y,inputMode:"decimal",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter weight in kilograms"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6",children:[t.jsxs("div",{className:"md:col-span-6 flex items-center space-x-6",children:[t.jsxs("label",{className:"inline-flex items-center text-sm text-gray-700",children:[t.jsx("input",{type:"checkbox",name:"isNewborn",checked:!!p.isNewborn,onChange:Y,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mr-2"}),"Newborn"]}),t.jsxs("label",{className:"inline-flex items-center text-sm text-gray-700",children:[t.jsx("input",{type:"checkbox",name:"isInfant",checked:!!p.isInfant,onChange:Y,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mr-2"}),"Infant"]}),t.jsxs("label",{className:"inline-flex items-center text-sm text-gray-700",children:[t.jsx("input",{type:"checkbox",name:"isToddler",checked:!!p.isToddler,onChange:Y,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mr-2"}),"Toddler"]})]}),t.jsxs("div",{className:"md:col-span-3 md:col-start-7",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Age (years)"}),t.jsx("input",{type:"text",name:"ageYears",inputMode:"numeric",pattern:"[0-9]*",value:p.ageYears||"",onChange:Y,disabled:!!p.isNewborn||!!p.isInfant||!!p.isToddler,className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 w-24 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"1 - 110"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Insurance Company"}),t.jsxs("select",{name:"insuranceCompany",value:p.insuranceCompany,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Select insurance company"}),u.insurance.map(N=>t.jsx("option",{value:N,children:N},N))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Secondary Insurance"}),t.jsxs("select",{name:"specialNeeds",value:p.specialNeeds,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Select secondary insurance"}),u.specialNeeds.map(N=>t.jsx("option",{value:N,children:N},N))]})]})]})]});case 2:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(De,{className:"h-5 w-5 text-green-600 mr-2"}),t.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Trip Details"})]}),t.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Specify origin, destination, and transport requirements."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Location *"}),e.manageMultipleLocations?t.jsxs("select",{name:"fromLocation",value:p.fromLocation,onChange:Y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select origin facility"}),console.log("MULTI_LOC: Rendering healthcare locations dropdown with",u.healthcareLocations.length,"locations:",u.healthcareLocations),u.healthcareLocations.map(N=>t.jsxs("option",{value:N.locationName,children:[N.locationName," - ",N.city,", ",N.state]},N.id))]}):t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:e.facilityName||"Your Facility",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 bg-gray-100 rounded-md shadow-sm text-gray-700 cursor-not-allowed"}),t.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:t.jsx(De,{className:"h-5 w-5 text-gray-400"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pickup Location *"}),(()=>{try{return t.jsxs("select",{name:"pickupLocationId",value:p.pickupLocationId,onChange:Y,required:!0,disabled:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[t.jsx("option",{value:"",children:b?"Loading pickup locations...":"Select pickup location"}),u.pickupLocations&&u.pickupLocations.length>0?u.pickupLocations.map(N=>{try{return console.log("TCC_DEBUG: Rendering pickup location option:",N),!N||!N.id||!N.name?(console.warn("TCC_DEBUG: Invalid pickup location data:",N),null):t.jsxs("option",{value:N.id,children:[N.name," ",N.floor&&`(${N.floor})`]},N.id)}catch(P){return console.error("TCC_DEBUG: Error rendering pickup location option:",P,N),null}}).filter(Boolean):!b&&p.fromLocation&&t.jsx("option",{value:"",disabled:!0,children:"No pickup locations available for this facility"})]})}catch(N){return console.error("TCC_DEBUG: Error rendering pickup location select:",N),t.jsx("div",{className:"w-full px-3 py-2 border border-red-300 rounded-md bg-red-50 text-red-700",children:"Error loading pickup locations. Please refresh the page."})}})(),p.pickupLocationId&&u.pickupLocations&&t.jsx("div",{className:"mt-2 text-sm text-gray-600",children:(()=>{const N=u.pickupLocations.find(P=>P.id===p.pickupLocationId);return N?t.jsxs("div",{children:[N.contactPhone&&t.jsxs("p",{children:[t.jsx("strong",{children:"Contact:"})," ",N.contactPhone]}),N.contactEmail&&t.jsxs("p",{children:[t.jsx("strong",{children:"Email:"})," ",N.contactEmail]}),N.room&&t.jsxs("p",{children:[t.jsx("strong",{children:"Room:"})," ",N.room]})]}):null})()})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Location *"}),t.jsxs("div",{className:"flex space-x-4 mb-3",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"destinationMode",value:"select",checked:h==="select",onChange:N=>te(N.target.value),className:"mr-2"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Select from list"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"radio",name:"destinationMode",value:"manual",checked:h==="manual",onChange:N=>te(N.target.value),className:"mr-2"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Enter manually"})]})]}),h==="select"?t.jsxs("select",{name:"toLocation",value:p.toLocation,onChange:Y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select destination"}),u.facilities.map(N=>t.jsxs("option",{value:N.name,children:[N.name," - ",N.type]},N.id))]}):t.jsx("input",{type:"text",name:"toLocation",value:p.toLocation,onChange:Y,required:!0,placeholder:"Enter destination facility name and location",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500"}),h==="select"&&u.facilities.length===0&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Loading facilities..."}),e.manageMultipleLocations&&h==="select"&&t.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[t.jsxs("label",{className:"flex items-center text-sm text-gray-600",children:[t.jsx("input",{type:"checkbox",checked:D,onChange:N=>{$(N.target.checked),setTimeout(()=>M(),100)},className:"mr-2 rounded border-gray-300 text-green-600 focus:ring-green-500"}),"Show facilities from all states"]}),!D&&t.jsx("span",{className:"text-xs text-gray-500",children:"(Currently showing PA facilities within 100 miles)"}),D&&t.jsx("span",{className:"text-xs text-gray-500",children:"(Currently showing all facilities within 100 miles)"})]}),h==="manual"&&t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:'Enter the full facility name and location (e.g., "Johns Hopkins Hospital, Baltimore, MD")'})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scheduled Time *"}),t.jsx("input",{type:"datetime-local",name:"scheduledTime",value:p.scheduledTime,onChange:Y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transport Level *"}),t.jsx("select",{name:"transportLevel",value:p.transportLevel,onChange:Y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",children:u.transportLevel.map(N=>t.jsx("option",{value:N,children:N},N))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Urgency Level *"}),t.jsx("select",{name:"urgencyLevel",value:p.urgencyLevel,onChange:Y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",children:u.urgency.map(N=>t.jsx("option",{value:N,children:N},N))})]})]})]});case 3:return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx($d,{className:"h-5 w-5 text-purple-600 mr-2"}),t.jsx("h3",{className:"text-sm font-medium text-purple-800",children:"Clinical Details"})]}),t.jsx("p",{className:"text-sm text-purple-700 mt-1",children:"Provide clinical information for appropriate transport planning."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Diagnosis"}),t.jsxs("select",{name:"diagnosis",value:p.diagnosis,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500",children:[t.jsx("option",{value:"",children:"Select diagnosis"}),u.diagnosis.map(N=>t.jsx("option",{value:N,children:N},N))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobility Level"}),t.jsx("select",{name:"mobilityLevel",value:p.mobilityLevel,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500",children:u.mobility.map(N=>t.jsx("option",{value:N,children:N},N))})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",name:"oxygenRequired",checked:p.oxygenRequired,onChange:Y,className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),t.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Oxygen Required"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",name:"monitoringRequired",checked:p.monitoringRequired,onChange:Y,className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),t.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Continuous Monitoring Required"})]})]})]});default:return null}};return t.jsxs("div",{className:"max-w-4xl mx-auto",children:[(e.userType==="ADMIN"||e.userType==="USER")&&t.jsxs("div",{className:"mb-6 bg-blue-50 border-2 border-blue-300 rounded-lg p-5 shadow-sm",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-10 w-10 bg-blue-600 rounded-lg flex items-center justify-center",children:t.jsx(at,{className:"h-6 w-6 text-white"})})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"TCC Command Center - Create Trip"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Select the healthcare facility you're creating this trip for"})]})]}),ce?t.jsxs("div",{className:"flex items-center justify-center py-4",children:[t.jsx(xt,{className:"h-5 w-5 animate-spin text-blue-600 mr-2"}),t.jsx("span",{className:"text-sm text-gray-600",children:"Loading facilities..."})]}):t.jsxs("div",{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Search Facilities"}),t.jsx("input",{type:"text",value:oe,onChange:N=>S(N.target.value),placeholder:"Search by name or city...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Filter by State"}),t.jsxs("select",{value:Q,onChange:N=>W(N.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",children:[t.jsx("option",{value:"",children:"All States"}),Array.from(new Set(U.map(N=>N.state))).sort().map(N=>t.jsx("option",{value:N,children:N},N))]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Healthcare Facility *"}),t.jsxs("select",{value:O,onChange:N=>L(N.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-base",required:!0,children:[t.jsx("option",{value:"",children:"-- Select Healthcare Facility --"}),U.filter(N=>{const P=oe.toLowerCase(),V=!oe||N.locationName.toLowerCase().includes(P)||N.city.toLowerCase().includes(P)||N.zipCode.includes(oe),Z=!Q||N.state===Q;return V&&Z}).map(N=>t.jsxs("option",{value:N.id,children:[N.locationName," - ",N.city,", ",N.state," ",N.zipCode]},N.id))]}),t.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Showing ",U.filter(N=>{const P=oe.toLowerCase(),V=!oe||N.locationName.toLowerCase().includes(P)||N.city.toLowerCase().includes(P)||N.zipCode.includes(oe),Z=!Q||N.state===Q;return V&&Z}).length," of ",U.length," facilities"]})]}),O&&t.jsxs("div",{className:"mt-3 flex items-start bg-green-50 border border-green-200 rounded-md p-3",children:[t.jsx(Fe,{className:"h-5 w-5 text-green-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-green-800",children:"Facility Selected"}),t.jsxs("p",{className:"text-sm text-green-700",children:["Creating trip on behalf of"," ",t.jsx("span",{className:"font-semibold",children:(v=U.find(N=>N.id===O))==null?void 0:v.locationName})]})]})]}),!O&&U.length>0&&t.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["As TCC command staff, you have visibility into all ",U.length," facilities in the system."]})]})]}),t.jsx("div",{className:"mb-8",children:t.jsx("div",{className:"flex items-center justify-between",children:T.map((N,P)=>{const V=N.icon,Z=r===N.id,J=r>N.id;return t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${Z?"border-blue-500 bg-blue-500 text-white":J?"border-green-500 bg-green-500 text-white":"border-gray-300 bg-white text-gray-400"}`,children:t.jsx(V,{className:"h-5 w-5"})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:`text-sm font-medium ${Z?"text-blue-600":J?"text-green-600":"text-gray-500"}`,children:N.name})}),P<T.length-1&&t.jsx("div",{className:`w-16 h-0.5 mx-4 ${J?"bg-green-500":"bg-gray-300"}`})]},N.id)})})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Enhanced Transport Request"}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Step ",r," of ",T.length]})]}),t.jsxs("div",{className:"p-6",children:[m&&t.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx(Fe,{className:"h-5 w-5 text-green-400"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-green-800",children:"Transport request completed successfully!"}),t.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Patient: ",p.patientId," | From: ",p.fromLocation," | To: ",p.toLocation]}),t.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Redirecting to dashboard in 3 seconds..."})]})]})}),i&&t.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx(At,{className:"h-5 w-5 text-red-400"}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm font-medium text-red-800",children:i})})]})}),t.jsxs("form",{onSubmit:le,children:[I(),t.jsxs("div",{className:"flex justify-between mt-8",children:[t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("button",{type:"button",onClick:ke,className:"flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[t.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Cancel"]}),t.jsxs("button",{type:"button",onClick:F,disabled:r===1,className:"flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(Yx,{className:"h-4 w-4 mr-2"}),"Previous"]})]}),r<T.length?t.jsxs("button",{type:"button",onClick:je,className:"flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:["Next",t.jsx(Xx,{className:"h-4 w-4 ml-2"})]}):t.jsx("button",{type:"submit",disabled:l,className:"flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:l?"Creating...":"Create Request"})]})]})]})]})]})},ou=({user:e})=>{const s=As(),n=()=>{s("/dashboard/trips")},r=()=>{s("/dashboard/trips")};return t.jsx("div",{className:"min-h-full bg-gray-100 p-4 sm:p-6 lg:p-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create Transport Request"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Create a new transport request on behalf of a healthcare facility."})]}),t.jsx(xh,{user:e,onTripCreated:n,onCancel:r})]})})},iu=()=>{const e=As(),[s,n]=x.useState([]),[r,a]=x.useState(!0),[l,o]=x.useState(null);console.log("TCC_DEBUG: Hospitals component rendering");const[i,c]=x.useState(""),[m,g]=x.useState(""),[u,f]=x.useState(""),[p,d]=x.useState("active");x.useEffect(()=>{h()},[]);const h=async()=>{var T;try{a(!0),console.log("TCC_COMMAND: Fetching healthcare facilities...");const A=await K.get("/api/healthcare/locations/all");if((T=A.data)!=null&&T.success&&Array.isArray(A.data.data)){const L=A.data.data.map(R=>({id:R.id,name:R.locationName,address:R.address,city:R.city,state:R.state,zipCode:R.zipCode,phone:R.phone||"",email:"",type:R.facilityType,capabilities:[],region:R.state,latitude:R.latitude,longitude:R.longitude,isActive:R.isActive,requiresReview:!1,createdAt:R.createdAt,updatedAt:R.updatedAt}));n(L),console.log("TCC_COMMAND: Loaded",L.length,"healthcare facilities")}}catch(A){o(A.message),console.error("Error fetching healthcare facilities:",A)}finally{a(!1)}},j=async T=>{try{const A=await K.put(`/api/tcc/hospitals/${T}/approve`);console.log("Hospital approved:",A.data),await h()}catch(A){console.error("Error approving hospital:",A),o("Failed to approve hospital")}},b=async T=>{try{const A=await K.put(`/api/tcc/hospitals/${T}/reject`);console.log("Hospital rejected:",A.data),await h()}catch(A){console.error("Error rejecting hospital:",A),o("Failed to reject hospital")}},[y,w]=x.useState(null),[C,D]=x.useState({name:"",address:"",city:"",state:"",zipCode:"",phone:"",email:"",type:"",capabilities:[],region:"",latitude:"",longitude:""}),[$,O]=x.useState(!1),[B,U]=x.useState(null),[z,ce]=x.useState(!1),de=T=>{var L,R;const A=s.find(q=>q.id===T);A&&(w(A),D({name:A.name,address:A.address,city:A.city,state:A.state,zipCode:A.zipCode,phone:A.phone||"",email:A.email||"",type:A.type,capabilities:A.capabilities,region:A.region,latitude:((L=A.latitude)==null?void 0:L.toString())||"",longitude:((R=A.longitude)==null?void 0:R.toString())||""}),U(null))},oe=T=>{const{name:A,value:L}=T.target;D(R=>({...R,[A]:L}))},S=async()=>{if(!C.address||!C.city||!C.state||!C.zipCode){U("Please fill in address, city, state, and ZIP code before looking up coordinates");return}ce(!0),U(null);try{const T=`${C.address}, ${C.city}, ${C.state} ${C.zipCode}`,A=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(T)}&limit=1`);if(!A.ok)throw new Error("Geocoding service unavailable");const L=await A.json();if(L&&L.length>0){const R=L[0];D(q=>({...q,latitude:R.lat,longitude:R.lon})),U(null)}else U("Address not found. Please enter coordinates manually.")}catch(T){console.error("Geocoding error:",T),U("Failed to lookup coordinates. Please enter them manually.")}finally{ce(!1)}},Q=async T=>{if(T.preventDefault(),!!y){O(!0),U(null);try{const A=await K.put(`/api/tcc/hospitals/${y.id}`,C);await h(),w(null)}catch(A){console.error("Error updating hospital:",A),U(A.message||"Failed to update hospital")}finally{O(!1)}}},W=()=>{w(null),U(null)},M=async T=>{if(window.confirm("Are you sure you want to delete this hospital? This action cannot be undone."))try{const A=await K.delete(`/api/tcc/hospitals/${T}`);console.log("Hospital deleted:",A.data),await h()}catch(A){console.error("Error deleting hospital:",A),o("Failed to delete hospital")}};return r?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading hospitals..."})]})}):l?t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx(Yt,{className:"h-5 w-5 text-red-400"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error loading hospitals"}),t.jsx("p",{className:"mt-1 text-sm text-red-700",children:l})]})]})}):t.jsxs("div",{children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Healthcare Facilities"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Manage healthcare facilities in the system. ",s.length," facilities found."]})]}),t.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Healthcare Facilities List"}),t.jsxs("button",{type:"button",onClick:T=>{T.preventDefault(),T.stopPropagation(),console.log("TCC_DEBUG: Add Healthcare Facility button clicked"),console.log("TCC_DEBUG: Current location:",window.location.href),console.log("TCC_DEBUG: Target URL:",window.location.origin+"/healthcare-register");const A=window.location.origin+"/healthcare-register";console.log("TCC_DEBUG: Navigating to:",A),window.location.href=A,console.log("TCC_DEBUG: Navigation command executed")},onMouseDown:()=>console.log("TCC_DEBUG: Button mouse down event"),onMouseUp:()=>console.log("TCC_DEBUG: Button mouse up event"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",style:{position:"relative",zIndex:9999},children:[t.jsx(rs,{className:"h-4 w-4 mr-2"}),"Add Healthcare Facility"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Search Facilities"}),t.jsx("input",{type:"text",value:i,onChange:T=>c(T.target.value),placeholder:"Search by name, city, or ZIP...",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"State"}),t.jsxs("select",{value:m,onChange:T=>g(T.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",children:[t.jsx("option",{value:"",children:"All States"}),Array.from(new Set(s.map(T=>T.state))).sort().map(T=>t.jsx("option",{value:T,children:T},T))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),t.jsxs("select",{value:p,onChange:T=>d(T.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"active",children:"Active Only"}),t.jsx("option",{value:"inactive",children:"Inactive Only"})]})]})]})]}),(()=>{const T=s.filter(A=>{const L=i.toLowerCase(),R=!i||A.name.toLowerCase().includes(L)||A.city.toLowerCase().includes(L)||A.zipCode.includes(i)||A.address.toLowerCase().includes(L),q=!m||A.state===m,k=p==="all"||p==="active"&&A.isActive||p==="inactive"&&!A.isActive;return R&&q&&k});return T.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(at,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No facilities match your filters"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s.length===0?"Get started by adding a new hospital.":"Try adjusting your search or filter criteria."}),(i||m||p!=="active")&&t.jsx("button",{onClick:()=>{c(""),g(""),d("active")},className:"mt-4 text-sm text-blue-600 hover:text-blue-800 underline",children:"Clear all filters"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"px-6 py-2 bg-gray-50 border-b border-gray-200",children:t.jsxs("p",{className:"text-xs text-gray-600",children:["Showing ",T.length," of ",s.length," facilities"]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Facility"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(A=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.name}),t.jsx("div",{className:"text-sm text-gray-500",children:A.email})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:"text-sm text-gray-900",children:[A.city,", ",A.state," ",A.zipCode]}),t.jsx("div",{className:"text-sm text-gray-500",children:A.address})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:A.type})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[A.isActive?t.jsx(Fe,{className:"h-4 w-4 text-green-500 mr-1"}):A.requiresReview?t.jsx(Ht,{className:"h-4 w-4 text-yellow-500 mr-1"}):t.jsx(Yt,{className:"h-4 w-4 text-red-500 mr-1"}),t.jsx("span",{className:`text-sm font-medium ${A.isActive?"text-green-800":A.requiresReview?"text-yellow-800":"text-red-800"}`,children:A.isActive?"Active":A.requiresReview?"Pending Review":"Inactive"})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[A.requiresReview&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>j(A.id),className:"text-green-600 hover:text-green-900",children:"Approve"}),t.jsx("button",{onClick:()=>b(A.id),className:"text-red-600 hover:text-red-900",children:"Reject"})]}),t.jsx("button",{onClick:()=>e(`/dashboard/hospitals/${A.id}/settings`),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Manage Settings (Pickup Locations, etc.)",children:t.jsx(Vs,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>de(A.id),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-md transition-colors",title:"Edit facility info",children:t.jsx(Ys,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>M(A.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete hospital",children:t.jsx(Xs,{className:"h-4 w-4"})})]})})]},A.id))})]})})]})})()]}),y&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Healthcare Facility"}),t.jsx("button",{onClick:W,className:"text-gray-400 hover:text-gray-600",children:t.jsx(Yt,{className:"h-6 w-6"})})]}),B&&t.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx(Yt,{className:"h-5 w-5 text-red-400"}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm font-medium text-red-800",children:B})})]})}),t.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Facility Name *"}),t.jsx("input",{type:"text",name:"name",value:C.name,onChange:oe,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address *"}),t.jsx("input",{type:"text",name:"address",value:C.address,onChange:oe,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City *"}),t.jsx("input",{type:"text",name:"city",value:C.city,onChange:oe,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"State *"}),t.jsx("input",{type:"text",name:"state",value:C.state,onChange:oe,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Zip Code *"}),t.jsx("input",{type:"text",name:"zipCode",value:C.zipCode,onChange:oe,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),t.jsx("input",{type:"tel",name:"phone",value:C.phone,onChange:oe,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),t.jsx("input",{type:"email",name:"email",value:C.email,onChange:oe,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type *"}),t.jsxs("select",{name:"type",value:C.type,onChange:oe,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"Select type"}),t.jsx("option",{value:"Hospital",children:"Hospital"}),t.jsx("option",{value:"Clinic",children:"Clinic"}),t.jsx("option",{value:"Urgent Care",children:"Urgent Care"}),t.jsx("option",{value:"Rehabilitation Facility",children:"Rehabilitation Facility"}),t.jsx("option",{value:"Doctor's Office",children:"Doctor's Office"}),t.jsx("option",{value:"Dialysis Center",children:"Dialysis Center"}),t.jsx("option",{value:"Nursing Home",children:"Nursing Home"}),t.jsx("option",{value:"Assisted Living",children:"Assisted Living"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Region *"}),t.jsx("input",{type:"text",name:"region",value:C.region,onChange:oe,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx(at,{className:"h-5 w-5 text-blue-600 mr-2"}),t.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Location Coordinates"})]}),t.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Location coordinates are required for agency distance calculations. You can either lookup coordinates automatically or enter them manually."}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("button",{type:"button",onClick:S,disabled:z||!C.address||!C.city||!C.state||!C.zipCode,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:z?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",children:t.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full"})}),"Looking up..."]}):t.jsxs(t.Fragment,{children:[t.jsx(at,{className:"h-4 w-4 mr-2"}),"Lookup Coordinates"]})}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click to automatically find coordinates from the address"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Latitude"}),t.jsx("input",{type:"number",step:"any",name:"latitude",value:C.latitude,onChange:oe,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 40.1234"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Longitude"}),t.jsx("input",{type:"number",step:"any",name:"longitude",value:C.longitude,onChange:oe,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., -78.5678"})]})]}),C.latitude&&C.longitude&&t.jsxs("div",{className:"text-sm text-green-600 bg-green-50 border border-green-200 rounded p-2",children:[" Coordinates set: ",C.latitude,", ",C.longitude]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:W,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:$,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:$?"Updating...":"Update Facility"})]})]})]})})})]})},cu=({user:e})=>{const{facilityId:s}=Ex(),n=As(),[r,a]=x.useState(null),[l,o]=x.useState(!0),[i,c]=x.useState("pickup-locations"),[m,g]=x.useState([]),[u,f]=x.useState(!1),[p,d]=x.useState(null),[h,j]=x.useState(null),[b,y]=x.useState(!1),[w,C]=x.useState(null),[D,$]=x.useState({name:"",description:"",contactPhone:"",contactEmail:"",floor:"",room:""});x.useEffect(()=>{s&&(O(),B())},[s]);const O=async()=>{var S;try{o(!0),console.log("TCC_COMMAND: Loading facility:",s);const Q=await K.get("/api/healthcare/locations/all");if((S=Q.data)!=null&&S.success){const W=Q.data.data.find(M=>M.id===s);W?(a(W),console.log("TCC_COMMAND: Facility loaded:",W)):d("Facility not found")}}catch(Q){console.error("TCC_COMMAND: Error loading facility:",Q),d("Failed to load facility information")}finally{o(!1)}},B=async()=>{var S,Q,W;try{f(!0),d(null),console.log("TCC_COMMAND: Loading pickup locations for facility:",s);const M=await K.get(`/api/tcc/pickup-locations/hospital/${s}`);console.log("TCC_COMMAND: Pickup locations response:",M.data),(S=M.data)!=null&&S.success&&Array.isArray(M.data.data)?(g(M.data.data),console.log("TCC_COMMAND: Loaded",M.data.data.length,"pickup locations")):g([])}catch(M){console.error("TCC_COMMAND: Error loading pickup locations:",M),d(((W=(Q=M.response)==null?void 0:Q.data)==null?void 0:W.error)||"Failed to load pickup locations"),g([])}finally{f(!1)}},U=S=>{const{name:Q,value:W}=S.target;$(M=>({...M,[Q]:W}))},z=()=>{C(null),$({name:"",description:"",contactPhone:"",contactEmail:"",floor:"",room:""}),y(!0),d(null),j(null)},ce=S=>{C(S),$({name:S.name,description:S.description||"",contactPhone:S.contactPhone||"",contactEmail:S.contactEmail||"",floor:S.floor||"",room:S.room||""}),y(!0),d(null),j(null)},de=async S=>{var Q,W;if(S.preventDefault(),!D.name.trim()){d("Location name is required");return}try{f(!0),d(null),console.log("TCC_COMMAND: Saving pickup location for facility:",s),w?(await K.put(`/api/tcc/pickup-locations/${w.id}`,{...D,hospitalId:s}),j("Pickup location updated successfully"),console.log("TCC_COMMAND: Pickup location updated")):(await K.post("/api/tcc/pickup-locations",{...D,hospitalId:s,isActive:!0}),j("Pickup location created successfully"),console.log("TCC_COMMAND: Pickup location created")),y(!1),C(null),await B(),setTimeout(()=>j(null),3e3)}catch(M){console.error("TCC_COMMAND: Error saving pickup location:",M),d(((W=(Q=M.response)==null?void 0:Q.data)==null?void 0:W.error)||"Failed to save pickup location")}finally{f(!1)}},oe=async S=>{var Q,W;if(confirm("Are you sure you want to delete this pickup location?"))try{f(!0),d(null),console.log("TCC_COMMAND: Deleting pickup location:",S),await K.delete(`/api/tcc/pickup-locations/${S}`),j("Pickup location deleted successfully"),await B(),setTimeout(()=>j(null),3e3)}catch(M){console.error("TCC_COMMAND: Error deleting pickup location:",M),d(((W=(Q=M.response)==null?void 0:Q.data)==null?void 0:W.error)||"Failed to delete pickup location")}finally{f(!1)}};return l?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading facility..."})]})}):r?t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsx("div",{className:"mb-6 bg-blue-50 border-2 border-blue-300 rounded-lg p-5 shadow-sm",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-12 w-12 bg-blue-600 rounded-lg flex items-center justify-center",children:t.jsx(at,{className:"h-7 w-7 text-white"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"TCC Command Center - Facility Settings"}),t.jsxs("p",{className:"text-sm text-gray-700 mt-1",children:["Managing: ",t.jsx("span",{className:"font-semibold",children:r.locationName})]}),t.jsxs("p",{className:"text-xs text-gray-600",children:[r.city,", ",r.state," ",r.zipCode,"  ",r.facilityType]})]})]}),t.jsxs("button",{onClick:()=>n("/dashboard/hospitals"),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:[t.jsx(Ss,{className:"h-4 w-4 inline mr-1"}),"Back to List"]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[t.jsxs("button",{onClick:()=>c("pickup-locations"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${i==="pickup-locations"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(De,{className:"h-4 w-4"}),"Pickup Locations",t.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs bg-orange-100 text-orange-800 rounded",children:"Required"})]}),t.jsxs("button",{onClick:()=>c("dropdowns"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${i==="dropdowns"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(Vs,{className:"h-4 w-4"}),"Dropdown Options"]}),t.jsxs("button",{onClick:()=>c("contact"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${i==="contact"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(bn,{className:"h-4 w-4"}),"Main Contact"]})]})}),t.jsxs("div",{className:"p-6",children:[h&&t.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md flex items-start",children:[t.jsx(Fe,{className:"h-5 w-5 text-green-600 mr-2 flex-shrink-0 mt-0.5"}),t.jsx("p",{className:"text-green-800",children:h})]}),p&&t.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md flex items-start",children:[t.jsx(At,{className:"h-5 w-5 text-red-600 mr-2 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-red-800",children:p}),t.jsx("button",{onClick:()=>d(null),className:"mt-2 text-sm text-red-600 hover:text-red-800 underline",children:"Dismiss"})]})]}),i==="pickup-locations"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Pickup Locations"}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Manage pickup locations within ",r.locationName," for transport requests"]})]}),t.jsxs("button",{onClick:z,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[t.jsx(rs,{className:"h-4 w-4 mr-2"}),"Add Pickup Location"]})]}),u?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Loading pickup locations..."})]}):m.length===0?t.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[t.jsx(De,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No pickup locations"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Add pickup locations to enable trip creation for this facility"}),t.jsx("div",{className:"mt-6",children:t.jsxs("button",{onClick:z,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:[t.jsx(rs,{className:"h-4 w-4 mr-2"}),"Add First Pickup Location"]})})]}):t.jsx("div",{className:"space-y-4",children:m.map(S=>t.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(De,{className:"h-5 w-5 text-blue-600 mr-2"}),t.jsx("h4",{className:"text-base font-medium text-gray-900",children:S.name}),S.isActive&&t.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-800 rounded",children:"Active"})]}),S.description&&t.jsx("p",{className:"mt-1 text-sm text-gray-600 ml-7",children:S.description}),t.jsxs("div",{className:"mt-2 ml-7 grid grid-cols-2 gap-x-4 gap-y-1 text-sm text-gray-500",children:[S.floor&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Floor:"})," ",S.floor]}),S.room&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Room:"})," ",S.room]}),S.contactPhone&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(bn,{className:"h-3 w-3 mr-1"}),S.contactPhone]}),S.contactEmail&&t.jsxs("div",{className:"flex items-center",children:[t.jsx(cl,{className:"h-3 w-3 mr-1"}),S.contactEmail]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[t.jsx("button",{onClick:()=>ce(S),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:t.jsx(Ys,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>oe(S.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:t.jsx(Xs,{className:"h-4 w-4"})})]})]})},S.id))}),b&&t.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:w?"Edit Pickup Location":"Add Pickup Location"}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["For: ",r.locationName]})]}),t.jsxs("form",{onSubmit:de,className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location Name *"}),t.jsx("input",{type:"text",name:"name",value:D.name,onChange:U,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Emergency Department, ICU, Main Entrance"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{name:"description",value:D.description,onChange:U,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Additional details about this location..."})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Floor"}),t.jsx("input",{type:"text",name:"floor",value:D.floor,onChange:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 3, Ground"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room"}),t.jsx("input",{type:"text",name:"room",value:D.room,onChange:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 301, ED-Main"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone"}),t.jsx("input",{type:"tel",name:"contactPhone",value:D.contactPhone,onChange:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"(814) 555-1234"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),t.jsx("input",{type:"email",name:"contactEmail",value:D.contactEmail,onChange:U,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"dept@hospital.com"})]})]}),t.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:()=>{y(!1),C(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:u?"Saving...":w?"Update Location":"Create Location"})]})]})]})})]}),i==="dropdowns"&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Vs,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Dropdown Options Management"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Coming soon: Manage dropdown options for this facility"})]}),i==="contact"&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(bn,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Main Contact Information"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Coming soon: Manage main contact for this facility"})]})]})]})]}):t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(At,{className:"h-5 w-5 text-red-600 mr-2"}),t.jsx("p",{className:"text-red-800",children:"Facility not found"})]})}),t.jsxs("button",{onClick:()=>n("/dashboard/hospitals"),className:"mt-4 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:[t.jsx(Ss,{className:"h-4 w-4 inline mr-1"}),"Back to Facilities"]})]})},du=()=>{console.log("TCC_DEBUG: Agencies component mounted/rendered");const[e,s]=x.useState([]),[n,r]=x.useState(!0),[a,l]=x.useState(null),[o,i]=x.useState(""),[c,m]=x.useState("all"),[g,u]=x.useState(null),[f,p]=x.useState({name:"",contactName:"",phone:"",email:"",address:"",city:"",state:"",zipCode:"",serviceType:"BLS/ALS"}),[d,h]=x.useState(!1),[j,b]=x.useState(null);x.useEffect(()=>{console.log("TCC_DEBUG: Agencies.useEffect() initial load"),y()},[]);const y=async()=>{try{r(!0),console.log("TCC_DEBUG: Agencies.loadAgencies(): calling agenciesAPI.getAll");const U=await xa.getAll();if(console.log("TCC_DEBUG: Agencies.loadAgencies(): response status",U.status),console.log("TCC_DEBUG: Agencies.loadAgencies(): response data",U.data),U.data.success){const z=U.data.data.map(ce=>({...ce,contactName:ce.contactName||"N/A",phone:ce.phone||"N/A",email:ce.email||"N/A",address:ce.address||"N/A",city:ce.city||"N/A",state:ce.state||"N/A",zipCode:ce.zipCode||"N/A",capabilities:ce.capabilities||[],serviceArea:ce.serviceArea||[],operatingHours:ce.operatingHours||null,pricingStructure:ce.pricingStructure||null,status:ce.status||"ACTIVE"}));console.log("TCC_DEBUG: Agencies.loadAgencies(): transformed count",z.length),s(z)}else l("Failed to load agencies")}catch(U){console.error("TCC_DEBUG: Agencies.loadAgencies(): error",U),l("Failed to load agencies")}finally{r(!1)}},w=U=>{u(U),p({name:U.name,contactName:U.contactName,phone:U.phone,email:U.email,address:U.address,city:U.city,state:U.state,zipCode:U.zipCode,serviceType:"BLS/ALS"}),b(null)},C=U=>{const{name:z,value:ce}=U.target;p(de=>({...de,[z]:ce}))},D=async U=>{var z,ce;if(U.preventDefault(),!!g){h(!0),b(null);try{const de=await xa.update(g.id,f);de.data.success?(s(e.map(oe=>oe.id===g.id?{...oe,...f,updatedAt:new Date().toISOString()}:oe)),u(null)):b(de.data.error||"Failed to update agency")}catch(de){console.error("Error updating agency:",de),b(((ce=(z=de.response)==null?void 0:z.data)==null?void 0:ce.error)||"Failed to update agency")}finally{h(!1)}}},$=()=>{u(null),p({name:"",contactName:"",phone:"",email:"",address:"",city:"",state:"",zipCode:"",serviceType:"BLS/ALS"}),b(null)},O=async U=>{if(window.confirm("Are you sure you want to delete this agency?"))try{await xa.delete(U),await y()}catch(z){console.error("Error deleting agency:",z),l("Failed to delete agency")}},B=e.filter(U=>{const z=U.name.toLowerCase().includes(o.toLowerCase())||U.contactName.toLowerCase().includes(o.toLowerCase())||U.city.toLowerCase().includes(o.toLowerCase()),ce=c==="all"||c==="active"&&U.isActive||c==="inactive"&&!U.isActive;return z&&ce});return n?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"EMS Agencies"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage EMS agencies and their capabilities."})]}),a&&t.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:a}),t.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(Yi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),t.jsx("input",{type:"text",placeholder:"Search agencies...",value:o,onChange:U=>i(U.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent w-full"})]})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:c,onChange:U=>m(U.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]}),t.jsxs("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/ems-register"},className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[t.jsx(rs,{className:"h-4 w-4 mr-2"}),"Add Agency"]}),t.jsx("button",{onClick:y,className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:t.jsx(xt,{className:"h-4 w-4"})})]})]}),t.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:B.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(We,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No agencies found"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:o?"Try adjusting your search terms.":"Get started by adding a new agency."})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agency"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capabilities"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(U=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{children:t.jsx("div",{className:"text-lg font-semibold text-gray-900",children:U.name})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-900",children:U.contactName}),t.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[t.jsx(bn,{className:"h-3 w-3 mr-1"}),U.phone]}),t.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[t.jsx(cl,{className:"h-3 w-3 mr-1"}),U.email]})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:"text-sm text-gray-900",children:[U.city,", ",U.state]}),t.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[t.jsx(De,{className:"h-3 w-3 mr-1"}),U.address]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"flex flex-wrap gap-1",children:U.capabilities&&U.capabilities.length>0?U.capabilities.map(z=>t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:z},z)):t.jsx("span",{className:"text-gray-500 text-sm",children:"No capabilities"})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[U.isActive?t.jsx(Fe,{className:"h-4 w-4 text-green-500 mr-2"}):t.jsx(Yt,{className:"h-4 w-4 text-red-500 mr-2"}),t.jsx("span",{className:`text-sm font-medium ${U.isActive?"text-green-600":"text-red-600"}`,children:U.isActive?"Active":"Inactive"})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx("button",{onClick:()=>w(U),className:"text-primary-600 hover:text-primary-900",children:t.jsx(Ys,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>O(U.id),className:"text-red-600 hover:text-red-900",children:t.jsx(Xs,{className:"h-4 w-4"})})]})})]},U.id))})]})})}),g&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Agency"}),t.jsx("button",{onClick:$,className:"text-gray-400 hover:text-gray-600",children:t.jsx(Yt,{className:"h-6 w-6"})})]}),j&&t.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:t.jsxs("div",{className:"flex",children:[t.jsx(Yt,{className:"h-5 w-5 text-red-400"}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm font-medium text-red-800",children:j})})]})}),t.jsxs("form",{onSubmit:D,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Agency Name"}),t.jsx("input",{type:"text",name:"name",value:f.name,onChange:C,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Name"}),t.jsx("input",{type:"text",name:"contactName",value:f.contactName,onChange:C,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),t.jsx("input",{type:"tel",name:"phone",value:f.phone,onChange:C,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),t.jsx("input",{type:"email",name:"email",value:f.email,onChange:C,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),t.jsx("input",{type:"text",name:"address",value:f.address,onChange:C,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),t.jsx("input",{type:"text",name:"city",value:f.city,onChange:C,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"State"}),t.jsx("input",{type:"text",name:"state",value:f.state,onChange:C,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ZIP Code"}),t.jsx("input",{type:"text",name:"zipCode",value:f.zipCode,onChange:C,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Service Type"}),t.jsxs("select",{name:"serviceType",value:f.serviceType,onChange:C,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500",children:[t.jsx("option",{value:"BLS",children:"BLS Only"}),t.jsx("option",{value:"ALS",children:"ALS Only"}),t.jsx("option",{value:"BLS/ALS",children:"BLS/ALS"}),t.jsx("option",{value:"Critical Care",children:"Critical Care"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:$,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:d?"Saving...":"Save Changes"})]})]})]})})})]})},ya={AMBULANCE:"Ambulance",WHEELCHAIR_VAN:"Wheelchair Van",CRITICAL_CARE:"Critical Care",OTHER:"Other"},Ql={AVAILABLE:"Available",COMMITTED:"Committed",OUT_OF_SERVICE:"Out of Service",MAINTENANCE:"Maintenance",OFF_DUTY:"Off Duty"},zy={AVAILABLE:"text-green-600 bg-green-100",COMMITTED:"text-blue-600 bg-blue-100",OUT_OF_SERVICE:"text-red-600 bg-red-100",MAINTENANCE:"text-yellow-600 bg-yellow-100",OFF_DUTY:"text-gray-600 bg-gray-100"},yh={BLS:"Basic Life Support",ALS:"Advanced Life Support",CCT:"Critical Care Transport",WHEELCHAIR:"Wheelchair Transport",STRETCHER:"Stretcher Transport",OXYGEN:"Oxygen Delivery",MONITORING:"Patient Monitoring",VENTILATOR:"Ventilator Support",CUSTOM:"Custom Capability"},uu=()=>{const[e,s]=x.useState([]),[n,r]=x.useState([]),[a,l]=x.useState(!0),[o,i]=x.useState(null),[c,m]=x.useState("all"),[g,u]=x.useState("all"),[f,p]=x.useState(null),[d,h]=x.useState({unitNumber:"",type:"AMBULANCE",capabilities:[],currentStatus:"AVAILABLE",isActive:!0}),[j,b]=x.useState(!1),[y,w]=x.useState(null),[C,D]=x.useState(null),[$,O]=x.useState(!1);x.useEffect(()=>{B()},[]);const B=async()=>{var L,R,q,k,G;try{if(l(!0),!localStorage.getItem("token")){i("No authentication token found");return}const te=await K.get("/api/tcc/agencies");if(!((L=te.data)!=null&&L.success))throw new Error(`Failed to fetch agencies: ${((R=te.data)==null?void 0:R.message)||"Unknown error"}`);const pe=te.data;console.log(" TCCUnitsManagement: Agencies response:",pe),pe.success&&r(pe.data||[]);const ke=await K.get("/api/tcc/units");if(!((q=ke.data)!=null&&q.success))throw new Error(`Failed to fetch units: ${((k=ke.data)==null?void 0:k.message)||"Unknown error"}`);const je=ke.data;console.log(" TCCUnitsManagement: Units response:",je),je.success&&(s(je.data||[]),console.log(" TCCUnitsManagement: Units count:",((G=je.data)==null?void 0:G.length)||0))}catch(Y){console.error("Error fetching data:",Y),i(Y instanceof Error?Y.message:"An error occurred")}finally{l(!1)}},U=L=>{const R=n.find(q=>q.id===L);return R?R.name:`Agency ${L}`},z=L=>{switch(L){case"AVAILABLE":return"bg-green-100 text-green-800";case"COMMITTED":return"bg-blue-100 text-blue-800";case"OUT_OF_SERVICE":return"bg-red-100 text-red-800";case"MAINTENANCE":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},ce=L=>{switch(L){case"AMBULANCE":return"bg-red-100 text-red-800";case"WHEELCHAIR_VAN":return"bg-blue-100 text-blue-800";case"CRITICAL_CARE":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},de=L=>{p(L),h({unitNumber:L.unitNumber,type:L.type,capabilities:L.capabilities,currentStatus:L.currentStatus,isActive:L.isActive}),w(null)},oe=L=>{const{name:R,value:q,type:k}=L.target;if(k==="checkbox"){const G=L.target.checked;h(Y=>({...Y,[R]:G}))}else h(G=>({...G,[R]:q}))},S=async L=>{var R,q;if(L.preventDefault(),!!f){b(!0),w(null);try{const k=await K.put(`/api/tcc/units/${f.id}`,d);k.data.success?(s(G=>G.map(Y=>Y.id===f.id?{...Y,...d}:Y)),p(null),h({unitNumber:"",type:"AMBULANCE",capabilities:[],currentStatus:"AVAILABLE",isActive:!0})):w(k.data.error||"Failed to update unit")}catch(k){console.error("Error updating unit:",k),w(((q=(R=k.response)==null?void 0:R.data)==null?void 0:q.error)||"Failed to update unit")}finally{b(!1)}}},Q=()=>{p(null),h({unitNumber:"",type:"AMBULANCE",capabilities:[],currentStatus:"AVAILABLE",isActive:!0}),w(null)},W=L=>{D(L)},M=async()=>{var L,R;if(C){O(!0);try{const q=await K.delete(`/api/tcc/units/${C}`);q.data.success?(s(k=>k.filter(G=>G.id!==C)),D(null)):i(q.data.error||"Failed to delete unit")}catch(q){console.error("Error deleting unit:",q),i(((R=(L=q.response)==null?void 0:L.data)==null?void 0:R.error)||"Failed to delete unit")}finally{O(!1)}}},T=()=>{D(null)},A=e.filter(L=>{const R=c==="all"||L.agencyId===c,q=g==="all"||L.currentStatus===g;return R&&q});return a?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsx("div",{className:"flex",children:t.jsxs("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),t.jsx("div",{className:"mt-2 text-sm text-red-700",children:t.jsx("p",{children:o})}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{onClick:B,className:"bg-red-100 px-3 py-2 rounded-md text-sm font-medium text-red-800 hover:bg-red-200",children:"Retry"})})]})})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Units Management"}),t.jsx("p",{className:"text-gray-600",children:"Manage and monitor all EMS units across agencies"})]}),t.jsx("button",{onClick:B,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Refresh"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Units"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.length})]})]})}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:t.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Available"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(L=>L.currentStatus==="AVAILABLE").length})]})]})}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Committed"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(L=>L.currentStatus==="COMMITTED").length})]})]})}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:t.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Service"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(L=>L.currentStatus==="OUT_OF_SERVICE").length})]})]})})]}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Agency"}),t.jsxs("select",{value:c,onChange:L=>m(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"All Agencies"}),n.map(L=>t.jsx("option",{value:L.id,children:L.name},L.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),t.jsxs("select",{value:g,onChange:L=>u(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"All Statuses"}),t.jsx("option",{value:"AVAILABLE",children:"Available"}),t.jsx("option",{value:"COMMITTED",children:"Committed"}),t.jsx("option",{value:"OUT_OF_SERVICE",children:"Out of Service"}),t.jsx("option",{value:"MAINTENANCE",children:"Maintenance"})]})]})]})}),t.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[t.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[t.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Units (",A.length,")"]}),t.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"All EMS units across all agencies"})]}),t.jsx("div",{className:"border-t border-gray-200",children:A.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No units found"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:c==="all"&&g==="all"?"No units have been created yet.":"No units match the current filters."})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agency"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capabilities"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trips Completed"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Update"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(L=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.unitNumber})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm text-gray-900",children:U(L.agencyId)})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ce(L.type)}`,children:L.type.replace("_"," ")})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${z(L.currentStatus)}`,children:L.currentStatus.replace("_"," ")})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"flex flex-wrap gap-1",children:L.capabilities.map((R,q)=>t.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:R},q))})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.totalTripsCompleted}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.lastStatusUpdate?new Date(L.lastStatusUpdate).toLocaleString():"Never"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx("button",{onClick:()=>de(L),className:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"Edit unit",children:t.jsx(Ys,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>W(L.id),className:"text-red-600 hover:text-red-900 p-1 rounded",title:"Delete unit",children:t.jsx(Xs,{className:"h-4 w-4"})})]})})]},L.id))})]})})})]}),f&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Unit"}),t.jsx("button",{onClick:Q,className:"text-gray-400 hover:text-gray-600",children:""})]}),t.jsxs("form",{onSubmit:S,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Unit Number"}),t.jsx("input",{type:"text",name:"unitNumber",value:d.unitNumber,onChange:oe,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"e.g., A-101",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Unit Type"}),t.jsx("select",{name:"type",value:d.type,onChange:oe,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",children:Object.entries(ya).map(([L,R])=>t.jsx("option",{value:L,children:R},L))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Capabilities"}),t.jsx("div",{className:"mt-2 space-y-2",children:Object.entries(yh).map(([L,R])=>t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:d.capabilities.includes(L),onChange:q=>{q.target.checked?h({...d,capabilities:[...d.capabilities,L]}):h({...d,capabilities:d.capabilities.filter(k=>k!==L)})},className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:R})]},L))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),t.jsxs("select",{name:"currentStatus",value:d.currentStatus,onChange:oe,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",children:[t.jsx("option",{value:"AVAILABLE",children:"Available"}),t.jsx("option",{value:"COMMITTED",children:"Committed"}),t.jsx("option",{value:"OUT_OF_SERVICE",children:"Out of Service"}),t.jsx("option",{value:"MAINTENANCE",children:"Maintenance"})]})]}),y&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:t.jsx("p",{className:"text-sm text-red-700",children:y})}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:Q,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-orange-600 text-white rounded-md text-sm font-medium hover:bg-orange-700 disabled:opacity-50",children:j?"Updating...":"Update Unit"})]})]})]})})}),C&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("div",{className:"flex items-center mb-4",children:t.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:t.jsx($p,{className:"h-6 w-6 text-red-600"})})}),t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Unit"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Are you sure you want to delete this unit? This action cannot be undone."}),t.jsxs("div",{className:"flex justify-center space-x-3",children:[t.jsx("button",{onClick:T,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md",children:"Cancel"}),t.jsx("button",{onClick:M,disabled:$,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md disabled:opacity-50",children:$?"Deleting...":"Delete Unit"})]})]})]})})})]})};class $y{constructor(){bc(this,"baseUrl","/api/optimize")}async optimizeRoutes(s){try{const n=await fetch(`${this.baseUrl}/routes`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)}),r=await n.json();if(!n.ok)throw new Error(r.error||"Failed to optimize routes");return r}catch(n){return console.error("Error optimizing routes:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}async analyzeBackhaul(s){try{const n=await fetch(`${this.baseUrl}/backhaul`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({requestIds:s})}),r=await n.json();if(!n.ok)throw new Error(r.error||"Failed to analyze backhaul opportunities");return r}catch(n){return console.error("Error analyzing backhaul:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}async getRevenueAnalytics(s="24h",n){try{const r=new URLSearchParams({timeframe:s});n&&r.append("agencyId",n);const a=await fetch(`${this.baseUrl}/revenue?${r}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),l=await a.json();if(!a.ok)throw new Error(l.error||"Failed to get revenue analytics");return l}catch(r){return console.error("Error getting revenue analytics:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async getPerformanceMetrics(s="24h",n){try{const r=new URLSearchParams({timeframe:s});n&&r.append("unitId",n);const a=await fetch(`${this.baseUrl}/performance?${r}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),l=await a.json();if(!a.ok)throw new Error(l.error||"Failed to get performance metrics");return l}catch(r){return console.error("Error getting performance metrics:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async getAvailableUnits(){try{const s=await fetch("/api/units/available",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),n=await s.json();if(!s.ok)throw new Error(n.error||"Failed to get available units");return n.data||[]}catch(s){return console.error("Error getting available units:",s),[]}}async getPendingRequests(){try{const s=await fetch("/api/trips?status=PENDING",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),n=await s.json();if(!s.ok)throw new Error(n.error||"Failed to get pending requests");return(n.data||[]).map(r=>{var a,l,o,i;return{id:r.id,patientId:r.patientId,originFacilityId:r.fromFacilityId||"unknown",destinationFacilityId:r.toFacilityId||"unknown",transportLevel:r.transportLevel||"BLS",priority:r.priority||"MEDIUM",status:r.status||"PENDING",specialRequirements:r.specialRequirements||"",requestTimestamp:new Date(r.createdAt),readyStart:new Date(r.scheduledTime||r.createdAt),readyEnd:new Date(new Date(r.scheduledTime||r.createdAt).getTime()+60*60*1e3),originLocation:{lat:((a=r.fromLocation)==null?void 0:a.lat)||40.7128,lng:((l=r.fromLocation)==null?void 0:l.lng)||-74.006},destinationLocation:{lat:((o=r.toLocation)==null?void 0:o.lat)||40.7589,lng:((i=r.toLocation)==null?void 0:i.lng)||-73.9851}}})}catch(s){return console.error("Error getting pending requests:",s),[]}}async updateOptimizationWeights(s){try{const n=await fetch(`${this.baseUrl}/weights`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({weights:s})});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to update optimization weights")}return!0}catch(n){return console.error("Error updating optimization weights:",n),!1}}async getOptimizationSettings(){try{const s=await fetch(`${this.baseUrl}/settings`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),n=await s.json();if(!s.ok)throw new Error(n.error||"Failed to get optimization settings");return n.data||{}}catch(s){return console.error("Error getting optimization settings:",s),{}}}async saveOptimizationSettings(s){try{const n=await fetch(`${this.baseUrl}/settings`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(s)});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to save optimization settings")}return!0}catch(n){return console.error("Error saving optimization settings:",n),!1}}}const ta=new $y,mu=()=>{const[e,s]=x.useState(""),[n,r]=x.useState(null),[a,l]=x.useState(null),[o,i]=x.useState(!1),[c,m]=x.useState("gps"),[g,u]=x.useState(""),[f,p]=x.useState([]),[d,h]=x.useState([]),[j,b]=x.useState([]),[y,w]=x.useState([]),[C,D]=x.useState([]),[$,O]=x.useState(null),[B,U]=x.useState(null),[z,ce]=x.useState(null),[de,oe]=x.useState(null),[S,Q]=x.useState(!1),[W,M]=x.useState(!1),[T,A]=x.useState(!1),[L,R]=x.useState(!1),[q,k]=x.useState(null),[G,Y]=x.useState(!1),[te,pe]=x.useState({weights:{deadheadMiles:.5,waitTime:.1,backhaulBonus:25,overtimeRisk:2,baseRevenue:1},constraints:{maxDeadheadMiles:50,maxWaitTime:120,maxOvertimeHours:2,maxBackhaulDistance:15,maxBackhaulTimeWindow:90},autoOptimize:!1,refreshInterval:30});x.useEffect(()=>{N(),ke(),je()},[]),x.useEffect(()=>{if(g.length>=2){const E=f.filter(se=>{var ae,ie;return se.name.toLowerCase().includes(g.toLowerCase())||((ae=se.address)==null?void 0:ae.toLowerCase().includes(g.toLowerCase()))||((ie=se.city)==null?void 0:ie.toLowerCase().includes(g.toLowerCase()))});h(E)}else h([])},[g,f]);const ke=()=>{try{const E=localStorage.getItem("tcc_optimization_settings");if(E){const se=JSON.parse(E);pe(ae=>({...ae,...se})),console.log("TCC_DEBUG: Loaded saved optimization settings")}}catch(E){console.error("TCC_DEBUG: Error loading saved settings:",E)}};x.useEffect(()=>{if(te.autoOptimize){const E=setInterval(()=>{e&&C.length>0&&J()},te.refreshInterval*1e3);return()=>clearInterval(E)}},[te.autoOptimize,te.refreshInterval,e,C]);const je=async()=>{var E,se;try{const ae=await K.get("/api/tcc/facilities");(E=ae.data)!=null&&E.success&&(p(ae.data.data||[]),console.log("TCC_DEBUG: Loaded facilities for location matching:",(se=ae.data.data)==null?void 0:se.length))}catch(ae){console.error("TCC_DEBUG: Error loading facilities:",ae)}},F=(E,se)=>{const ie=f.find(re=>{const ye=Math.abs((re.latitude||0)-E)<.001,he=Math.abs((re.longitude||0)-se)<.001;return ye&&he});ie?(l(`${ie.name} - ${ie.address||""}`),console.log("TCC_DEBUG: Location matches facility:",ie.name)):l(null)},le=()=>{if(!navigator.geolocation){k("Geolocation is not supported by your browser");return}i(!0),k(null),navigator.geolocation.getCurrentPosition(E=>{const se={lat:E.coords.latitude,lng:E.coords.longitude};r(se),F(se.lat,se.lng),i(!1),console.log("TCC_DEBUG: Got current location:",se)},E=>{i(!1);let se="Unable to get your location";switch(E.code){case E.PERMISSION_DENIED:se="Location permission denied. Please enable location access in your browser.";break;case E.POSITION_UNAVAILABLE:se="Location information is unavailable.";break;case E.TIMEOUT:se="Location request timed out.";break}k(se),console.error("TCC_DEBUG: Geolocation error:",E)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},I=E=>{E.latitude&&E.longitude&&(r({lat:E.latitude,lng:E.longitude}),l(`${E.name} - ${E.address||""}`),u(""),h([]),console.log("TCC_DEBUG: Set manual location:",E.name))},v=async E=>{try{i(!0),k(null);const ae=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(E)}&limit=1`,{headers:{"User-Agent":"TCC-RouteOptimizer"}})).json();if(ae&&ae.length>0){const ie={lat:parseFloat(ae[0].lat),lng:parseFloat(ae[0].lon)};r(ie),F(ie.lat,ie.lng),u(""),console.log("TCC_DEBUG: Geocoded address:",E,"to",ie)}else k("Could not find address. Please try a different address or select from existing facilities.")}catch(se){k("Failed to geocode address. Please select from existing facilities."),console.error("TCC_DEBUG: Geocoding error:",se)}finally{i(!1)}},N=async()=>{try{await Promise.all([P(),V(),Z()])}catch(E){console.error("TCC_DEBUG: Error loading initial data:",E),k("Failed to load initial data")}},P=async()=>{var E,se,ae;M(!0);try{if(console.log("TCC_DEBUG: Loading system-wide units for TCC optimization"),!localStorage.getItem("token"))throw new Error("No authentication token found");const re=await K.get("/api/tcc/units");if(!((E=re.data)!=null&&E.success))throw new Error(`Failed to fetch units: ${((se=re.data)==null?void 0:se.message)||"Unknown error"}`);const ye=re.data;if(console.log("TCC_DEBUG: Units API response:",ye),ye.success)console.log("TCC_DEBUG: Units loaded:",((ae=ye.data)==null?void 0:ae.length)||0),b(ye.data||[]);else throw new Error(ye.error||"Failed to load units")}catch(ie){k("Failed to load units"),console.error("TCC_DEBUG: Units loading error:",ie)}finally{M(!1)}},V=async()=>{var E,se;A(!0);try{if(console.log("TCC_DEBUG: Loading system-wide pending requests for TCC optimization"),!localStorage.getItem("token"))throw new Error("No authentication token found");const ie=await K.get("/api/trips?status=PENDING");if(!((E=ie.data)!=null&&E.success))throw new Error(`Failed to fetch pending requests: ${((se=ie.data)==null?void 0:se.message)||"Unknown error"}`);const re=ie.data;if(console.log("TCC_DEBUG: Pending requests API response:",re),re.success){const ye=(re.data||[]).map(he=>({id:he.id,patientId:he.patientId,originFacilityId:he.fromFacilityId||he.fromLocation||"Unknown",destinationFacilityId:he.toFacilityId||he.toLocation||"Unknown",transportLevel:he.transportLevel||"BLS",priority:he.priority||"MEDIUM",status:he.status||"PENDING",specialRequirements:he.specialNeeds||he.specialRequirements||"",requestTimestamp:new Date(he.requestTimestamp||he.createdAt),readyStart:new Date(he.scheduledTime||he.createdAt),readyEnd:new Date(new Date(he.scheduledTime||he.createdAt).getTime()+36e5),originLocation:{lat:he.originLatitude||40.7128,lng:he.originLongitude||-74.006},destinationLocation:{lat:he.destinationLatitude||40.7589,lng:he.destinationLongitude||-73.9851}}));console.log("TCC_DEBUG: Pending requests loaded:",ye.length),w(ye)}else throw new Error(re.error||"Failed to load pending requests")}catch(ae){k("Failed to load pending requests"),console.error("TCC_DEBUG: Requests loading error:",ae)}finally{A(!1)}},Z=async()=>{R(!0);try{console.log("TCC_DEBUG: Loading analytics data...");const[E,se]=await Promise.all([ta.getRevenueAnalytics("24h"),ta.getPerformanceMetrics("24h")]);console.log("TCC_DEBUG: Revenue analytics response:",E),console.log("TCC_DEBUG: Performance metrics response:",se),ce(E),oe(se)}catch(E){console.error("TCC_DEBUG: Analytics loading error:",E),k("Failed to load analytics data")}finally{R(!1)}},J=async()=>{if(!e||C.length===0){k("Please select a unit and at least one request");return}if(!n){k('Please set the unit location using "Use My Current Location" button');return}Q(!0),k(null);try{console.log("TCC_DEBUG: Optimizing with location:",n);const E=await ta.optimizeRoutes({unitId:e,requestIds:C,constraints:te.constraints,unitLocation:n});O(E)}catch(E){k("Failed to optimize routes"),console.error("Optimization error:",E)}finally{Q(!1)}},ee=async()=>{var E,se;if(console.log("TCC_DEBUG: handleBackhaulAnalysis called - selectedRequests:",C),console.log("TCC_DEBUG: selectedRequests.length:",C.length),console.log("TCC_DEBUG: unitLocation:",n),C.length<2){const ae=`Please select at least 2 requests for backhaul analysis (currently ${C.length} selected)`;k(ae),console.error("TCC_DEBUG: Backhaul analysis requires 2+ requests:",ae),setTimeout(()=>k(null),5e3);return}Q(!0),k(null),U(null);try{console.log("TCC_DEBUG: Starting backhaul analysis with selected requests:",C);const ae=await ta.analyzeBackhaul(C);console.log("TCC_DEBUG: Backhaul analysis response:",ae),ae.success?(U(ae),console.log("TCC_DEBUG: Backhaul analysis successful, pairs found:",((se=(E=ae.data)==null?void 0:E.pairs)==null?void 0:se.length)||0)):(k(ae.error||"Failed to analyze backhaul opportunities"),console.error("TCC_DEBUG: Backhaul analysis failed:",ae.error))}catch(ae){k("Failed to analyze backhaul opportunities"),console.error("TCC_DEBUG: Backhaul analysis error:",ae)}finally{Q(!1)}},ue=async()=>{var E,se,ae,ie;console.log("TCC_DEBUG: handleReturnTripAnalysis called"),Q(!0),k(null),U(null);try{if(console.log("TCC_DEBUG: Starting return trip analysis..."),!localStorage.getItem("token"))throw new Error("No authentication token found");const ye=await K.get("/api/optimize/return-trips");if(console.log("TCC_DEBUG: Return trips raw response:",ye),!((E=ye.data)!=null&&E.success))throw new Error(`Failed to fetch return trips: ${((se=ye.data)==null?void 0:se.message)||"Unknown error"}`);const he=ye.data;if(console.log("TCC_DEBUG: Return trips response data:",he),console.log("TCC_DEBUG: Return trips found:",((ie=(ae=he.data)==null?void 0:ae.returnTrips)==null?void 0:ie.length)||0),he.success){const Ne={success:!0,data:{pairs:he.data.returnTrips||[],statistics:he.data.statistics||{},recommendations:he.data.recommendations||[]}};U(Ne),console.log("TCC_DEBUG: Return trip analysis successful, displaying results")}else throw new Error(he.error||"Failed to load return trips")}catch(re){k("Failed to analyze return trip opportunities"),console.error("TCC_DEBUG: Return trip analysis error:",re)}finally{Q(!1),console.log("TCC_DEBUG: handleReturnTripAnalysis completed")}},H=E=>{D(se=>{const ae=se.includes(E)?se.filter(ie=>ie!==E):[...se,E];return console.log("TCC_DEBUG: Request selection changed:",{requestId:E,action:se.includes(E)?"removed":"added",newSelectionCount:ae.length,newSelection:ae}),ae})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Route Optimization"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Optimize routes across all agencies and units in the system."})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("button",{onClick:()=>Y(!G),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[t.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Settings"]}),t.jsxs("button",{onClick:N,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[t.jsx(xt,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),G&&t.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Optimization Settings"}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Auto-Optimization"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Auto-optimize every ",te.refreshInterval," seconds"]}),t.jsx("input",{type:"checkbox",checked:te.autoOptimize,onChange:E=>pe(se=>({...se,autoOptimize:E.target.checked})),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Refresh Interval (seconds)"}),t.jsx("input",{type:"number",value:te.refreshInterval,onChange:E=>pe(se=>({...se,refreshInterval:parseInt(E.target.value)||30})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",min:"10",max:"300"})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Optimization Weights"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deadhead Miles Weight"}),t.jsx("input",{type:"number",step:"0.1",value:te.weights.deadheadMiles,onChange:E=>pe(se=>({...se,weights:{...se.weights,deadheadMiles:parseFloat(E.target.value)||.5}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",min:"0",max:"2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wait Time Weight"}),t.jsx("input",{type:"number",step:"0.1",value:te.weights.waitTime,onChange:E=>pe(se=>({...se,weights:{...se.weights,waitTime:parseFloat(E.target.value)||.1}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",min:"0",max:"1"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backhaul Bonus ($)"}),t.jsx("input",{type:"number",step:"5",value:te.weights.backhaulBonus,onChange:E=>pe(se=>({...se,weights:{...se.weights,backhaulBonus:parseFloat(E.target.value)||25}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",min:"0",max:"100"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Overtime Risk Weight"}),t.jsx("input",{type:"number",step:"0.5",value:te.weights.overtimeRisk,onChange:E=>pe(se=>({...se,weights:{...se.weights,overtimeRisk:parseFloat(E.target.value)||2}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",min:"0",max:"5"})]})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Constraints"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Deadhead Miles"}),t.jsx("input",{type:"number",value:te.constraints.maxDeadheadMiles,onChange:E=>pe(se=>({...se,constraints:{...se.constraints,maxDeadheadMiles:parseInt(E.target.value)||50}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",min:"10",max:"200"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Wait Time (minutes)"}),t.jsx("input",{type:"number",value:te.constraints.maxWaitTime,onChange:E=>pe(se=>({...se,constraints:{...se.constraints,maxWaitTime:parseInt(E.target.value)||120}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",min:"30",max:"300"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Overtime Hours"}),t.jsx("input",{type:"number",value:te.constraints.maxOvertimeHours,onChange:E=>pe(se=>({...se,constraints:{...se.constraints,maxOvertimeHours:parseInt(E.target.value)||2}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",min:"0",max:"8"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Backhaul Distance (miles)"}),t.jsx("input",{type:"number",value:te.constraints.maxBackhaulDistance,onChange:E=>pe(se=>({...se,constraints:{...se.constraints,maxBackhaulDistance:parseInt(E.target.value)||15}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",min:"5",max:"50"})]})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{onClick:()=>{localStorage.setItem("tcc_optimization_settings",JSON.stringify(te)),Y(!1)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700",children:[t.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Step 1: Select Unit"}),W?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx(xt,{className:"h-6 w-6 animate-spin text-orange-600"}),t.jsx("span",{className:"ml-2 text-gray-600",children:"Loading units..."})]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("select",{value:e,onChange:E=>{s(E.target.value),r(null)},className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",children:[t.jsx("option",{value:"",children:"Select a unit..."}),j&&j.length>0?j.map(E=>t.jsxs("option",{value:E.id,children:[E.unitNumber||"Unknown"," (",E.type||"Unknown",") - ",E.currentStatus||"Unknown"]},E.id)):t.jsx("option",{disabled:!0,children:"No units available"})]}),e&&t.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsxs("h4",{className:"text-sm font-medium text-blue-900 mb-3 flex items-center",children:[t.jsx(De,{className:"h-4 w-4 mr-2"}),"Step 2: Set Current Location"]}),n?t.jsx("div",{className:"space-y-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("p",{className:"text-sm font-medium text-green-800 flex items-center",children:[t.jsx(Fe,{className:"h-4 w-4 mr-2 text-green-600"}),"Location Set"]}),a?t.jsxs("div",{className:"mt-1",children:[t.jsxs("p",{className:"text-sm font-medium text-blue-900",children:[" ",a]}),t.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:["Lat: ",n.lat.toFixed(6),", Lng: ",n.lng.toFixed(6)]})]}):t.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Lat: ",n.lat.toFixed(6),", Lng: ",n.lng.toFixed(6)]})]}),t.jsx("button",{onClick:()=>{r(null),l(null),u("")},className:"text-sm text-blue-600 hover:text-blue-800",children:"Change"})]})}):t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex space-x-2 mb-3",children:[t.jsxs("button",{onClick:()=>m("gps"),className:`flex-1 px-3 py-2 rounded-md text-sm font-medium ${c==="gps"?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300"}`,children:[t.jsx(ql,{className:"h-4 w-4 inline mr-1"}),"GPS (Field)"]}),t.jsxs("button",{onClick:()=>m("manual"),className:`flex-1 px-3 py-2 rounded-md text-sm font-medium ${c==="manual"?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300"}`,children:[t.jsx(De,{className:"h-4 w-4 inline mr-1"}),"Manual (Dispatch)"]})]}),c==="gps"?t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-sm text-blue-700",children:"Click the button below to use your current GPS location as the starting point for this unit."}),t.jsx("button",{onClick:le,disabled:o,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?t.jsxs(t.Fragment,{children:[t.jsx(xt,{className:"h-4 w-4 mr-2 animate-spin"}),"Getting Location..."]}):t.jsxs(t.Fragment,{children:[t.jsx(ql,{className:"h-4 w-4 mr-2"}),"Use My Current Location"]})}),t.jsx("p",{className:"text-xs text-blue-600",children:" Your browser will ask for permission to access your location"})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsx("p",{className:"text-sm text-blue-700",children:"Search for a facility or enter an address to set the unit's location."}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Search facilities or enter address...",value:g,onChange:E=>u(E.target.value),onKeyDown:E=>{E.key==="Enter"&&g&&d.length===0&&v(g)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}),d.length>0&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:d.map(E=>t.jsxs("button",{onClick:()=>I(E),className:"w-full text-left px-3 py-2 hover:bg-blue-50 focus:bg-blue-50 focus:outline-none",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),t.jsxs("div",{className:"text-xs text-gray-500",children:[E.address||""," ",E.city?` ${E.city}`:""]})]},E.id))})]}),g&&d.length===0&&t.jsx("button",{onClick:()=>v(g),disabled:o,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:o?t.jsxs(t.Fragment,{children:[t.jsx(xt,{className:"h-4 w-4 mr-2 animate-spin"}),"Finding Address..."]}):t.jsxs(t.Fragment,{children:[t.jsx(De,{className:"h-4 w-4 mr-2"}),"Use This Address"]})}),t.jsx("p",{className:"text-xs text-blue-600",children:" Start typing to see matching facilities, or enter any address"})]})]})]})]})]}),t.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Step 3: Select Requests"}),T?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx(xt,{className:"h-6 w-6 animate-spin text-orange-600"}),t.jsx("span",{className:"ml-2 text-gray-600",children:"Loading requests..."})]}):t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:y&&y.length>0?y.map(E=>t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:C.includes(E.id),onChange:()=>H(E.id),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),t.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:[E.patientId||"Unknown"," - ",E.originFacilityName||E.originFacilityId||"Unknown","  ",E.destinationFacilityName||E.destinationFacilityId||"Unknown"]})]},E.id)):t.jsx("p",{className:"text-sm text-gray-500",children:"No pending requests available"})})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex space-x-4",children:[t.jsxs("button",{onClick:J,disabled:S||!e||!n||C.length===0,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",title:e?n?C.length===0?"Step 3: Select at least one request":"Optimize routes for selected unit and requests":"Step 2: Set unit location using GPS":"Step 1: Select a unit",children:[S?t.jsx(xt,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(Ko,{className:"h-4 w-4 mr-2"}),"Optimize Routes"]}),t.jsxs("button",{onClick:ee,disabled:S||!e||!n||C.length<2,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",title:e?n?C.length<2?`Step 3: Select at least 2 requests (currently ${C.length} selected)`:"Find backhaul opportunities between selected requests":"Step 2: Set unit location using GPS":"Step 1: Select a unit",children:[t.jsx(ql,{className:"h-4 w-4 mr-2"}),"Backhaul Analysis (",C.length," selected)"]}),t.jsxs("button",{onClick:ue,disabled:S,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",title:"Find return trip opportunities (e.g., Pittsburgh  Altoona  Pittsburgh)",children:[S?t.jsx(xt,{className:"h-4 w-4 mr-2 animate-spin"}):t.jsx(Ko,{className:"h-4 w-4 mr-2"}),"Find Return Trips"]})]}),C.length>0&&t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Fe,{className:"h-5 w-5 text-blue-500 mr-2"}),t.jsxs("span",{className:"text-sm text-blue-700",children:[C.length," request",C.length!==1?"s":""," selected",C.length===1&&" - Select at least 1 more for backhaul analysis"]})]})})]}),q&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx(At,{className:"h-5 w-5 text-red-400"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),t.jsx("div",{className:"mt-2 text-sm text-red-700",children:t.jsx("p",{children:q})})]})]})}),$&&$.success&&$.data&&t.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Optimization Results"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(e0,{className:"h-5 w-5 text-green-600"}),t.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Total Revenue"})]}),t.jsxs("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:["$",typeof $.data.totalRevenue=="number"?$.data.totalRevenue.toFixed(2):"0.00"]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(De,{className:"h-5 w-5 text-blue-600"}),t.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Total Distance"})]}),t.jsxs("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:[typeof $.data.totalDeadheadMiles=="number"?$.data.totalDeadheadMiles.toFixed(1):"0.0"," mi"]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Ht,{className:"h-5 w-5 text-orange-600"}),t.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Total Wait Time"})]}),t.jsxs("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:[typeof $.data.totalWaitTime=="number"?$.data.totalWaitTime.toFixed(0):"0"," min"]})]})]}),$.data.optimizedRequests&&$.data.optimizedRequests.length>0&&t.jsxs("div",{className:"mt-6",children:[t.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Optimized Requests"}),t.jsx("div",{className:"space-y-2",children:$.data.optimizedRequests.map((E,se)=>t.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Request ",se+1]}),t.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["Score: ",typeof E.score=="number"?E.score.toFixed(2):"0.00"]})]}),t.jsxs("div",{className:"text-sm text-gray-600",children:["Revenue: $",typeof E.revenue=="number"?E.revenue.toFixed(2):"0.00"," | Deadhead: ",typeof E.deadheadMiles=="number"?E.deadheadMiles.toFixed(1):"0.0"," mi"]})]},se))})]})]}),B&&B.success&&B.data&&t.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Backhaul Analysis"}),t.jsxs("div",{className:"space-y-4",children:[B.data.pairs&&B.data.pairs.map((E,se)=>{var ae,ie;return t.jsx("div",{className:"border rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[((ae=E.request1)==null?void 0:ae.patientId)||"Unknown","  ",((ie=E.request2)==null?void 0:ie.patientId)||"Unknown"]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Potential savings: $",typeof E.revenueBonus=="number"?E.revenueBonus.toFixed(2):"0.00"]}),t.jsxs("p",{className:"text-xs text-gray-400",children:["Distance: ",typeof E.distance=="number"?E.distance.toFixed(1):"0.0"," mi | Time Window: ",E.timeWindow||"0"," min | Efficiency: ",typeof E.efficiency=="number"?(E.efficiency*100).toFixed(1):"0.0","%"]})]}),t.jsx(Fe,{className:"h-5 w-5 text-green-500"})]})},se)}),(!B.data.pairs||B.data.pairs.length===0)&&t.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No backhaul opportunities found"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"System Performance Analytics"}),L?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx(xt,{className:"h-6 w-6 animate-spin text-orange-600"}),t.jsx("span",{className:"ml-2 text-gray-600",children:"Loading analytics..."})]}):t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[z&&z.success&&z.data&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"System Revenue (24h)"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Total Revenue:"}),t.jsxs("span",{className:"text-sm font-medium",children:["$",typeof z.data.totalRevenue=="number"?z.data.totalRevenue.toFixed(2):"0.00"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Revenue per Hour:"}),t.jsxs("span",{className:"text-sm font-medium",children:["$",typeof z.data.revenuePerHour=="number"?z.data.revenuePerHour.toFixed(2):"0.00"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Loaded Mile Ratio:"}),t.jsxs("span",{className:"text-sm font-medium",children:[typeof z.data.loadedMileRatio=="number"?(z.data.loadedMileRatio*100).toFixed(1):"0.0","%"]})]})]})]}),de&&de.success&&de.data&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"System Performance (24h)"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Total Trips:"}),t.jsx("span",{className:"text-sm font-medium",children:de.data.totalTrips||0})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Average Response Time:"}),t.jsxs("span",{className:"text-sm font-medium",children:[typeof de.data.averageResponseTime=="number"?de.data.averageResponseTime.toFixed(1):"0.0"," min"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Efficiency:"}),t.jsxs("span",{className:"text-sm font-medium",children:[typeof de.data.efficiency=="number"?(de.data.efficiency*100).toFixed(1):"0.0","%"]})]})]})]})]})]})]})},pu=()=>{const[e,s]=x.useState({baseRates:{BLS:150,ALS:250,CCT:400},perMileRates:{BLS:2.5,ALS:3.75,CCT:5},priorityMultipliers:{LOW:1,MEDIUM:1.1,HIGH:1.25,URGENT:1.5},specialSurcharge:50,insuranceRates:{medicare:{BLS:120,ALS:200,CCT:350},medicaid:{BLS:100,ALS:180,CCT:300},private:{BLS:180,ALS:300,CCT:450},selfPay:{BLS:200,ALS:350,CCT:500}},customInsuranceCompanies:[]}),[n,r]=x.useState(null);x.useEffect(()=>{const l=localStorage.getItem("tcc_revenue_settings");if(l){const o=JSON.parse(l);s(i=>({...i,...o}))}},[]);const a=()=>{const l={transportLevel:"ALS",priority:"MEDIUM",distanceMiles:15,specialRequirements:!1,insuranceCompany:"medicare"},o=e.baseRates[l.transportLevel],i=e.perMileRates[l.transportLevel],c=e.priorityMultipliers[l.priority],m=e.insuranceRates[l.insuranceCompany][l.transportLevel],g=l.specialRequirements?e.specialSurcharge:0,u=o*c+g,f=(o+i*l.distanceMiles+g)*c,p=(m+i*l.distanceMiles+g)*c;r({sampleTrip:l,standardRevenue:Math.round(u*100)/100,mileageRevenue:Math.round(f*100)/100,insuranceRevenue:Math.round(p*100)/100})};return x.useEffect(()=>{a()},[e]),t.jsxs("div",{className:"space-y-8",children:[n&&t.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg shadow-md border border-blue-100",children:[t.jsx("div",{className:"px-6 py-4 border-b border-blue-200",children:t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Revenue Preview"})}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-md border border-gray-200 shadow-sm",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Standard Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",n.standardRevenue]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Base rate  priority"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-md border border-gray-200 shadow-sm",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Mileage Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",n.mileageRevenue]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Base + (per mile  distance)"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-md border border-gray-200 shadow-sm",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Insurance Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",n.insuranceRevenue]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Insurance rate + mileage"})]})]})})]}),t.jsx(Hy,{revenueSettings:e}),t.jsx(Gy,{revenueSettings:e,setRevenueSettings:s})]})},Gy=({revenueSettings:e,setRevenueSettings:s})=>{const[n,r]=x.useState({name:"",rates:{BLS:"",ALS:"",CCT:""}}),[a,l]=x.useState(null),[o,i]=x.useState({name:"",rates:{BLS:"",ALS:"",CCT:""}}),c=f=>{const p=e.customInsuranceCompanies[f];l(f),i({name:p.name,rates:{BLS:p.rates.BLS.toString(),ALS:p.rates.ALS.toString(),CCT:p.rates.CCT.toString()}})},m=()=>{if(!o.name.trim()){alert("Please enter a company name");return}s(f=>({...f,customInsuranceCompanies:f.customInsuranceCompanies.map((p,d)=>d===a?{name:o.name,rates:{BLS:parseFloat(o.rates.BLS)||0,ALS:parseFloat(o.rates.ALS)||0,CCT:parseFloat(o.rates.CCT)||0}}:p)})),l(null),i({name:"",rates:{BLS:"",ALS:"",CCT:""}}),alert(`Insurance company "${o.name}" updated successfully!`)},g=()=>{l(null),i({name:"",rates:{BLS:"",ALS:"",CCT:""}})},u=f=>{const{name:p,value:d}=f.target,[h,j]=p.split(".");s(j?b=>({...b,[h]:{...b[h],[j]:parseFloat(d)||0}}):b=>({...b,[p]:parseFloat(d)||0}))};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"System Revenue Settings"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Configure global pricing rates for revenue calculations"})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Base Rates by Transport Level"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"BLS Base Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:e.baseRates.BLS,onChange:u,name:"baseRates.BLS",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ALS Base Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:e.baseRates.ALS,onChange:u,name:"baseRates.ALS",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CCT Base Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:e.baseRates.CCT,onChange:u,name:"baseRates.CCT",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Per Mile Rates"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"BLS Per Mile ($)"}),t.jsx("input",{type:"number",step:"0.01",value:e.perMileRates.BLS,onChange:u,name:"perMileRates.BLS",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ALS Per Mile ($)"}),t.jsx("input",{type:"number",step:"0.01",value:e.perMileRates.ALS,onChange:u,name:"perMileRates.ALS",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CCT Per Mile ($)"}),t.jsx("input",{type:"number",step:"0.01",value:e.perMileRates.CCT,onChange:u,name:"perMileRates.CCT",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]})]}),t.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Surcharges"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Configure priority level and special requirement surcharges"})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"Priority Level Surcharges"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Set percentage surcharge for each priority level (0% = no surcharge, 10% = adds 10% to base rate)"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Low Priority (%)"}),t.jsx("input",{type:"number",step:"1",value:e.priorityMultipliers.LOW===1?0:((e.priorityMultipliers.LOW-1)*100).toFixed(0),onChange:f=>{const d=1+(parseFloat(f.target.value)||0)/100;s(h=>({...h,priorityMultipliers:{...h.priorityMultipliers,LOW:d}}))},className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Medium Priority (%)"}),t.jsx("input",{type:"number",step:"1",value:e.priorityMultipliers.MEDIUM===1?0:((e.priorityMultipliers.MEDIUM-1)*100).toFixed(0),onChange:f=>{const d=1+(parseFloat(f.target.value)||0)/100;s(h=>({...h,priorityMultipliers:{...h.priorityMultipliers,MEDIUM:d}}))},className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"High Priority (%)"}),t.jsx("input",{type:"number",step:"1",value:e.priorityMultipliers.HIGH===1?0:((e.priorityMultipliers.HIGH-1)*100).toFixed(0),onChange:f=>{const d=1+(parseFloat(f.target.value)||0)/100;s(h=>({...h,priorityMultipliers:{...h.priorityMultipliers,HIGH:d}}))},className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Urgent Priority (%)"}),t.jsx("input",{type:"number",step:"1",value:e.priorityMultipliers.URGENT===1?0:((e.priorityMultipliers.URGENT-1)*100).toFixed(0),onChange:f=>{const d=1+(parseFloat(f.target.value)||0)/100;s(h=>({...h,priorityMultipliers:{...h.priorityMultipliers,URGENT:d}}))},className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]}),t.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"Special Requirements Surcharge"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Fixed dollar amount added for trips with special requirements"}),t.jsxs("div",{className:"max-w-xs",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Special Surcharge ($)"}),t.jsx("input",{type:"number",step:"0.01",value:e.specialSurcharge,onChange:f=>{s(p=>({...p,specialSurcharge:parseFloat(f.target.value)||0}))},className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]})]}),t.jsx("div",{className:"mt-6 flex justify-end",children:t.jsx("button",{onClick:()=>{localStorage.setItem("tcc_revenue_settings",JSON.stringify(e)),alert("Revenue settings saved!")},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Save Revenue Settings"})})]})]}),t.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Insurance Company Management"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Add custom insurance companies with their specific rates"})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg",children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Add New Insurance Company"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Name"}),t.jsx("input",{type:"text",value:n.name,onChange:f=>r(p=>({...p,name:f.target.value})),placeholder:"e.g., Blue Cross Blue Shield",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"BLS Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:n.rates.BLS,onChange:f=>r(p=>({...p,rates:{...p.rates,BLS:f.target.value}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ALS Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:n.rates.ALS,onChange:f=>r(p=>({...p,rates:{...p.rates,ALS:f.target.value}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CCT Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:n.rates.CCT,onChange:f=>r(p=>({...p,rates:{...p.rates,CCT:f.target.value}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{onClick:()=>{if(!n.name.trim()){alert("Please enter a company name");return}s(f=>({...f,customInsuranceCompanies:[...f.customInsuranceCompanies,{name:n.name,rates:{BLS:parseFloat(n.rates.BLS)||0,ALS:parseFloat(n.rates.ALS)||0,CCT:parseFloat(n.rates.CCT)||0}}]})),r({name:"",rates:{BLS:"",ALS:"",CCT:""}}),alert(`Insurance company "${n.name}" added successfully!`)},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Add Insurance Company"})})]}),e.customInsuranceCompanies.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Custom Insurance Companies"}),t.jsx("div",{className:"space-y-3",children:e.customInsuranceCompanies.map((f,p)=>t.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:a===p?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Name"}),t.jsx("input",{type:"text",value:o.name,onChange:d=>i(h=>({...h,name:d.target.value})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"BLS Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:o.rates.BLS,onChange:d=>i(h=>({...h,rates:{...h.rates,BLS:d.target.value}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ALS Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:o.rates.ALS,onChange:d=>i(h=>({...h,rates:{...h.rates,ALS:d.target.value}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CCT Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:o.rates.CCT,onChange:d=>i(h=>({...h,rates:{...h.rates,CCT:d.target.value}})),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:m,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Save Changes"}),t.jsx("button",{onClick:g,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"})]})]}):t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h5",{className:"font-medium text-gray-900",children:f.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:["BLS: $",f.rates.BLS," | ALS: $",f.rates.ALS," | CCT: $",f.rates.CCT]})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>c(p),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Edit"}),t.jsx("button",{onClick:()=>{confirm(`Delete insurance company "${f.name}"?`)&&s(d=>({...d,customInsuranceCompanies:d.customInsuranceCompanies.filter((h,j)=>j!==p)}))},className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]})},p))})]})]})]})]})},Hy=({revenueSettings:e})=>{var de,oe;const[s,n]=x.useState({origin:"",destination:"",originCoordinates:null,destinationCoordinates:null,transportLevel:"ALS",priority:"MEDIUM",distanceMiles:0,specialRequirements:!1,insuranceCompany:"medicare"}),[r,a]=x.useState([]),[l,o]=x.useState(!1),[i,c]=x.useState(""),[m,g]=x.useState(""),[u,f]=x.useState(null);x.useEffect(()=>{p()},[]);const p=async()=>{var S;try{o(!0);const Q=await K.get("/api/public/hospitals");if((S=Q.data)!=null&&S.success){const W=Q.data.data||[];a(W),console.log("TCC_DEBUG: Loaded facilities for trip calculator:",W.length),console.log("TCC_DEBUG: First facility with coords:",W.find(M=>M.latitude&&M.longitude)),console.log("TCC_DEBUG: Facilities without coords:",W.filter(M=>!M.latitude||!M.longitude).map(M=>M.name))}}catch(Q){console.error("Error loading facilities:",Q)}finally{o(!1)}},d=(S,Q,W,M)=>{const A=(W-S)*Math.PI/180,L=(M-Q)*Math.PI/180,R=Math.sin(A/2)*Math.sin(A/2)+Math.cos(S*Math.PI/180)*Math.cos(W*Math.PI/180)*Math.sin(L/2)*Math.sin(L/2);return 3959*(2*Math.atan2(Math.sqrt(R),Math.sqrt(1-R)))},h=async S=>(console.log("TCC_DEBUG: Geocoding address:",S),null),j=S=>{const{name:Q,value:W,type:M}=S.target;n(T=>({...T,[Q]:M==="checkbox"?S.target.checked:M==="number"?parseFloat(W)||0:W}))},b=(S,Q)=>{const W=r.find(M=>M.id===Q);if(W){console.log("TCC_DEBUG: Selected facility:",W.name,"Lat:",W.latitude,"Lng:",W.longitude);const M=W.latitude&&W.longitude?{lat:parseFloat(W.latitude),lng:parseFloat(W.longitude)}:null;console.log("TCC_DEBUG: New coordinates for",S,":",M),n(T=>{const A={...T,[S]:W.name,[`${S}Coordinates`]:M};if(S==="destination"&&T.originCoordinates&&M){const L=d(T.originCoordinates.lat,T.originCoordinates.lng,M.lat,M.lng);console.log("TCC_DEBUG: Calculated distance (destination selected):",L),A.distanceMiles=Math.round(L*10)/10}else if(S==="origin"&&T.destinationCoordinates&&M){const L=d(M.lat,M.lng,T.destinationCoordinates.lat,T.destinationCoordinates.lng);console.log("TCC_DEBUG: Calculated distance (origin selected):",L),A.distanceMiles=Math.round(L*10)/10}return A}),S==="origin"&&c(""),S==="destination"&&g("")}},y=async(S,Q)=>{S==="origin"?(c(Q),n(M=>({...M,origin:Q}))):(g(Q),n(M=>({...M,destination:Q})));const W=await h(Q);if(W){if(n(M=>({...M,[`${S}Coordinates`]:W})),S==="destination"&&s.originCoordinates){const M=d(s.originCoordinates.lat,s.originCoordinates.lng,W.lat,W.lng);n(T=>({...T,distanceMiles:Math.round(M*10)/10}))}else if(S==="origin"&&s.destinationCoordinates){const M=d(W.lat,W.lng,s.destinationCoordinates.lat,s.destinationCoordinates.lng);n(T=>({...T,distanceMiles:Math.round(M*10)/10}))}}},w=()=>{if(!s.origin||!s.destination||s.distanceMiles<=0){alert("Please fill in all required fields: Origin, Destination, and Distance");return}const S=e.baseRates[s.transportLevel],Q=e.perMileRates[s.transportLevel],W=e.priorityMultipliers[s.priority];let M;if(s.insuranceCompany.startsWith("custom-")){const q=parseInt(s.insuranceCompany.replace("custom-",""));M=e.customInsuranceCompanies[q].rates[s.transportLevel]}else M=e.insuranceRates[s.insuranceCompany][s.transportLevel];const T=s.specialRequirements?e.specialSurcharge:0,A=S*W+T,L=(S+Q*s.distanceMiles+T)*W,R=(M+Q*s.distanceMiles+T)*W;f({standardRevenue:Math.round(A*100)/100,mileageRevenue:Math.round(L*100)/100,insuranceRevenue:Math.round(R*100)/100,tripDetails:{...s}})},C=()=>{n({origin:"",destination:"",originCoordinates:null,destinationCoordinates:null,transportLevel:"ALS",priority:"MEDIUM",distanceMiles:0,specialRequirements:!1,insuranceCompany:"medicare"}),c(""),g(""),f(null)},D=()=>{if(!s.origin||!s.destination){alert("Please enter origin and destination to save this route");return}const S=`${s.origin}  ${s.destination}`,Q=JSON.parse(localStorage.getItem("tcc_saved_routes")||"[]");if(Q.find(M=>M.name===S)){if(confirm(`Route "${S}" already exists. Overwrite it?`)){const M=Q.map(T=>T.name===S?{...T,tripData:s,lastUpdated:new Date().toISOString()}:T);localStorage.setItem("tcc_saved_routes",JSON.stringify(M)),alert(`Route "${S}" updated successfully!`),ce()}}else{const M={name:S,tripData:{...s},createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()};Q.push(M),localStorage.setItem("tcc_saved_routes",JSON.stringify(Q)),alert(`Route "${S}" saved successfully!`),ce()}},$=()=>JSON.parse(localStorage.getItem("tcc_saved_routes")||"[]"),O=S=>{n(S.tripData),f(null)},B=S=>{if(confirm(`Delete route "${S}"?`)){const W=JSON.parse(localStorage.getItem("tcc_saved_routes")||"[]").filter(M=>M.name!==S);localStorage.setItem("tcc_saved_routes",JSON.stringify(W)),alert(`Route "${S}" deleted successfully!`),f(null),n({...s})}},[U,z]=Sr.useState(0),ce=()=>{z(S=>S+1)};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Saved Routes"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Load previously saved routes for quick calculations"})]}),t.jsx("button",{onClick:ce,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Refresh"})]}),t.jsx("div",{className:"p-6",children:$().length>0?t.jsx("div",{className:"space-y-2",children:$().map((S,Q)=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md hover:bg-gray-50",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:S.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:[S.tripData.origin,"  ",S.tripData.destination,"  ",S.tripData.transportLevel,"  ",S.tripData.priority,"  ",S.tripData.distanceMiles," miles"]})]}),t.jsxs("div",{className:"flex space-x-2 ml-4",children:[t.jsx("button",{onClick:()=>O(S),className:"px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"Load"}),t.jsx("button",{onClick:()=>B(S.name),className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]},Q))},U):t.jsx("p",{className:"text-gray-500 text-center py-4",children:"No saved routes yet. Create and save a route to see it here."})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Trip Revenue Calculator"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Calculate revenue for a specific trip"})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Origin *"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("select",{value:((de=r.find(S=>S.name===s.origin))==null?void 0:de.id)||"",onChange:S=>b("origin",S.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",disabled:l,children:[t.jsx("option",{value:"",children:"Select from known facilities..."}),r.map(S=>t.jsxs("option",{value:S.id,children:[S.name," - ",S.city,", ",S.state]},S.id))]}),t.jsx("div",{className:"text-sm text-gray-500",children:"OR"}),t.jsx("input",{type:"text",value:i,onChange:S=>y("origin",S.target.value),placeholder:"Enter custom address (GPS coordinates will be looked up)",className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),s.originCoordinates&&t.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md",children:t.jsxs("p",{className:"text-xs font-medium text-green-800",children:[" GPS Coordinates: ",s.originCoordinates.lat.toFixed(4),", ",s.originCoordinates.lng.toFixed(4)]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Destination *"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("select",{value:((oe=r.find(S=>S.name===s.destination))==null?void 0:oe.id)||"",onChange:S=>b("destination",S.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",disabled:l,children:[t.jsx("option",{value:"",children:"Select from known facilities..."}),r.map(S=>t.jsxs("option",{value:S.id,children:[S.name," - ",S.city,", ",S.state]},S.id))]}),t.jsx("div",{className:"text-sm text-gray-500",children:"OR"}),t.jsx("input",{type:"text",value:m,onChange:S=>y("destination",S.target.value),placeholder:"Enter custom address (GPS coordinates will be looked up)",className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),s.destinationCoordinates&&t.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md",children:t.jsxs("p",{className:"text-xs font-medium text-green-800",children:[" GPS Coordinates: ",s.destinationCoordinates.lat.toFixed(4),", ",s.destinationCoordinates.lng.toFixed(4)]})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Distance (miles) *",s.originCoordinates&&s.destinationCoordinates&&t.jsx("span",{className:"ml-2 text-xs text-green-600 font-normal",children:" Auto-calculated"})]}),t.jsx("input",{type:"number",step:"0.1",name:"distanceMiles",value:s.distanceMiles||"",onChange:j,disabled:!!(s.originCoordinates&&s.destinationCoordinates),className:`mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 ${s.originCoordinates&&s.destinationCoordinates?"bg-gray-100 cursor-not-allowed":""}`,placeholder:s.originCoordinates&&s.destinationCoordinates?"":"Select facilities with GPS coordinates"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transport Level"}),t.jsxs("select",{name:"transportLevel",value:s.transportLevel,onChange:j,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"BLS",children:"BLS"}),t.jsx("option",{value:"ALS",children:"ALS"}),t.jsx("option",{value:"CCT",children:"CCT"})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Priority Level"}),t.jsxs("select",{name:"priority",value:s.priority,onChange:j,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"LOW",children:"Low"}),t.jsx("option",{value:"MEDIUM",children:"Medium"}),t.jsx("option",{value:"HIGH",children:"High"}),t.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Insurance Company"}),t.jsxs("select",{name:"insuranceCompany",value:s.insuranceCompany,onChange:j,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"medicare",children:"Medicare"}),t.jsx("option",{value:"medicaid",children:"Medicaid"}),t.jsx("option",{value:"private",children:"Private Insurance"}),t.jsx("option",{value:"selfPay",children:"Self Pay"}),e.customInsuranceCompanies.map((S,Q)=>t.jsxs("option",{value:`custom-${Q}`,children:[S.name," (Custom)"]},`custom-${Q}`))]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",name:"specialRequirements",checked:s.specialRequirements,onChange:j,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsxs("label",{className:"ml-2 block text-sm text-gray-700",children:["Special Requirements (adds $",e.specialSurcharge," surcharge)"]})]}),t.jsxs("div",{className:"pt-4 space-y-3",children:[t.jsx("button",{onClick:w,className:"w-full px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Calculate Revenue"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("button",{onClick:D,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Save Route"}),t.jsx("button",{onClick:C,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Reset"})]})]})]})]}),u&&t.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg",children:[t.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Revenue Calculation Results"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Standard Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",u.standardRevenue]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Base rate  priority"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Mileage Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",u.mileageRevenue]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Base + (per mile  distance)"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Insurance Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",u.insuranceRevenue]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Insurance rate + mileage"})]})]}),t.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-md",children:[t.jsx("h6",{className:"text-sm font-medium text-blue-900",children:"Trip Details:"}),t.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[u.tripDetails.transportLevel," transport from ",u.tripDetails.origin," to ",u.tripDetails.destination,t.jsx("br",{}),u.tripDetails.distanceMiles," miles  ",u.tripDetails.priority," priority  ",u.tripDetails.insuranceCompany," insurance",u.tripDetails.specialRequirements&&"  Special requirements included"]})]})]})]})]})]})},hu=({user:e,onLogout:s})=>t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(Fy,{user:e,onLogout:s,onClearSession:s}),t.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsxs(qo,{children:[t.jsx(Le,{path:"/",element:t.jsx(Oy,{user:e,onClearSession:s})}),t.jsx(Le,{path:"/healthcare/facilities",element:t.jsx(iu,{})}),t.jsx(Le,{path:"/healthcare/facilities/:facilityId/settings",element:t.jsx(cu,{user:e})}),t.jsx(Le,{path:"/ems/agencies",element:t.jsx(du,{})}),t.jsx(Le,{path:"/ems/units",element:t.jsx(uu,{})}),t.jsx(Le,{path:"/operations/trips",element:t.jsx(lu,{user:e})}),t.jsx(Le,{path:"/operations/trips/create",element:t.jsx(ou,{user:e})}),t.jsx(Le,{path:"/operations/route-optimization",element:t.jsx(mu,{})}),t.jsx(Le,{path:"/operations/analytics",element:t.jsx(pu,{})}),t.jsx(Le,{path:"/trips",element:t.jsx(lu,{user:e})}),t.jsx(Le,{path:"/trips/create",element:t.jsx(ou,{user:e})}),t.jsx(Le,{path:"/hospitals",element:t.jsx(iu,{})}),t.jsx(Le,{path:"/hospitals/:facilityId/settings",element:t.jsx(cu,{user:e})}),t.jsx(Le,{path:"/agencies/*",element:t.jsx(du,{})}),t.jsx(Le,{path:"/units",element:t.jsx(uu,{})}),t.jsx(Le,{path:"/route-optimization",element:t.jsx(mu,{})}),t.jsx(Le,{path:"/analytics",element:t.jsx(pu,{})})]})})]}),vh=()=>{const[e,s]=x.useState([]),[n,r]=x.useState(!1),[a,l]=x.useState(!1);x.useEffect(()=>{o()},[]);const o=async()=>{l(!0);try{const f=(await K.get("/api/notifications")).data;if(f!=null&&f.success&&Array.isArray(f.data)){const p=f.data.map(d=>({id:d.id,type:d.type||"info",title:d.title||"Notification",message:d.message||"",timestamp:new Date(d.createdAt||Date.now()),read:!!d.isRead||!!d.read}));s(p)}}catch(u){console.error("Error loading notifications:",u)}finally{l(!1)}},i=async u=>{try{(await K.put(`/api/notifications/${u}/read`)).status===200&&s(p=>p.map(d=>d.id===u?{...d,read:!0}:d))}catch(f){console.error("Error marking notification as read:",f)}},c=async()=>{try{(await K.put("/api/notifications/read-all")).status===200&&s(f=>f.map(p=>({...p,read:!0})))}catch(u){console.error("Error marking all notifications as read:",u)}},m=u=>{switch(u){case"success":return t.jsx(Fe,{className:"h-5 w-5 text-green-500"});case"error":return t.jsx(At,{className:"h-5 w-5 text-red-500"});case"warning":return t.jsx(At,{className:"h-5 w-5 text-yellow-500"});default:return t.jsx(r0,{className:"h-5 w-5 text-blue-500"})}},g=e.filter(u=>!u.read).length;return t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>r(!n),className:"p-2 text-gray-400 hover:text-gray-600 relative",children:[t.jsx(Jx,{className:"h-5 w-5"}),g>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:g})]}),n&&t.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[t.jsx("div",{className:"p-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notifications"}),t.jsxs("div",{className:"flex space-x-2",children:[g>0&&t.jsx("button",{onClick:c,className:"text-sm text-blue-600 hover:text-blue-800",children:"Mark all read"}),t.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(Zt,{className:"h-4 w-4"})})]})]})}),t.jsx("div",{className:"max-h-96 overflow-y-auto",children:a?t.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading notifications..."}):e.length===0?t.jsx("div",{className:"p-4 text-center text-gray-500",children:"No notifications"}):e.map(u=>t.jsx("div",{className:`p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ${u.read?"":"bg-blue-50"}`,onClick:()=>i(u.id),children:t.jsxs("div",{className:"flex items-start space-x-3",children:[m(u.type),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.title}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.message}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:u.timestamp.toLocaleString()})]}),!u.read&&t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-2"})]})},u.id))}),t.jsx("div",{className:"p-4 border-t border-gray-200",children:t.jsx("button",{onClick:o,className:"w-full text-sm text-blue-600 hover:text-blue-800",children:"Refresh"})})]})]})},qy=({user:e})=>{var ft;console.log("TCC_DEBUG: HospitalSettings component rendered with user:",e);const[s,n]=x.useState("dropdowns"),[r,a]=x.useState([]),[l,o]=x.useState(""),[i,c]=x.useState([]),[m,g]=x.useState(!1),[u,f]=x.useState(null),[p,d]=x.useState(null),[h,j]=x.useState(""),[b,y]=x.useState(null),[w,C]=x.useState(""),[D,$]=x.useState([]),[O,B]=x.useState(""),[U,z]=x.useState([]),[ce,de]=x.useState(!1),[oe,S]=x.useState(null),[Q,W]=x.useState(null),[M,T]=x.useState(!1),[A,L]=x.useState(null),[R,q]=x.useState({name:"",description:"",contactPhone:"",contactEmail:"",floor:"",room:""}),[k,G]=x.useState({contactName:"",contactTitle:"",contactEmail:"",contactPhone:"",contactNotes:""}),[Y,te]=x.useState(!1),[pe,ke]=x.useState(null),[je,F]=x.useState(null),[le,I]=x.useState("");x.useEffect(()=>{v()},[]),x.useEffect(()=>{l&&N(l)},[l]),x.useEffect(()=>{console.log("TCC_DEBUG: HospitalSettings useEffect triggered - loading hospitals"),console.log("TCC_DEBUG: User object:",e),H(),!e.manageMultipleLocations&&e.facilityName&&console.log("TCC_DEBUG: SINGLE_LOC: User is single-location, will auto-select facility:",e.facilityName)},[]),x.useEffect(()=>{O&&(console.log("TCC_DEBUG: useEffect triggered - loading pickup locations for:",O),E(O))},[O]),x.useEffect(()=>{l&&P(l)},[l]);const v=async()=>{try{g(!0);const X=["transport-level","urgency","diagnosis","mobility","insurance","special-needs"];a(X),o(X[0])}catch(X){console.error("Error loading categories:",X),f("Failed to load categories")}finally{g(!1)}},N=async X=>{try{g(!0);const fe=await yt.getByCategory(X);fe.data.success&&c(fe.data.data)}catch(fe){console.error("Error loading options:",fe),f("Failed to load options")}finally{g(!1)}},P=async X=>{try{const fe=await yt.getDefault(X);fe.data.success&&fe.data.data?I(fe.data.data.optionId):I("")}catch{I("")}},V=async X=>{if(X.preventDefault(),!(!h.trim()||!l))try{g(!0),(await yt.create({category:l,value:h.trim()})).data.success&&(j(""),d("Option added successfully"),N(l),setTimeout(()=>d(null),3e3))}catch(fe){console.error("Error adding option:",fe),f("Failed to add option")}finally{g(!1)}},Z=X=>{y(X),C(X.value)},J=async X=>{if(X.preventDefault(),!(!b||!w.trim()))try{g(!0),(await yt.update(b.id,{value:w.trim()})).data.success&&(y(null),C(""),d("Option updated successfully"),N(l),setTimeout(()=>d(null),3e3))}catch(fe){console.error("Error updating option:",fe),f("Failed to update option")}finally{g(!1)}},ee=async X=>{if(window.confirm("Are you sure you want to delete this option?"))try{g(!0),(await yt.delete(X)).data.success&&(d("Option deleted successfully"),N(l),setTimeout(()=>d(null),3e3))}catch(fe){console.error("Error deleting option:",fe),f("Failed to delete option")}finally{g(!1)}},ue=async()=>{if(!(!l||!le))try{g(!0),(await yt.setDefault(l,le)).data.success&&(d("Default updated"),setTimeout(()=>d(null),3e3))}catch{f("Failed to set default")}finally{g(!1)}},H=async()=>{var X;try{if(console.log("TCC_DEBUG: loadHospitals function called"),de(!0),e.manageMultipleLocations){console.log("TCC_DEBUG: MULTI_LOC: Loading healthcare locations for pickup location management");const fe=await K.get("/api/healthcare/locations/active");if((X=fe.data)!=null&&X.success&&Array.isArray(fe.data.data)){const Ke=fe.data.data;console.log("MULTI_LOC: Loaded",Ke.length,"healthcare locations");const ge=Ke.map(xe=>({id:xe.id,name:xe.locationName,address:xe.address,city:xe.city,state:xe.state,zipCode:xe.zipCode,phone:xe.phone||"",email:"",type:xe.facilityType,capabilities:[],region:xe.state,isActive:xe.isActive}));$(ge);const Ce=Ke.find(xe=>xe.isPrimary);Ce?B(Ce.id):ge.length>0&&B(ge[0].id)}}else{console.log("TCC_DEBUG: SINGLE_LOC: Loading user's own facility for pickup location management");const fe=await K.get("/api/public/hospitals");if(fe.data.success){const Ke=fe.data.data;console.log("TCC_DEBUG: Loaded hospitals from API:",Ke.length),console.log("TCC_DEBUG: Looking for facility name:",e.facilityName);const ge=Ke.find(Ce=>Ce.name===e.facilityName);console.log("TCC_DEBUG: Found user facility:",ge),ge?(console.log("SINGLE_LOC: Found user facility:",ge.name),ge.id==="hosp_test_001"&&(console.log("TCC_DEBUG: Found hosp_test_001, mapping to fac_test_hospital_001"),ge.id="fac_test_hospital_001",console.log("TCC_DEBUG: SINGLE_LOC: Mapped Test Hospital ID to fac_test_hospital_001 for pickup locations")),$([ge]),B(ge.id),console.log("TCC_DEBUG: Set selectedHospital to:",ge.id)):(console.warn("SINGLE_LOC: User facility not found in hospitals:",e.facilityName),S(`Your facility "${e.facilityName}" is not found. Please contact support.`),$([]))}}}catch(fe){console.error("Error loading hospitals:",fe),S("Failed to load hospitals")}finally{de(!1)}},E=async X=>{try{de(!0),S(null),console.log("TCC_DEBUG: Loading pickup locations for hospital ID:",X);const fe=await K.get(`/api/tcc/pickup-locations/hospital/${X}`);console.log("TCC_DEBUG: Pickup locations API response:",fe.data),fe.data.success?(z(fe.data.data),console.log("TCC_DEBUG: Loaded pickup locations:",fe.data.data.length)):S(fe.data.message||"Failed to load pickup locations")}catch(fe){console.error("Error loading pickup locations:",fe),S("Failed to load pickup locations")}finally{de(!1)}},se=()=>{L(null),q({name:"",description:"",contactPhone:"",contactEmail:"",floor:"",room:""}),S(null),W(null),T(!0)},ae=X=>{L(X),q({name:X.name,description:X.description||"",contactPhone:X.contactPhone||"",contactEmail:X.contactEmail||"",floor:X.floor||"",room:X.room||""}),S(null),W(null),T(!0)},ie=async X=>{var fe,Ke;if(X.preventDefault(),!(!R.name.trim()||!O))try{de(!0);const ge={hospitalId:O,name:R.name.trim(),description:R.description.trim()||null,contactPhone:R.contactPhone.trim()||null,contactEmail:R.contactEmail.trim()||null,floor:R.floor.trim()||null,room:R.room.trim()||null};let Ce;A?Ce=await K.put(`/api/tcc/pickup-locations/${A.id}`,ge):Ce=await K.post("/api/tcc/pickup-locations",ge),Ce.data.success&&(T(!1),W(A?"Pickup location updated successfully":"Pickup location created successfully"),E(O),setTimeout(()=>W(null),3e3))}catch(ge){console.error("Error saving pickup location:",ge),S(((Ke=(fe=ge.response)==null?void 0:fe.data)==null?void 0:Ke.error)||"Failed to save pickup location")}finally{de(!1)}},re=async X=>{var fe,Ke;if(window.confirm("Are you sure you want to delete this pickup location?"))try{de(!0),(await K.delete(`/api/tcc/pickup-locations/${X}`)).data.success&&(W("Pickup location deleted successfully"),E(O),setTimeout(()=>W(null),3e3))}catch(ge){console.error("Error deleting pickup location:",ge),S(((Ke=(fe=ge.response)==null?void 0:fe.data)==null?void 0:Ke.error)||"Failed to delete pickup location")}finally{de(!1)}},ye=X=>{const{name:fe,value:Ke}=X.target;G(ge=>({...ge,[fe]:Ke}))},he=async X=>{if(X.preventDefault(),!k.contactName||!k.contactEmail){ke("Contact name and email are required");return}try{te(!0),ke(null),await new Promise(fe=>setTimeout(fe,1e3)),F("Contact information saved successfully"),setTimeout(()=>F(null),3e3)}catch(fe){console.error("Error saving contact information:",fe),ke("Failed to save contact information")}finally{te(!1)}},Ne=X=>({insurance:"Insurance Companies",diagnosis:"Primary Diagnosis",mobility:"Mobility Levels","transport-level":"Transport Levels",urgency:"Urgency Levels","special-needs":"Secondary Insurance"})[X]||X;return t.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hospital Settings"}),t.jsx("p",{className:"text-gray-600",children:"Manage dropdown options and pickup locations for transport request forms"})]}),t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"-mb-px flex space-x-8",children:[t.jsx("button",{onClick:()=>n("dropdowns"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="dropdowns"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Dropdown Options"}),t.jsx("button",{onClick:()=>{n("pickup-locations"),S(null),W(null)},className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="pickup-locations"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Pickup Locations"}),t.jsx("button",{onClick:()=>n("main-contact"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="main-contact"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Main Contact"})]})})}),p&&t.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:t.jsx("p",{className:"text-green-800",children:p})}),u&&t.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:[t.jsx("p",{className:"text-red-800",children:u}),t.jsx("button",{onClick:()=>f(null),className:"mt-2 text-red-600 hover:text-red-800 underline",children:"Dismiss"})]}),Q&&t.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:t.jsx("p",{className:"text-green-800",children:Q})}),oe&&t.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:[t.jsx("p",{className:"text-red-800",children:oe}),t.jsx("button",{onClick:()=>S(null),className:"mt-2 text-red-600 hover:text-red-800 underline",children:"Dismiss"})]}),s==="dropdowns"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Category"}),t.jsxs("select",{id:"category",value:l,onChange:X=>o(X.target.value),className:"w-full max-w-md px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Select a category..."}),r.map(X=>t.jsx("option",{value:X,children:Ne(X)},X))]})]}),l&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Add New ",Ne(l)]}),t.jsxs("form",{onSubmit:V,className:"flex gap-2",children:[t.jsx("input",{type:"text",value:h,onChange:X=>j(X.target.value),placeholder:`Enter new ${Ne(l).toLowerCase()}...`,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),t.jsx("button",{type:"submit",disabled:m||!h.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Adding...":"Add"})]})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Default ",Ne(l)]}),t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsxs("select",{value:le,onChange:X=>I(X.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"No default"}),i.map(X=>t.jsx("option",{value:X.id,children:X.value},X.id))]}),t.jsx("button",{type:"button",onClick:ue,disabled:m,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50",children:m?"Saving...":"Save Default"})]})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Current ",Ne(l)]}),m?t.jsxs("div",{className:"text-center py-4",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Loading..."})]}):i.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("p",{children:"No options found for this category."}),t.jsx("p",{className:"text-sm",children:"Add some options using the form above."})]}):t.jsx("div",{className:"space-y-2",children:i.map(X=>t.jsx("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md",children:(b==null?void 0:b.id)===X.id?t.jsxs("form",{onSubmit:J,className:"flex items-center gap-2 flex-1",children:[t.jsx("input",{type:"text",value:w,onChange:fe=>C(fe.target.value),className:"flex-1 px-3 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),t.jsx("button",{type:"submit",disabled:m,className:"px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50",children:"Save"}),t.jsx("button",{type:"button",onClick:()=>{y(null),C("")},className:"px-3 py-1 bg-gray-500 text-white text-sm rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancel"})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-gray-900",children:X.value}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>Z(X),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Edit"}),t.jsx("button",{onClick:()=>ee(X.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Delete"})]})]})},X.id))})]}),t.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[t.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Instructions"}),t.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[t.jsx("li",{children:" Select a category to manage its dropdown options"}),t.jsx("li",{children:" Add new options using the form above"}),t.jsx("li",{children:' Edit existing options by clicking the "Edit" button'}),t.jsx("li",{children:' Delete options by clicking the "Delete" button'}),t.jsx("li",{children:" Changes will be reflected in the transport request forms immediately"})]})]})]})]}),s==="pickup-locations"&&t.jsxs(t.Fragment,{children:[e.manageMultipleLocations?t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{htmlFor:"hospital",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Location"}),t.jsxs("select",{id:"hospital",value:O,onChange:X=>B(X.target.value),className:"w-full max-w-md px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[t.jsx("option",{value:"",children:"Select a location..."}),D.map(X=>t.jsx("option",{value:X.id,children:X.name},X.id))]})]}):t.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-md",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(De,{className:"h-5 w-5 text-blue-600 mr-2"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Managing Pickup Locations for:"}),t.jsx("p",{className:"text-base font-semibold text-blue-700",children:e.facilityName})]})]})}),O&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Pickup Locations for ",(ft=D.find(X=>X.id===O))==null?void 0:ft.name]}),t.jsx("button",{onClick:se,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Add Pickup Location"})]}),ce?t.jsxs("div",{className:"text-center py-4",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Loading..."})]}):U.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("p",{children:"No pickup locations found for this hospital."}),t.jsx("p",{className:"text-sm",children:"Add some pickup locations using the button above."})]}):t.jsx("div",{className:"space-y-2",children:U.map(X=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-md",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:X.name}),X.description&&t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:X.description}),t.jsxs("div",{className:"flex flex-wrap gap-4 mt-2 text-sm text-gray-500",children:[X.floor&&t.jsxs("span",{children:["Floor: ",X.floor]}),X.room&&t.jsxs("span",{children:["Room: ",X.room]}),X.contactPhone&&t.jsxs("span",{children:["Phone: ",X.contactPhone]}),X.contactEmail&&t.jsxs("span",{children:["Email: ",X.contactEmail]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>ae(X),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Edit"}),t.jsx("button",{onClick:()=>re(X.id),className:"px-3 py-1 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Delete"})]})]},X.id))})]}),M&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:A?"Edit Pickup Location":"Add New Pickup Location"}),oe&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:[t.jsx("p",{className:"text-sm text-red-800",children:oe}),t.jsx("button",{onClick:()=>S(null),className:"mt-2 text-xs text-red-600 hover:text-red-800 underline",children:"Dismiss"})]}),t.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location Name *"}),t.jsx("input",{type:"text",value:R.name,onChange:X=>q({...R,name:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Emergency Department",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),t.jsx("textarea",{value:R.description,onChange:X=>q({...R,description:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional description",rows:2})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Floor"}),t.jsx("input",{type:"text",value:R.floor,onChange:X=>q({...R,floor:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 1st Floor"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room"}),t.jsx("input",{type:"text",value:R.room,onChange:X=>q({...R,room:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Room 101"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Phone"}),t.jsx("input",{type:"tel",value:R.contactPhone,onChange:X=>q({...R,contactPhone:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., (555) 123-4567"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),t.jsx("input",{type:"email",value:R.contactEmail,onChange:X=>q({...R,contactEmail:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., ed@hospital.com"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:ce||!R.name.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ce?"Saving...":A?"Update":"Create"})]})]})]})})}),t.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[t.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Instructions"}),t.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[t.jsx("li",{children:" Select a hospital to manage its pickup locations"}),t.jsx("li",{children:' Add new pickup locations using the "Add Pickup Location" button'}),t.jsx("li",{children:' Edit existing locations by clicking the "Edit" button'}),t.jsx("li",{children:' Delete locations by clicking the "Delete" button'}),t.jsx("li",{children:" Pickup locations will be available in the trip creation form"})]})]})]}),s==="main-contact"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white shadow rounded-lg",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Main Contact Information"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Set the main contact person for this facility's administration of the TCC application."})]}),t.jsxs("div",{className:"px-6 py-6",children:[je&&t.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:t.jsx("p",{className:"text-green-800",children:je})}),pe&&t.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:t.jsx("p",{className:"text-red-800",children:pe})}),t.jsxs("form",{onSubmit:he,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"contactName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Name *"}),t.jsx("input",{type:"text",id:"contactName",name:"contactName",value:k.contactName,onChange:ye,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter contact name",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"contactTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title/Position"}),t.jsx("input",{type:"text",id:"contactTitle",name:"contactTitle",value:k.contactTitle,onChange:ye,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., IT Director, Administrator"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"contactEmail",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),t.jsx("input",{type:"email",id:"contactEmail",name:"contactEmail",value:k.contactEmail,onChange:ye,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"contact@hospital.com",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"contactPhone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),t.jsx("input",{type:"tel",id:"contactPhone",name:"contactPhone",value:k.contactPhone,onChange:ye,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(555) 123-4567"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"contactNotes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),t.jsx("textarea",{id:"contactNotes",name:"contactNotes",value:k.contactNotes,onChange:ye,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Any additional information about this contact person..."})]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:()=>{G({contactName:"",contactTitle:"",contactEmail:"",contactPhone:"",contactNotes:""}),ke(null),F(null)},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Clear"}),t.jsx("button",{type:"submit",disabled:Y,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:Y?"Saving...":"Save Contact Information"})]})]})]})]}),t.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:[t.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Instructions"}),t.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[t.jsx("li",{children:" This contact person will be the main administrator for this facility's TCC application"}),t.jsx("li",{children:" They will receive notifications about system updates and important changes"}),t.jsx("li",{children:" This information may be used for support and troubleshooting purposes"}),t.jsx("li",{children:" Ensure the email address is monitored regularly for important communications"})]})]})]})]})},Wy=({user:e})=>{const[s,n]=x.useState([]),[r,a]=x.useState(!1),[l,o]=x.useState(null),[i,c]=x.useState(null);console.log("MULTI_LOC: HealthcareLocationSettings rendered with user:",e),console.log("MULTI_LOC: User manageMultipleLocations:",e.manageMultipleLocations);const[m,g]=x.useState(!1),[u,f]=x.useState(null),[p,d]=x.useState({locationName:"",address:"",city:"",state:"",zipCode:"",phone:"",facilityType:"Hospital"}),[h,j]=x.useState("idle"),[b,y]=x.useState(null),w=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],C=["Hospital","Clinic","Doctor's Office","Urgent Care","Other"];x.useEffect(()=>{D()},[]);const D=async()=>{var S,Q,W;try{a(!0);const M=localStorage.getItem("token");console.log("MULTI_LOC: Loading locations for user");const T=await K.get("/api/healthcare/locations",{headers:{Authorization:`Bearer ${M}`}});(S=T.data)!=null&&S.success&&Array.isArray(T.data.data)?(n(T.data.data),console.log("MULTI_LOC: Loaded",T.data.data.length,"locations")):(console.error("MULTI_LOC: Invalid response format:",T.data),n([]))}catch(M){console.error("MULTI_LOC: Error loading locations:",M),o(((W=(Q=M.response)==null?void 0:Q.data)==null?void 0:W.error)||"Failed to load locations")}finally{a(!1)}},$=()=>{f(null),d({locationName:"",address:"",city:"",state:"",zipCode:"",phone:"",facilityType:"Hospital"}),j("idle"),y(null),g(!0)},O=S=>{f(S),d({locationName:S.locationName,address:S.address,city:S.city,state:S.state,zipCode:S.zipCode,phone:S.phone||"",facilityType:S.facilityType}),S.latitude&&S.longitude?(y({latitude:S.latitude,longitude:S.longitude}),j("found")):(y(null),j("idle")),g(!0)},B=async(S,Q,W,M)=>{try{j("looking");const T=`${S}, ${Q}, ${W} ${M}`;console.log("MULTI_LOC: Geocoding address:",T);const L=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(T)}&limit=1`)).json();if(L&&L.length>0){const{lat:R,lon:q}=L[0],k={latitude:parseFloat(R),longitude:parseFloat(q)};return console.log("MULTI_LOC: Geocoded coordinates:",k),y(k),j("found"),k}else return console.warn("MULTI_LOC: No coordinates found for address:",T),j("error"),null}catch(T){return console.error("MULTI_LOC: Geocoding error:",T),j("error"),null}},U=async()=>{if(!p.address.trim()||!p.city.trim()||!p.state||!p.zipCode.trim()){o("Please fill in address, city, state, and ZIP code before looking up GPS coordinates");return}await B(p.address.trim(),p.city.trim(),p.state,p.zipCode.trim())},z=async S=>{var Q,W;if(S.preventDefault(),!p.locationName.trim()||!p.address.trim()||!p.city.trim()||!p.state||!p.zipCode.trim()){o("Please fill in all required fields");return}try{a(!0),o(null);const M=localStorage.getItem("token");let T=b;T||(T=await B(p.address.trim(),p.city.trim(),p.state,p.zipCode.trim()));const A={locationName:p.locationName.trim(),address:p.address.trim(),city:p.city.trim(),state:p.state,zipCode:p.zipCode.trim(),phone:p.phone.trim()||null,facilityType:p.facilityType,isPrimary:s.length===0,latitude:(T==null?void 0:T.latitude)||null,longitude:(T==null?void 0:T.longitude)||null};console.log("MULTI_LOC: Saving location:",A);let L;u?L=await K.put(`/api/healthcare/locations/${u.id}`,A,{headers:{Authorization:`Bearer ${M}`}}):L=await K.post("/api/healthcare/locations",A,{headers:{Authorization:`Bearer ${M}`}}),L.data&&(c(u?"Location updated successfully":"Location added successfully"),g(!1),D(),setTimeout(()=>c(null),3e3))}catch(M){console.error("MULTI_LOC: Error saving location:",M),o(((W=(Q=M.response)==null?void 0:Q.data)==null?void 0:W.error)||"Failed to save location")}finally{a(!1)}},ce=async S=>{var Q,W;if(window.confirm("Are you sure you want to delete this location? This action cannot be undone."))try{a(!0),o(null);const M=localStorage.getItem("token");console.log("MULTI_LOC: Deleting location:",S),await K.delete(`/api/healthcare/locations/${S}`,{headers:{Authorization:`Bearer ${M}`}}),c("Location deleted successfully"),D(),setTimeout(()=>c(null),3e3)}catch(M){console.error("MULTI_LOC: Error deleting location:",M),o(((W=(Q=M.response)==null?void 0:Q.data)==null?void 0:W.error)||"Failed to delete location")}finally{a(!1)}},de=async S=>{var Q,W;try{a(!0),o(null);const M=localStorage.getItem("token");console.log("MULTI_LOC: Setting primary location:",S),await K.put(`/api/healthcare/locations/${S}/set-primary`,{},{headers:{Authorization:`Bearer ${M}`}}),c("Primary location updated"),D(),setTimeout(()=>c(null),3e3)}catch(M){console.error("MULTI_LOC: Error setting primary location:",M),o(((W=(Q=M.response)==null?void 0:Q.data)==null?void 0:W.error)||"Failed to set primary location")}finally{a(!1)}},oe=S=>{const{name:Q,value:W}=S.target;d(M=>({...M,[Q]:W}))};return e.manageMultipleLocations?t.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Manage Locations"}),t.jsx("p",{className:"text-gray-600",children:"Manage the hospitals, clinics, and facilities under your organization"})]}),i&&t.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md flex items-center",children:[t.jsx(Bd,{className:"h-5 w-5 text-green-600 mr-2"}),t.jsx("p",{className:"text-green-800",children:i})]}),l&&t.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("p",{className:"text-red-800",children:l}),t.jsx("button",{onClick:()=>o(null),className:"text-red-600 hover:text-red-800",children:t.jsx(Zt,{className:"h-4 w-4"})})]})}),t.jsx("div",{className:"mb-6",children:t.jsxs("button",{onClick:$,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:[t.jsx(rs,{className:"h-4 w-4 mr-2"}),"Add Location"]})}),r&&s.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Loading locations..."})]}):s.length===0?t.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[t.jsx(De,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No locations yet"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding your first location."})]}):t.jsx("div",{className:"space-y-3",children:(Array.isArray(s)?s:[]).map(S=>t.jsxs("div",{className:"flex items-start justify-between p-4 bg-white border border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:S.locationName}),S.isPrimary&&t.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:[t.jsx(zd,{className:"h-3 w-3 mr-1"}),"Primary"]}),!S.isActive&&t.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:"Inactive"})]}),t.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[t.jsxs("p",{className:"flex items-start",children:[t.jsx(De,{className:"h-4 w-4 mr-1 mt-0.5 flex-shrink-0"}),t.jsxs("span",{children:[S.address,", ",S.city,", ",S.state," ",S.zipCode]})]}),t.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-500",children:[t.jsxs("span",{children:["Type: ",S.facilityType]}),S.phone&&t.jsxs("span",{children:["Phone: ",S.phone]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[!S.isPrimary&&t.jsx("button",{onClick:()=>de(S.id),disabled:r,className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded-md",title:"Set as primary",children:t.jsx(zd,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>O(S),disabled:r,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit location",children:t.jsx(Ys,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>ce(S.id),disabled:r,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete location",children:t.jsx(Xs,{className:"h-4 w-4"})})]})]},S.id))}),m&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:u?"Edit Location":"Add New Location"}),t.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-500",children:t.jsx(Zt,{className:"h-5 w-5"})})]})}),t.jsxs("form",{onSubmit:z,className:"px-6 py-4",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"locationName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Location Name *"}),t.jsx("input",{type:"text",id:"locationName",name:"locationName",value:p.locationName,onChange:oe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Penn Highlands Tyrone",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"facilityType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Facility Type *"}),t.jsx("select",{id:"facilityType",name:"facilityType",value:p.facilityType,onChange:oe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,children:C.map(S=>t.jsx("option",{value:S,children:S},S))})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Street Address *"}),t.jsx("input",{type:"text",id:"address",name:"address",value:p.address,onChange:oe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 187 Hospital Drive",required:!0})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),t.jsx("input",{type:"text",id:"city",name:"city",value:p.city,onChange:oe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"City",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),t.jsxs("select",{id:"state",name:"state",value:p.state,onChange:oe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,children:[t.jsx("option",{value:"",children:"State"}),w.map(S=>t.jsx("option",{value:S,children:S},S))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code *"}),t.jsx("input",{type:"text",id:"zipCode",name:"zipCode",value:p.zipCode,onChange:oe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"ZIP",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),t.jsx("input",{type:"tel",id:"phone",name:"phone",value:p.phone,onChange:oe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"(555) 123-4567"})]}),t.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"GPS Coordinates"}),t.jsx("button",{type:"button",onClick:U,disabled:h==="looking"||!p.address.trim()||!p.city.trim()||!p.state||!p.zipCode.trim(),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:h==="looking"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-600 mr-2"}),"Looking up..."]}):t.jsxs(t.Fragment,{children:[t.jsx(De,{className:"h-3 w-3 mr-1"}),"Lookup GPS"]})})]}),h==="found"&&b&&t.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Bd,{className:"h-4 w-4 text-green-600 mr-2"}),t.jsxs("span",{className:"text-sm text-green-800",children:["GPS coordinates found: ",b.latitude.toFixed(6),", ",b.longitude.toFixed(6)]})]})}),h==="error"&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Zt,{className:"h-4 w-4 text-red-600 mr-2"}),t.jsx("span",{className:"text-sm text-red-800",children:"GPS lookup failed. Coordinates will be saved as null."})]})}),h==="idle"&&t.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:t.jsx("span",{className:"text-sm text-gray-600",children:'Fill in the address fields above and click "Lookup GPS" to automatically find coordinates.'})})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t border-gray-200",children:[t.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:r,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Saving...":u?"Update Location":"Add Location"})]})]})]})}),t.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[t.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"How to use"}),t.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[t.jsx("li",{children:" Add all hospitals, clinics, and facilities your organization manages"}),t.jsx("li",{children:" The first location you add will automatically be set as primary"}),t.jsx("li",{children:" When creating transport requests, you'll select which location needs transport"}),t.jsx("li",{children:" You can set a different location as primary at any time by clicking the star icon"}),t.jsx("li",{children:" Edit or delete locations as needed (cannot delete if trips exist)"})]})]})]}):t.jsx("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx(at,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Multi-location management not enabled"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Your account is not configured to manage multiple locations."}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Contact support if you need to manage multiple healthcare facilities."})]})})},Vy=({user:e})=>{const[s,n]=x.useState("system");return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[t.jsxs("button",{onClick:()=>n("system"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${s==="system"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(Vs,{className:"h-4 w-4"}),"System Settings"]}),t.jsxs("button",{onClick:()=>n("locations"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${s==="locations"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(De,{className:"h-4 w-4"}),"Manage Locations",!e.manageMultipleLocations&&t.jsx("span",{className:"ml-1 text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:"Upgrade"})]})]})})}),s==="system"&&t.jsx(qy,{user:e}),s==="locations"&&t.jsx(Wy,{user:e})]})},gl="America/New_York";function xl(e){return new Intl.DateTimeFormat("en-CA",{timeZone:gl,year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}function tc(){return xl(new Date)}function Ky(e,s=gl){return xl(e)===tc()}function Qy(e,s=gl){return xl(e)>tc()}function Jy(e,s=gl){return xl(e)<tc()}function Yy(e){return e?Ky(e)?"today":Qy(e)?"future":Jy(e)?"past":"today":"unscheduled"}function qa(e){return e.scheduledTime?Yy(new Date(e.scheduledTime)):"unscheduled"}function Xy(e){const s=["January","February","March","April","May","June","July","August","September","October","November","December"],n=new Date(e.toLocaleString("en-US",{timeZone:"America/New_York"})),r=s[n.getMonth()],a=n.getDate(),l=n.getFullYear();return`${r} ${a}, ${l}`}function Zy(){return Xy(new Date)}function hs(e){switch(e){case"today":return`Today's Trips - ${Zy()}`;case"future":return"Future Trips";case"past":return"Past Trips";case"unscheduled":return"Unscheduled Trips"}}const ev=({user:e,onLogout:s})=>{var I;const[n,r]=x.useState("create"),[a,l]=x.useState([]),[o,i]=x.useState("ALL"),[c,m]=x.useState([]),[g,u]=x.useState([]),[f,p]=x.useState(null),[d,h]=x.useState({}),[j,b]=x.useState(!1),[y,w]=x.useState({transportLevel:[],urgency:[],diagnosis:[],mobility:[],insurance:[],specialNeeds:[]}),[C,D]=x.useState([]),[$,O]=x.useState(!1),[B,U]=x.useState([]),[z,ce]=x.useState([]),[de,oe]=x.useState([]),[S,Q]=x.useState([]),W=(v,N)=>{if(!N)return null;const P=new Date(v),Z=new Date(N).getTime()-P.getTime();if(Z<0)return"0 min";const J=Math.floor(Z/(1e3*60)),ee=Math.floor(J/60),ue=J%60;return ee>0?`${ee}h ${ue}m`:`${J} min`};x.useEffect(()=>{M(),T();const v=setInterval(()=>{M()},15e3);return()=>clearInterval(v)},[]),x.useEffect(()=>{if(o==="ALL")u(c);else{const v=c.filter(N=>N.status===o);u(v)}},[c,o]);const M=async()=>{var v;try{console.log("TCC_DEBUG: HealthcareDashboard - Loading trips...");const N=await K.get("/api/trips");console.log("TCC_DEBUG: HealthcareDashboard - Loading agency responses...");const P=await K.get("/api/agency-responses");if(N.data){const V=N.data,Z=((v=P.data)==null?void 0:v.data)||[];console.log("TCC_DEBUG: HealthcareDashboard - Loaded agency responses:",{count:Z.length,responses:Z.map(ee=>({id:ee.id,tripId:ee.tripId,agencyId:ee.agencyId,response:ee.response,isSelected:ee.isSelected}))});const J=new Map;if(Z.forEach(ee=>{J.has(ee.tripId)||J.set(ee.tripId,[]),J.get(ee.tripId).push(ee)}),console.log("TCC_DEBUG: HealthcareDashboard - Grouped responses by trip:",Array.from(J.entries()).map(([ee,ue])=>({tripId:ee,responseCount:ue.length}))),V.success&&V.data){const ee=V.data.map(re=>{var ye,he;return{id:re.id,patientId:re.patientId,origin:re.fromLocation||"Unknown Origin",destination:re.toLocation||"Unknown Destination",pickupLocation:re.pickupLocation?{name:re.pickupLocation.name,floor:re.pickupLocation.floor,room:re.pickupLocation.room,contactPhone:re.pickupLocation.contactPhone,contactEmail:re.pickupLocation.contactEmail}:null,transportLevel:re.transportLevel||"BLS",status:re.status,requestTime:new Date(re.createdAt).toLocaleString(),requestTimeISO:re.createdAt,pickupTime:re.pickupTimestamp?new Date(re.pickupTimestamp).toLocaleString():re.scheduledTime?new Date(re.scheduledTime).toLocaleString():null,pickupTimeISO:re.pickupTimestamp||re.scheduledTime,scheduledTime:re.scheduledTime?new Date(re.scheduledTime).toLocaleString():null,scheduledTimeISO:re.scheduledTime||null,assignedUnitId:re.assignedUnitId||null,assignedUnitNumber:((ye=re.assignedUnit)==null?void 0:ye.unitNumber)||null,assignedUnitType:((he=re.assignedUnit)==null?void 0:he.type)||null,arrivalTime:re.arrivalTimestamp?new Date(re.arrivalTimestamp).toLocaleString():null,arrivalTimestampISO:re.arrivalTimestamp||null,agencyResponses:(()=>{const Ne=J.get(re.id)||[];return console.log(`TCC_DEBUG: HealthcareDashboard - Trip ${re.id} has ${Ne.length} agency responses`),Ne})(),departureTime:re.departureTimestamp?new Date(re.departureTimestamp).toLocaleString():null,departureTimestampISO:re.departureTimestamp||null,assignedAgencyId:re.assignedAgencyId||null,priority:re.priority,urgencyLevel:re.urgencyLevel,completionTime:re.completionTimestamp?new Date(re.completionTimestamp).toLocaleString():null,completionTimestampISO:re.completionTimestamp||null}});try{console.log("TCC_DEBUG: Healthcare transformed active trips (sample)",ee.slice(0,3)),console.log("TCC_DEBUG: Healthcare raw trips (sample)",(V.data||[]).slice(0,3))}catch{}let ue=ee.filter(re=>re.status!=="COMPLETED"&&re.status!=="CANCELLED");try{const re=Array.from(new Set(ue.filter(ye=>!ye.assignedUnitNumber&&ye.assignedUnitId).map(ye=>ye.assignedUnitId).filter(Boolean)));if(console.log("TCC_DEBUG: Healthcare unit hydration - missingUnitIds",re),console.log("TCC_DEBUG: Healthcare unit hydration - assigned fields sample",ue.slice(0,3).map(ye=>({id:ye.id,assignedUnitId:ye.assignedUnitId,assignedUnitNumber:ye.assignedUnitNumber,assignedUnitType:ye.assignedUnitType}))),re.length>0){const ye=await Promise.all(re.map(Ne=>gh.getById(Ne).then(ft=>{var X;return{id:Ne,unit:((X=ft.data)==null?void 0:X.data)||null}}).catch(()=>({id:Ne,unit:null}))));console.log("TCC_DEBUG: Healthcare unit hydration - fetched units",ye);const he={};ye.forEach(({id:Ne,unit:ft})=>{ft&&(he[Ne]=ft)}),ue=ue.map(Ne=>{if(!Ne.assignedUnitNumber&&Ne.assignedUnitId&&he[Ne.assignedUnitId]){const ft=he[Ne.assignedUnitId];return{...Ne,assignedUnitNumber:ft.unitNumber||null,assignedUnitType:ft.type||null}}return Ne}),console.log("TCC_DEBUG: Healthcare unit hydration - after merge sample",ue.slice(0,3).map(Ne=>({id:Ne.id,assignedUnitId:Ne.assignedUnitId,assignedUnitNumber:Ne.assignedUnitNumber,assignedUnitType:Ne.assignedUnitType})))}}catch(re){console.log("TCC_DEBUG: unit hydration skipped due to error",re)}m(ue),u(ue);const H=[],E=[],se=[],ae=[];ue.forEach(re=>{switch(qa(re)){case"today":H.push(re);break;case"future":E.push(re);break;case"past":se.push(re);break;case"unscheduled":ae.push(re);break}}),U(H),ce(E),oe(se),Q(ae);const ie=ee.filter(re=>re.status==="COMPLETED"||re.status==="CANCELLED").map(re=>({...re,waitTime:W(re.requestTimeISO,re.pickupTimeISO)}));l(ie)}}}catch(N){console.error("Error loading trips:",N)}},T=async()=>{try{console.log("TCC_DEBUG: Loading edit options from hospital settings...");const[v,N,P,V,Z,J]=await Promise.all([K.get("/dropdown-options/transport-level").catch(()=>({data:{success:!1,data:[]}})),K.get("/dropdown-options/urgency").catch(()=>({data:{success:!1,data:[]}})),K.get("/dropdown-options/diagnosis").catch(()=>({data:{success:!1,data:[]}})),K.get("/dropdown-options/mobility").catch(()=>({data:{success:!1,data:[]}})),K.get("/dropdown-options/insurance").catch(()=>({data:{success:!1,data:[]}})),K.get("/dropdown-options/special-needs").catch(()=>({data:{success:!1,data:[]}}))]),ee=(ae,ie)=>{var re;return(re=ae==null?void 0:ae.data)!=null&&re.success&&Array.isArray(ae.data.data)?ae.data.data.map(ye=>ye.value):ie},ue=["Routine","Urgent","Emergent"],H=ee(N,[]),E=[...ue,...H.filter(ae=>!ue.includes(ae))],se={transportLevel:ee(v,["BLS","ALS","CCT","Other"]),urgency:E,diagnosis:ee(P,["Cardiac","Respiratory","Neurological","Trauma"]),mobility:ee(V,["Ambulatory","Wheelchair","Stretcher","Bed-bound"]),insurance:ee(Z,["Medicare","Medicaid","Private","Self-pay"]),specialNeeds:ee(J,["Bariatric Stretcher"])};console.log("TCC_DEBUG: Setting edit options:",se),w(se)}catch(v){console.error("Error loading edit options:",v),w({transportLevel:["BLS","ALS","CCT","Other"],urgency:["Routine","Urgent","Emergent"],diagnosis:["Cardiac","Respiratory","Neurological","Trauma"],mobility:["Ambulatory","Wheelchair","Stretcher","Bed-bound"],insurance:["Medicare","Medicaid","Private","Self-pay"],specialNeeds:["Bariatric Stretcher"]})}},A=async()=>{try{O(!0);const v=await K.get("/api/agency-responses");v.data&&v.data.success&&D(v.data.data||[])}catch(v){console.error("Error loading agency responses:",v),D([])}finally{O(!1)}},L=async(v,N)=>{try{const P=await K.post(`/api/agency-responses/${N}/select`);P.data&&P.data.success&&(await A(),await M())}catch(P){console.error("Error selecting agency:",P),alert("Failed to select agency. Please try again.")}},R=async(v,N,P)=>{if(confirm(`Are you sure you want to reject ${P}? They will be removed from consideration for this trip.`))try{const V=await K.put(`/api/agency-responses/${N}`,{response:"DECLINED",responseNotes:"Rejected by healthcare provider"});V.data&&V.data.success&&(alert("Agency rejected successfully"),await A())}catch(V){console.error("Error rejecting agency:",V),alert("Failed to reject agency. Please try again.")}},q=async(v,N)=>{var P,V;console.log("TCC_DEBUG: Healthcare markArrival click",{tripId:v,currentStatus:N}),b(!0);try{const Z=await Gt.updateStatus(v,{status:N,arrivalTimestamp:new Date().toISOString()});console.log("TCC_DEBUG: markArrival response",Z.status),await M()}catch(Z){console.error("TCC_DEBUG: markArrival error",Z),alert(((V=(P=Z==null?void 0:Z.response)==null?void 0:P.data)==null?void 0:V.error)||(Z==null?void 0:Z.message)||"Failed to mark arrival")}finally{b(!1)}},k=async(v,N)=>{var P,V;console.log("TCC_DEBUG: Healthcare markDeparture click",{tripId:v,currentStatus:N}),b(!0);try{const Z=await Gt.updateStatus(v,{status:N,departureTimestamp:new Date().toISOString()});console.log("TCC_DEBUG: markDeparture response",Z.status),await M()}catch(Z){console.error("TCC_DEBUG: markDeparture error",Z),alert(((V=(P=Z==null?void 0:Z.response)==null?void 0:P.data)==null?void 0:V.error)||(Z==null?void 0:Z.message)||"Failed to mark departure")}finally{b(!1)}},G=v=>{var N,P,V,Z,J;p(v),h({status:v.status,transportLevel:v.transportLevel,urgencyLevel:v.urgencyLevel||"Routine",diagnosis:v.diagnosis||"",mobilityLevel:v.mobilityLevel||"",insuranceCompany:v.insuranceCompany||"",specialNeeds:v.specialNeeds||"",oxygenRequired:v.oxygenRequired||!1,monitoringRequired:v.monitoringRequired||!1,pickupLocationName:((N=v.pickupLocation)==null?void 0:N.name)||"",pickupLocationFloor:((P=v.pickupLocation)==null?void 0:P.floor)||"",pickupLocationRoom:((V=v.pickupLocation)==null?void 0:V.room)||"",pickupLocationPhone:((Z=v.pickupLocation)==null?void 0:Z.contactPhone)||"",pickupLocationEmail:((J=v.pickupLocation)==null?void 0:J.contactEmail)||""})},Y=async()=>{var v,N,P,V,Z,J,ee,ue;if(f){b(!0);try{const H={status:d.status};d.urgencyLevel&&d.urgencyLevel.trim()!==""&&(H.urgencyLevel=d.urgencyLevel),d.transportLevel&&d.transportLevel.trim()!==""&&(H.transportLevel=d.transportLevel),d.diagnosis&&d.diagnosis.trim()!==""&&(H.diagnosis=d.diagnosis),d.mobilityLevel&&d.mobilityLevel.trim()!==""&&(H.mobilityLevel=d.mobilityLevel),d.insuranceCompany&&d.insuranceCompany.trim()!==""&&(H.insuranceCompany=d.insuranceCompany),d.specialNeeds&&d.specialNeeds.trim()!==""&&(H.specialNeeds=d.specialNeeds),H.oxygenRequired=!!d.oxygenRequired,H.monitoringRequired=!!d.monitoringRequired,(d.pickupLocationName||d.pickupLocationFloor||d.pickupLocationRoom||d.pickupLocationPhone||d.pickupLocationEmail)&&(H.pickupLocation={name:d.pickupLocationName.trim()||((v=f==null?void 0:f.pickupLocation)==null?void 0:v.name)||null,floor:d.pickupLocationFloor.trim()||((N=f==null?void 0:f.pickupLocation)==null?void 0:N.floor)||null,room:d.pickupLocationRoom.trim()||((P=f==null?void 0:f.pickupLocation)==null?void 0:P.room)||null,contactPhone:d.pickupLocationPhone.trim()||((V=f==null?void 0:f.pickupLocation)==null?void 0:V.contactPhone)||null,contactEmail:d.pickupLocationEmail.trim()||((Z=f==null?void 0:f.pickupLocation)==null?void 0:Z.contactEmail)||null}),d.status==="COMPLETED"&&(H.completionTimestamp=new Date().toISOString()),console.log("TCC_EDIT_DEBUG: Sanitized payload for edit-save:",H),console.log("TCC_EDIT_DEBUG: Sending update request with payload:",H);const E=await Gt.updateStatus(f.id,H);if(console.log("TCC_EDIT_DEBUG: Update response:",E.data),!E.data.success)throw new Error(E.data.error||"Failed to update trip");console.log("TCC_EDIT_DEBUG: Reloading trips after successful update"),await M(),p(null),h({})}catch(H){console.error("TCC_EDIT_DEBUG: Error updating trip:",H),console.error("TCC_EDIT_DEBUG: Error response:",(J=H==null?void 0:H.response)==null?void 0:J.data),alert(((ue=(ee=H==null?void 0:H.response)==null?void 0:ee.data)==null?void 0:ue.error)||H.message||"Failed to update trip")}finally{b(!1)}}},te=async v=>{if(confirm("Are you sure you want to mark this trip as completed?")){b(!0);try{const N=await Gt.updateStatus(v,{status:"COMPLETED",completionTimestamp:new Date().toISOString()});if(!N.data.success)throw new Error(N.data.error||"Failed to complete trip");await M()}catch(N){console.error("Error completing trip:",N),alert(N.message||"Failed to complete trip")}finally{b(!1)}}},pe=async v=>{if(confirm("Cancel this transport request? This cannot be undone."))try{const P=await Gt.updateStatus(v,{status:"CANCELLED"});if(!P.data.success)throw new Error(P.data.error||"Failed to cancel trip");await M()}catch(P){console.error("Error cancelling trip:",P),alert(P.message||"Failed to cancel trip")}},ke=async v=>{var N,P;b(!0);try{console.log("TCC_DEBUG: Authorizing trip:",v);const V=await K.post(`/api/trips/${v}/authorize`);if(V.data&&V.data.success)console.log("TCC_DEBUG: Trip authorized successfully"),await M();else throw new Error(V.data.error||"Failed to authorize trip")}catch(V){console.error("Error authorizing trip:",V),alert(((P=(N=V==null?void 0:V.response)==null?void 0:N.data)==null?void 0:P.error)||V.message||"Failed to authorize trip")}finally{b(!1)}},je=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s()},F=()=>{if(a.length===0){alert("No completed trips to export");return}const v=["Patient ID","Origin Facility","Destination Facility","Transport Level","Urgency Level","Request Time","Completion Time","Status"],N=a.map(ee=>[ee.patientId,ee.origin,ee.destination,ee.transportLevel,ee.urgencyLevel,ee.requestTime,ee.completionTime||"N/A",ee.status]),P=[v,...N].map(ee=>ee.map(ue=>`"${ue}"`).join(",")).join(`
`),V=new Blob([P],{type:"text/csv;charset=utf-8;"}),Z=document.createElement("a"),J=URL.createObjectURL(V);Z.setAttribute("href",J),Z.setAttribute("download",`completed-trips-${new Date().toISOString().split("T")[0]}.csv`),Z.style.visibility="hidden",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)},le=v=>{switch(v){case"PENDING":return"text-yellow-800 bg-yellow-200 border border-yellow-300";case"ACCEPTED":return"text-green-800 bg-green-200 border border-green-300 font-bold";case"DECLINED":return"text-red-800 bg-red-200 border border-red-300 font-bold";case"CANCELLED":return"text-red-800 bg-red-200 border border-red-300 font-bold";case"IN_PROGRESS":return"text-blue-800 bg-blue-200 border border-blue-300 font-bold";case"COMPLETED":return"text-gray-800 bg-gray-200 border border-gray-300 font-bold";default:return"text-gray-600 bg-gray-100"}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg mr-3",children:t.jsx(at,{className:"h-6 w-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:e.facilityName||"Healthcare Facility"}),t.jsxs("p",{className:"text-sm text-gray-500 capitalize",children:[((I=e.facilityType)==null?void 0:I.toLowerCase())||"Healthcare","  Healthcare Portal"]})]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(vh,{user:e}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(wr,{className:"h-5 w-5 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-700",children:e.name})]}),t.jsxs("button",{onClick:je,className:"flex items-center space-x-1 text-gray-600 hover:text-gray-800",children:[t.jsx(Ga,{className:"h-4 w-4"}),t.jsx("span",{children:"Logout"})]})]})]})})}),t.jsx("div",{className:"bg-white border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsx("nav",{className:"flex space-x-8",children:[{id:"create",name:"Create Request",icon:rs},{id:"trips",name:"Transport Requests",icon:Ht},{id:"in-progress",name:"In-Progress",icon:At},{id:"completed",name:"Completed Trips",icon:Fe},{id:"hospital-settings",name:"Hospital Settings",icon:at}].map(v=>{const N=v.icon;return t.jsxs("button",{onClick:()=>r(v.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${n===v.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(N,{className:"h-4 w-4"}),t.jsx("span",{children:v.name})]},v.id)})})})}),t.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n==="trips"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"p-3 rounded-md bg-yellow-500",children:t.jsx(Ht,{className:"h-6 w-6 text-white"})})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pending Requests"}),t.jsx("dd",{className:"text-lg font-medium text-gray-900",children:c.filter(v=>v.status==="PENDING").length})]})})]})})}),t.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"p-3 rounded-md bg-green-500",children:t.jsx(Fe,{className:"h-6 w-6 text-white"})})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Completed Today"}),t.jsx("dd",{className:"text-lg font-medium text-gray-900",children:a.length})]})})]})})}),t.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"p-3 rounded-md bg-red-500",children:t.jsx($p,{className:"h-6 w-6 text-white"})})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:t.jsxs("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Emergent Trips"}),t.jsx("dd",{className:"text-lg font-medium text-gray-900",children:c.filter(v=>(v.status==="PENDING"||v.status==="ACCEPTED"||v.status==="IN_PROGRESS")&&v.urgencyLevel==="Emergent").length})]})})]})})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transport Requests"}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("label",{htmlFor:"status-filter",className:"text-sm font-medium text-gray-700",children:"Filter by status:"}),t.jsxs("select",{id:"status-filter",value:o,onChange:v=>i(v.target.value),className:"block w-40 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[t.jsx("option",{value:"ALL",children:"All Status"}),t.jsx("option",{value:"PENDING",children:"Pending"}),t.jsx("option",{value:"ACCEPTED",children:"Accepted"}),t.jsx("option",{value:"DECLINED",children:"Declined"}),t.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),t.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]})]})}),t.jsx("div",{className:"p-6",children:(()=>{const v=o==="ALL"?B:B.filter(ee=>ee.status===o),N=o==="ALL"?z:z.filter(ee=>ee.status===o),P=o==="ALL"?S:S.filter(ee=>ee.status===o),V=o==="ALL"?de:de.filter(ee=>ee.status===o),Z=(ee,ue,H)=>ee.length===0?null:t.jsxs("div",{className:"mb-8",children:[t.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:[ue," (",ee.length,")"]}),t.jsx("div",{className:"space-y-4",children:ee.map(E=>{const se=qa(E);return t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["Patient ",E.patientId," - ",E.transportLevel," - Request Time: ",E.requestTime]}),t.jsxs("p",{className:"text-base text-gray-600",children:[E.origin,"  ",E.destination]}),E.pickupLocation&&t.jsxs("p",{className:"text-xs text-blue-600",children:["Pickup: ",E.pickupLocation.name,": ",E.pickupLocation.floor&&`${E.pickupLocation.floor}`,E.pickupLocation.room&&` ${E.pickupLocation.room}`,E.pickupLocation.contactPhone&&` Phone: ${E.pickupLocation.contactPhone}`,E.pickupLocation.contactEmail&&` Email: ${E.pickupLocation.contactEmail}`]}),E.scheduledTime&&t.jsxs("p",{className:"text-xs text-gray-500",children:["Scheduled: ",E.scheduledTime]}),E.agencyResponses&&E.agencyResponses.length>0&&t.jsxs("div",{className:"mt-2 space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[E.agencyResponses.filter(ae=>ae.response==="ACCEPTED").length," agencies accepted"]}),E.agencyResponses.filter(ae=>ae.isSelected).length>0&&t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Selected"})]}),E.agencyResponses.filter(ae=>ae.response==="ACCEPTED").length>0&&E.agencyResponses.filter(ae=>ae.isSelected).length===0&&t.jsxs("div",{className:"mt-2 border border-gray-300 rounded-lg p-3 bg-white",children:[t.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Select Agency:"}),E.agencyResponses.filter(ae=>ae.response==="ACCEPTED").map(ae=>{var ie,re,ye;return t.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-200 last:border-b-0",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:((ie=ae.agency)==null?void 0:ie.name)||"Unknown Agency"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Route: ",((re=ae.trip)==null?void 0:re.fromLocation)||"N/A","  ",((ye=ae.trip)==null?void 0:ye.toLocation)||"N/A"]}),ae.assignedUnit&&t.jsxs("p",{className:"text-xs text-green-600",children:["Assigned Unit: ",ae.assignedUnit.unitNumber," (",ae.assignedUnit.type,")"]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>L(E.id,ae.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-md hover:bg-green-700",children:"Select"}),t.jsx("button",{onClick:()=>{var he;return R(E.id,ae.id,((he=ae.agency)==null?void 0:he.name)||"this agency")},className:"px-3 py-1.5 bg-red-600 text-white text-xs font-medium rounded-md hover:bg-red-700",children:"Reject"})]})]},ae.id)})]})]})]})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${(E.urgencyLevel||"Routine")==="Emergent"?"bg-red-100 text-red-800":(E.urgencyLevel||"Routine")==="Urgent"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:E.urgencyLevel||"Routine"}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${le(E.status)}`,children:E.status}),t.jsxs("div",{className:"flex space-x-2 ml-4",children:[se==="future"&&t.jsx("button",{title:"Authorize",onClick:()=>ke(E.id),className:"inline-flex items-center justify-center h-8 w-8 rounded-full bg-green-100 text-green-800 hover:bg-green-200",disabled:j,children:t.jsx(Fe,{className:"h-4 w-4"})}),t.jsx("button",{title:"Edit",onClick:()=>G(E),className:"inline-flex items-center justify-center h-8 w-8 rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200",disabled:j,children:t.jsx(Ys,{className:"h-4 w-4"})}),E.status!=="COMPLETED"&&t.jsx("button",{title:"Complete",onClick:()=>te(E.id),className:"inline-flex items-center justify-center h-8 w-8 rounded-full bg-green-100 text-green-800 hover:bg-green-200",disabled:j,children:t.jsx(Fe,{className:"h-4 w-4"})}),t.jsx("button",{title:"Delete",onClick:()=>pe(E.id),className:"inline-flex items-center justify-center h-8 w-8 rounded-full bg-red-100 text-red-800 hover:bg-red-200",disabled:j,children:t.jsx(Xs,{className:"h-4 w-4"})})]})]})]},E.id)})})]},H);return v.length>0||N.length>0||P.length>0||V.length>0?t.jsxs("div",{className:"space-y-8",children:[Z(v,hs("today"),"today"),Z(N,hs("future"),"future"),Z(P,hs("unscheduled"),"unscheduled"),Z(V,hs("past"),"past")]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ht,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:o==="ALL"?"No transport requests":`No ${o.toLowerCase()} requests`}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:o==="ALL"?"Create your first transport request to get started.":"Try selecting a different status filter or create a new request."})]})})()})]})]}),n==="create"&&t.jsx("div",{children:t.jsx(xh,{user:e,onTripCreated:()=>{M(),r("trips")},onCancel:()=>{r("trips")}},"create-form")}),n==="in-progress"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"In-Progress"})}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Accepted and Active Trips"})}),t.jsx("div",{className:"p-6",children:c.filter(v=>v.status==="ACCEPTED"||v.status==="IN_PROGRESS").length>0?t.jsx("div",{className:"space-y-4",children:c.filter(v=>v.status==="ACCEPTED"||v.status==="IN_PROGRESS").map(v=>t.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["Patient ",v.patientId]}),t.jsxs("p",{className:"text-base text-gray-600",children:[v.origin,"  ",v.destination]}),v.pickupLocation&&t.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Pickup: ",v.pickupLocation.name,": ",v.pickupLocation.floor&&`${v.pickupLocation.floor}`,v.pickupLocation.room&&` ${v.pickupLocation.room}`,v.pickupLocation.contactPhone&&` Phone: ${v.pickupLocation.contactPhone}`,v.pickupLocation.contactEmail&&` Email: ${v.pickupLocation.contactEmail}`]}),t.jsxs("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-gray-800",children:"Assigned Unit"}),t.jsx("div",{className:"text-gray-600",children:v.assignedUnitNumber?`${v.assignedUnitNumber}${v.assignedUnitType?` (${v.assignedUnitType})`:""}`:v.assignedUnitId?`#${v.assignedUnitId}`:v.status==="ACCEPTED"?"Awaiting unit assignment":""})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-gray-800",children:"Pickup Time"}),t.jsx("div",{className:"text-gray-600",children:v.pickupTime||v.scheduledTime||""})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-gray-800",children:"Arrival Time"}),t.jsx("div",{className:"text-gray-600",children:v.arrivalTime||""})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-gray-800",children:"Departure Time"}),t.jsx("div",{className:"text-gray-600",children:v.departureTime||""})]})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[!v.arrivalTimestampISO&&t.jsx("button",{onClick:()=>q(v.id,v.status),disabled:j,className:"px-3 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 disabled:opacity-50",children:"Mark Arrival"}),v.arrivalTimestampISO&&!v.departureTimestampISO&&t.jsx("button",{onClick:()=>k(v.id,v.status),disabled:j,className:"px-3 py-2 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700 disabled:opacity-50",children:"Mark Departure"}),v.arrivalTimestampISO&&v.departureTimestampISO&&t.jsx("button",{onClick:()=>te(v.id),disabled:j,className:"px-3 py-2 bg-green-600 text-white rounded-md text-sm hover:bg-green-700 disabled:opacity-50",children:"Mark Completed"})]})]})},v.id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ht,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No in-progress trips"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Trips will appear here after EMS accepts and starts them."})]})})]})]}),n==="completed"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Completed Trips"}),t.jsx("button",{onClick:F,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 text-sm font-medium",children:"Export CSV"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Completed Transport Requests (",a.length,")"]})}),t.jsx("div",{className:"p-6",children:a.length>0?t.jsx("div",{className:"space-y-4",children:a.map(v=>t.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["Patient ",v.patientId]}),t.jsxs("p",{className:"text-base text-gray-600",children:[v.origin,"  ",v.destination]})]})}),t.jsxs("div",{className:"mt-2 grid grid-cols-6 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-gray-800",children:"Transport Level:"}),t.jsx("div",{className:"text-gray-500",children:v.transportLevel})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-gray-800",children:"Urgency:"}),t.jsx("div",{className:"text-gray-500",children:v.urgencyLevel||"Routine"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-gray-800",children:"Request Time:"}),t.jsx("div",{className:"text-gray-500",children:v.requestTime})]}),v.pickupTime&&t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-gray-800",children:"Pickup Time:"}),t.jsx("div",{className:"text-gray-500",children:v.pickupTime})]}),v.waitTime&&t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-gray-800",children:"Wait Time:"}),t.jsx("div",{className:"text-green-600 font-semibold",children:v.waitTime})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-gray-800",children:"Completion Time:"}),t.jsx("div",{className:"text-gray-500",children:v.status==="CANCELLED"?"Cancelled":v.completionTime||"N/A"})]})]})]})})},v.id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Fe,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No completed trips"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Completed trips will appear here once they are finished."})]})})]})]}),n==="hospital-settings"&&t.jsx(Vy,{user:e})]}),f&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-10 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Edit Trip Details - Patient ",f.patientId]}),t.jsxs("form",{onSubmit:v=>{v.preventDefault(),Y()},children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:d.status,onChange:v=>h({...d,status:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"PENDING",children:"Pending"}),t.jsx("option",{value:"ACCEPTED",children:"Accepted"}),t.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),t.jsx("option",{value:"COMPLETED",children:"Completed"}),t.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transport Level"}),t.jsx("select",{value:d.transportLevel,onChange:v=>h({...d,transportLevel:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",children:y.transportLevel.map(v=>t.jsx("option",{value:v,children:v==="BLS"?"BLS - Basic Life Support":v==="ALS"?"ALS - Advanced Life Support":v==="CCT"?"CCT - Critical Care Transport":v},v))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Urgency Level"}),t.jsx("select",{value:d.urgencyLevel,onChange:v=>h({...d,urgencyLevel:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",children:y.urgency.map(v=>t.jsx("option",{value:v,children:v},v))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Diagnosis"}),t.jsxs("select",{value:d.diagnosis,onChange:v=>h({...d,diagnosis:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select diagnosis"}),y.diagnosis.map(v=>t.jsx("option",{value:v,children:v},v))]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobility Level"}),t.jsxs("select",{value:d.mobilityLevel,onChange:v=>h({...d,mobilityLevel:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select mobility level"}),y.mobility.map(v=>t.jsx("option",{value:v,children:v},v))]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Insurance Company"}),t.jsxs("select",{value:d.insuranceCompany,onChange:v=>h({...d,insuranceCompany:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select insurance company"}),y.insurance.map(v=>t.jsx("option",{value:v,children:v},v))]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Needs"}),t.jsxs("select",{value:d.specialNeeds,onChange:v=>h({...d,specialNeeds:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select special needs"}),y.specialNeeds.map(v=>t.jsx("option",{value:v,children:v},v))]})]}),t.jsxs("div",{className:"mb-4 md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clinical Requirements"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:d.oxygenRequired,onChange:v=>h({...d,oxygenRequired:v.target.checked}),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),t.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Oxygen Required"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:d.monitoringRequired,onChange:v=>h({...d,monitoringRequired:v.target.checked}),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),t.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Continuous Monitoring Required"})]})]})]}),t.jsxs("div",{className:"mb-4 md:col-span-2",children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Pickup Location Details"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location Name"}),t.jsx("input",{type:"text",value:d.pickupLocationName,onChange:v=>h({...d,pickupLocationName:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",placeholder:"e.g., Cancer Center"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Floor"}),t.jsx("input",{type:"text",value:d.pickupLocationFloor,onChange:v=>h({...d,pickupLocationFloor:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 3rd"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room"}),t.jsx("input",{type:"text",value:d.pickupLocationRoom,onChange:v=>h({...d,pickupLocationRoom:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 101"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone"}),t.jsx("input",{type:"text",value:d.pickupLocationPhone,onChange:v=>h({...d,pickupLocationPhone:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 8885551212"})]}),t.jsxs("div",{className:"mb-4 md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),t.jsx("input",{type:"email",value:d.pickupLocationEmail,onChange:v=>h({...d,pickupLocationEmail:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",placeholder:"e.g., nurse@phclearfield.com"})]})]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx("button",{type:"button",onClick:()=>{p(null),h({})},className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:j,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 disabled:opacity-50",children:j?"Updating...":"Update Trip"})]})]})]})})})]})},tv=({user:e,onSaveSuccess:s})=>{const[n,r]=x.useState({agencyName:e.agencyName||"",contactName:e.name||"",email:e.email||"",phone:"",address:"",city:"",state:"PA",zipCode:"",capabilities:[],operatingHours:{start:"00:00",end:"23:59"},emailNotifications:!0,smsNotifications:!1}),[a,l]=x.useState(!1),[o,i]=x.useState(null),[c,m]=x.useState(!1),g=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],u=["BLS","ALS","CCT","Critical Care","Neonatal","Pediatric","Bariatric","Isolation"],f=h=>{const{name:j,value:b,type:y}=h.target;if(j==="operatingHours.start"||j==="operatingHours.end")r(w=>({...w,operatingHours:{...w.operatingHours,[j.split(".")[1]]:b}}));else if(y==="checkbox"){const w=h.target.checked;r(C=>({...C,[j]:w}))}else r(w=>({...w,[j]:b}))},p=h=>{r(j=>({...j,capabilities:j.capabilities.includes(h)?j.capabilities.filter(b=>b!==h):[...j.capabilities,h]}))},d=async()=>{l(!0),i(null);try{console.log("TCC_DEBUG: Saving agency settings:",n),console.log("TCC_DEBUG: Operating hours:",n.operatingHours);const h=n.operatingHours.start&&n.operatingHours.end?`${n.operatingHours.start} - ${n.operatingHours.end}`:"24/7",j={agencyName:n.agencyName,contactName:n.contactName,email:n.email,phone:n.phone||"(555) 000-0000",address:n.address||"",city:n.city||"",state:n.state||"",zipCode:n.zipCode||"",capabilities:n.capabilities,operatingHours:h};console.log("TCC_DEBUG: Payload being sent:",j);const b=await K.put("/api/auth/ems/agency/update",j);console.log("TCC_DEBUG: Success response:",b.data),m(!0),setTimeout(()=>m(!1),3e3),s&&setTimeout(()=>s(),1e3)}catch(h){console.error("Error saving settings:",h),i(h.message||"Failed to save settings. Please try again.")}finally{l(!1)}};return t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Agency Information"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Update your agency contact information and settings"})]}),t.jsxs("div",{className:"p-6",children:[c&&t.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:t.jsxs("div",{className:"flex",children:[t.jsx(Fe,{className:"h-5 w-5 text-green-400"}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm font-medium text-green-800",children:"Agency settings saved successfully!"})})]})}),o&&t.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:t.jsxs("div",{className:"flex",children:[t.jsx(At,{className:"h-5 w-5 text-red-400"}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm font-medium text-red-800",children:o})})]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"agencyName",className:"block text-sm font-medium text-gray-700",children:"Agency Name *"}),t.jsx("input",{type:"text",id:"agencyName",name:"agencyName",value:n.agencyName,onChange:f,required:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"contactName",className:"block text-sm font-medium text-gray-700",children:"Contact Name *"}),t.jsx("input",{type:"text",id:"contactName",name:"contactName",value:n.contactName,onChange:f,required:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address *"}),t.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:f,required:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number *"}),t.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:f,placeholder:"(123) 456-7890",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Street Address *"}),t.jsx("input",{type:"text",id:"address",name:"address",value:n.address,onChange:f,placeholder:"123 Main Street",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"City *"}),t.jsx("input",{type:"text",id:"city",name:"city",value:n.city,onChange:f,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700",children:"State *"}),t.jsx("select",{id:"state",name:"state",value:n.state,onChange:f,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500",children:g.map(h=>t.jsx("option",{value:h,children:h},h))})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700",children:"ZIP Code *"}),t.jsx("input",{type:"text",id:"zipCode",name:"zipCode",value:n.zipCode,onChange:f,placeholder:"12345",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transport Capabilities"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:u.map(h=>t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:n.capabilities.includes(h),onChange:()=>p(h),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:h})]},h))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operating Hours"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"operatingHours.start",className:"block text-sm text-gray-600",children:"Start Time"}),t.jsx("input",{type:"time",id:"operatingHours.start",name:"operatingHours.start",value:n.operatingHours.start,onChange:f,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"operatingHours.end",className:"block text-sm text-gray-600",children:"End Time"}),t.jsx("input",{type:"time",id:"operatingHours.end",name:"operatingHours.end",value:n.operatingHours.end,onChange:f,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]})]}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Set to 00:00 - 23:59 for 24/7 operation"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Preferences"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",name:"emailNotifications",checked:n.emailNotifications,onChange:f,className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Email Notifications"})]}),t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",name:"smsNotifications",checked:n.smsNotifications,onChange:f,className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),t.jsx("span",{className:"text-sm text-gray-700",children:"SMS Notifications"})]})]})]}),t.jsx("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:t.jsx("button",{type:"button",onClick:d,disabled:a,className:"px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Saving...":"Save All Settings"})})]})]})]})})},sv="modulepreload",nv=function(e){return"/"+e},fu={},ti=function(s,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=nv(c),c in fu)return;fu[c]=!0;const m=c.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${g}`))return;const u=document.createElement("link");if(u.rel=m?"stylesheet":sv,m||(u.as="script"),u.crossOrigin="",u.href=c,i&&u.setAttribute("nonce",i),document.head.appendChild(u),m)return new Promise((f,p)=>{u.addEventListener("load",f),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return a.then(o=>{for(const i of o||[])i.status==="rejected"&&l(i.reason);return s().catch(l)})},rv=({user:e,acceptedTrips:s=[]})=>{const[n,r]=x.useState([]),[a,l]=x.useState(null),[o,i]=x.useState(!0),[c,m]=x.useState(null),[g,u]=x.useState(!1),[f,p]=x.useState(!1),[d,h]=x.useState(null),[j,b]=x.useState(""),[y,w]=x.useState("ALL"),[C,D]=x.useState("ALL"),[$,O]=x.useState("units"),[B,U]=x.useState({unitNumber:"",type:"AMBULANCE",capabilities:["BLS"],customCapabilities:[],isActive:!0,status:"AVAILABLE"}),[z,ce]=x.useState(!1),[de,oe]=x.useState(null),S=async()=>{var k;try{console.log(" UnitsManagement: fetchUnits called"),i(!0);const te=(await(await ti(async()=>{const{default:pe}=await Promise.resolve().then(()=>ei);return{default:pe}},void 0)).default.get("/api/units",{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}})).data;if(console.log(" UnitsManagement: API response:",te),te.success)console.log(" UnitsManagement: Units count:",((k=te.data)==null?void 0:k.length)||0),r(te.data||[]);else throw new Error(te.error||"Failed to fetch units")}catch(G){console.error("Error fetching units:",G),m(G.message)}finally{i(!1)}},Q=async()=>{try{const G=(await K.get("/api/units/analytics",{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}})).data;G.success&&l(G.data)}catch(k){console.error("Error fetching analytics:",k)}};x.useEffect(()=>{console.log(" UnitsManagement: useEffect called, component mounted"),S(),Q()},[]);const W=async k=>{var G,Y;k.preventDefault(),ce(!0),oe(null);try{let te;if(d)if(console.log("TCC_DEBUG: Updating unit with data:",B),te=await K.put(`/api/units/${d.id}`,B),te.data.success){const pe=te.data.data;r(ke=>ke.map(je=>je.id===d.id?pe:je)),u(!1),p(!1),h(null),T(),console.log("TCC_DEBUG: Unit updated successfully:",pe)}else throw new Error(te.data.error||"Failed to update unit");else if(console.log("TCC_DEBUG: Creating unit with data:",B),te=await K.post("/api/units",B),te.data.success){const pe=te.data.data;r(ke=>[...ke,pe]),u(!1),p(!1),h(null),T(),console.log("TCC_DEBUG: Unit created successfully:",pe)}else throw new Error(te.data.error||"Failed to create unit")}catch(te){console.error("Error saving unit:",te),oe(((Y=(G=te.response)==null?void 0:G.data)==null?void 0:Y.error)||te.message||"Failed to save unit")}finally{ce(!1)}},M=async k=>{if(confirm("Are you sure you want to delete this unit?"))try{const te=(await(await ti(async()=>{const{default:pe}=await Promise.resolve().then(()=>ei);return{default:pe}},void 0)).default.delete(`/api/units/${k}`)).data;if(te.success)await S(),await Q();else throw new Error(te.error||"Failed to delete unit")}catch(G){console.error("Error deleting unit:",G),m(G.message)}},T=()=>{U({unitNumber:"",type:"AMBULANCE",capabilities:["BLS"],customCapabilities:[],isActive:!0,status:"AVAILABLE"}),oe(null)},A=k=>{h(k),U({unitNumber:k.unitNumber,type:k.type,capabilities:k.capabilities,customCapabilities:[],isActive:k.isActive,status:k.currentStatus}),p(!0)},L=n.filter(k=>{const G=k.unitNumber.toLowerCase().includes(j.toLowerCase())||ya[k.type].toLowerCase().includes(j.toLowerCase()),Y=y==="ALL"||k.currentStatus===y,te=C==="ALL"||k.type===C;return G&&Y&&te}),R=k=>{const G=zy[k];return t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${G}`,children:Ql[k]})},q=k=>{switch(k){case"AMBULANCE":return"bg-red-100 text-red-800";case"HELICOPTER":return"bg-blue-100 text-blue-800";case"FIRE_TRUCK":return"bg-orange-100 text-orange-800";case"RESCUE_VEHICLE":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return o?t.jsxs("div",{className:"flex items-center justify-center h-64",children:[t.jsx(xt,{className:"h-8 w-8 animate-spin text-orange-600"}),t.jsx("span",{className:"ml-2 text-gray-600",children:"Loading units..."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Units Management"}),t.jsx("p",{className:"text-gray-600",children:"Manage your EMS units and track their status"})]}),$==="units"&&t.jsxs("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors",children:[t.jsx(rs,{className:"h-4 w-4"}),t.jsx("span",{children:"Add Unit"})]})]}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[t.jsxs("button",{onClick:()=>O("units"),className:`${$==="units"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[t.jsx(We,{className:"h-5 w-5 mr-2"}),"Units List"]}),t.jsxs("button",{onClick:()=>O("locations"),className:`${$==="locations"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[t.jsx(Ko,{className:"h-5 w-5 mr-2"}),"Unit Locations"]})]})}),$==="locations"?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:[t.jsx("p",{children:"Unit location management feature is temporarily disabled."}),t.jsx("p",{className:"text-sm mt-2",children:"This feature will be restored in a future update."})]}):t.jsxs(t.Fragment,{children:[a&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(We,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Units"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.totalUnits})]})]})}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(Fe,{className:"h-8 w-8 text-green-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Available"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.availableUnits})]})]})}),t.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(zp,{className:"h-8 w-8 text-blue-600"}),t.jsxs("div",{className:"ml-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Trips"}),t.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.length})]})]})})]}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:t.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Yi,{className:"h-4 w-4 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search units...",value:j,onChange:k=>b(k.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Hp,{className:"h-4 w-4 text-gray-400"}),t.jsxs("select",{value:y,onChange:k=>w(k.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",children:[t.jsx("option",{value:"ALL",children:"All Statuses"}),Object.entries(Ql).map(([k,G])=>t.jsx("option",{value:k,children:G},k))]})]}),t.jsx("div",{className:"flex items-center space-x-2",children:t.jsxs("select",{value:C,onChange:k=>D(k.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500",children:[t.jsx("option",{value:"ALL",children:"All Types"}),Object.entries(ya).map(([k,G])=>t.jsx("option",{value:k,children:G},k))]})}),t.jsxs("button",{onClick:()=>{S(),Q()},className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800",children:[t.jsx(xt,{className:"h-4 w-4"}),t.jsx("span",{children:"Refresh"})]})]})}),c&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx(At,{className:"h-5 w-5 text-red-400"}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),t.jsx("p",{className:"text-sm text-red-700 mt-1",children:c})]})]})}),t.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:t.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[t.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:["Units (",L.length,")"]}),L.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(We,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No units found"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n.length===0?"Get started by creating your first unit.":"Try adjusting your search or filter criteria."}),n.length===0&&t.jsx("div",{className:"mt-6",children:t.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700",children:[t.jsx(rs,{className:"h-4 w-4 mr-2"}),"Add Unit"]})})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capabilities"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(k=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.unitNumber})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${q(k.type)}`,children:k.type.replace("_"," ")})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R(k.currentStatus)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"flex flex-wrap gap-1",children:k.capabilities.map((G,Y)=>t.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:G},Y))})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.jsxs("div",{children:[t.jsxs("div",{children:[k.totalTripsCompleted," trips"]}),k.currentStatus==="COMMITTED"&&t.jsx("div",{className:"text-orange-600",children:"Active now"})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>A(k),className:"text-orange-600 hover:text-orange-900",children:t.jsx(Ys,{className:"h-4 w-4"})}),t.jsx("button",{onClick:()=>M(k.id),className:"text-red-600 hover:text-red-900",children:t.jsx(Xs,{className:"h-4 w-4"})})]})})]},k.id))})]})})]})}),(g||f)&&t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:t.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:t.jsxs("div",{className:"mt-3",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:d?"Edit Unit":"Create New Unit"}),t.jsxs("form",{onSubmit:W,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Unit Number"}),t.jsx("input",{type:"text",required:!0,value:B.unitNumber,onChange:k=>U({...B,unitNumber:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"e.g., A-101"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Unit Type"}),t.jsx("select",{value:B.type,onChange:k=>U({...B,type:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",children:Object.entries(ya).map(([k,G])=>t.jsx("option",{value:k,children:G},k))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Capabilities"}),t.jsx("div",{className:"mt-2 space-y-2",children:Object.entries(yh).map(([k,G])=>t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:B.capabilities.includes(k),onChange:Y=>{const te=k;Y.target.checked?U({...B,capabilities:[...B.capabilities,te]}):U({...B,capabilities:B.capabilities.filter(pe=>pe!==te)})},className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:G})]},k))})]}),d&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Current Status"}),t.jsx("select",{value:B.status,onChange:k=>U({...B,status:k.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",children:Object.entries(Ql).map(([k,G])=>t.jsx("option",{value:k,children:G},k))}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Manually set the unit's status. This overrides automatic status changes."})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:B.isActive,onChange:k=>U({...B,isActive:k.target.checked}),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),t.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"On Duty"}),t.jsx("p",{className:"ml-2 text-xs text-gray-500",children:"Check if unit is currently on duty"})]}),de&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:t.jsx("p",{className:"text-sm text-red-700",children:de})}),t.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{u(!1),p(!1),h(null),T()},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:z,className:"px-4 py-2 bg-orange-600 text-white rounded-md text-sm font-medium hover:bg-orange-700 disabled:opacity-50",children:z?"Saving...":d?"Update":"Create"})]})]})]})})})]})]})},av=({tripId:e,status:s,onUpdate:n})=>t.jsxs("div",{className:"ml-4 flex space-x-2",children:[s==="ACCEPTED"&&t.jsx("button",{onClick:()=>n(e,"IN_PROGRESS"),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 text-sm font-medium",children:"Start Trip"}),s==="IN_PROGRESS"&&t.jsx("button",{onClick:()=>n(e,"COMPLETED"),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 text-sm font-medium",children:"Complete Trip"})]}),lv=({user:e})=>{var ke,je;const[s,n]=x.useState({baseRates:{BLS:150,ALS:250,CCT:400},perMileRates:{BLS:2.5,ALS:3.75,CCT:5},priorityMultipliers:{LOW:1,MEDIUM:1.1,HIGH:1.25,URGENT:1.5},specialSurcharge:50,insuranceRates:{medicare:{BLS:120,ALS:200,CCT:350},medicaid:{BLS:100,ALS:180,CCT:300},private:{BLS:180,ALS:300,CCT:450},selfPay:{BLS:200,ALS:350,CCT:500}},customInsuranceCompanies:[]}),[r,a]=x.useState(null),[l,o]=x.useState({name:"",rates:{BLS:"",ALS:"",CCT:""}}),[i,c]=x.useState(null),[m,g]=x.useState({name:"",rates:{BLS:"",ALS:"",CCT:""}}),[u,f]=x.useState({origin:"",destination:"",originCoordinates:null,destinationCoordinates:null,transportLevel:"ALS",priority:"MEDIUM",distanceMiles:0,specialRequirements:!1,insuranceCompany:"medicare"}),[p,d]=x.useState([]),[h,j]=x.useState(!1),[b,y]=x.useState(""),[w,C]=x.useState(""),[D,$]=x.useState(null),[O,B]=Sr.useState(0);x.useEffect(()=>{const F=localStorage.getItem("tcc_revenue_settings");if(F){const le=JSON.parse(F);n(I=>({...I,...le}))}},[]);const U=()=>{const F={transportLevel:"ALS",priority:"MEDIUM",distanceMiles:15,specialRequirements:!1,insuranceCompany:"medicare"},le=s.baseRates[F.transportLevel],I=s.perMileRates[F.transportLevel],v=s.priorityMultipliers[F.priority],N=s.insuranceRates[F.insuranceCompany][F.transportLevel],P=F.specialRequirements?s.specialSurcharge:0,V=le*v+P,Z=(le+I*F.distanceMiles+P)*v,J=(N+I*F.distanceMiles+P)*v;a({sampleTrip:F,standardRevenue:Math.round(V*100)/100,mileageRevenue:Math.round(Z*100)/100,insuranceRevenue:Math.round(J*100)/100})};x.useEffect(()=>{U()},[s]),x.useEffect(()=>{z()},[]);const z=async()=>{var F;try{j(!0);const le=await K.get("/api/public/hospitals");if((F=le.data)!=null&&F.success){const I=le.data.data||[];d(I),console.log("TCC_DEBUG: EMS loaded facilities:",I.length)}}catch(le){console.error("Error loading facilities:",le)}finally{j(!1)}},ce=(F,le,I,v)=>{const P=(I-F)*Math.PI/180,V=(v-le)*Math.PI/180,Z=Math.sin(P/2)*Math.sin(P/2)+Math.cos(F*Math.PI/180)*Math.cos(I*Math.PI/180)*Math.sin(V/2)*Math.sin(V/2),ee=3959*(2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z)));return Math.round(ee*10)/10},de=(F,le)=>{const I=p.find(v=>v.id===le);if(I){const v=I.latitude&&I.longitude?{lat:I.latitude,lng:I.longitude}:null;f(N=>{const P={...N,[F]:I.name,[`${F}Coordinates`]:v};return F==="origin"&&v&&N.destinationCoordinates?P.distanceMiles=ce(v.lat,v.lng,N.destinationCoordinates.lat,N.destinationCoordinates.lng):F==="destination"&&v&&N.originCoordinates&&(P.distanceMiles=ce(N.originCoordinates.lat,N.originCoordinates.lng,v.lat,v.lng)),P}),F==="origin"&&y(""),F==="destination"&&C("")}},oe=(F,le)=>{F==="origin"?(y(le),f(I=>({...I,origin:le,originCoordinates:null}))):(C(le),f(I=>({...I,destination:le,destinationCoordinates:null})))},S=F=>{const{name:le,value:I,type:v}=F.target;f(N=>({...N,[le]:v==="checkbox"?F.target.checked:I}))},Q=()=>{if(!u.origin||!u.destination||!u.distanceMiles){alert("Please fill in origin, destination, and distance");return}const F=s.baseRates[u.transportLevel],le=s.perMileRates[u.transportLevel],I=s.priorityMultipliers[u.priority],v=s.insuranceRates[u.insuranceCompany][u.transportLevel],N=u.specialRequirements?s.specialSurcharge:0,P=F*I+N,V=(F+le*u.distanceMiles+N)*I,Z=(v+le*u.distanceMiles+N)*I;$({standardRevenue:Math.round(P*100)/100,mileageRevenue:Math.round(V*100)/100,insuranceRevenue:Math.round(Z*100)/100,tripDetails:u})},W=()=>{f({origin:"",destination:"",originCoordinates:null,destinationCoordinates:null,transportLevel:"ALS",priority:"MEDIUM",distanceMiles:0,specialRequirements:!1,insuranceCompany:"medicare"}),y(""),C(""),$(null)},M=()=>{try{return JSON.parse(localStorage.getItem("tcc_saved_routes")||"[]").filter(le=>le.agencyId===e.agencyId||le.agencyId===e.id)}catch{return[]}},T=()=>{if(!u.origin||!u.destination){alert("Please enter origin and destination to save this route");return}const F=`${u.origin}  ${u.destination}`,le=JSON.parse(localStorage.getItem("tcc_saved_routes")||"[]");if(le.find(v=>v.name===F&&(v.agencyId===e.agencyId||v.agencyId===e.id))){if(confirm(`Route "${F}" already exists. Overwrite it?`)){const v=le.map(N=>N.name===F&&(N.agencyId===e.agencyId||N.agencyId===e.id)?{...N,tripData:{...u},lastUpdated:new Date().toISOString()}:N);localStorage.setItem("tcc_saved_routes",JSON.stringify(v)),alert(`Route "${F}" updated successfully!`),R()}}else{const v={name:F,agencyId:e.agencyId||e.id,agencyName:e.agencyName||e.name,tripData:{...u},createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()};le.push(v),localStorage.setItem("tcc_saved_routes",JSON.stringify(le)),alert(`Route "${F}" saved successfully!`),R()}},A=F=>{f(F.tripData),y(""),C(""),$(null)},L=F=>{if(!confirm(`Delete route "${F}"?`))return;const I=JSON.parse(localStorage.getItem("tcc_saved_routes")||"[]").filter(v=>v.name!==F);localStorage.setItem("tcc_saved_routes",JSON.stringify(I)),alert(`Route "${F}" deleted successfully!`),R()},R=()=>{B(F=>F+1)},q=F=>{const{name:le,value:I}=F.target,[v,N]=le.split(".");n(N?P=>({...P,[v]:{...P[v],[N]:parseFloat(I)||0}}):P=>({...P,[le]:parseFloat(I)||0}))},k=F=>{const le=s.customInsuranceCompanies[F];c(F),g({name:le.name,rates:{BLS:le.rates.BLS.toString(),ALS:le.rates.ALS.toString(),CCT:le.rates.CCT.toString()}})},G=()=>{if(!m.name.trim()){alert("Please enter a company name");return}if(!m.rates.BLS||!m.rates.ALS||!m.rates.CCT){alert("Please enter all three rates");return}const F=[...s.customInsuranceCompanies];F[i]={name:m.name,rates:{BLS:parseFloat(m.rates.BLS),ALS:parseFloat(m.rates.ALS),CCT:parseFloat(m.rates.CCT)}},n(le=>({...le,customInsuranceCompanies:F})),c(null),g({name:"",rates:{BLS:"",ALS:"",CCT:""}})},Y=()=>{c(null),g({name:"",rates:{BLS:"",ALS:"",CCT:""}})},te=()=>{if(!l.name.trim()){alert("Please enter a company name");return}if(!l.rates.BLS||!l.rates.ALS||!l.rates.CCT){alert("Please enter all three rates (BLS, ALS, CCT)");return}const F={name:l.name,rates:{BLS:parseFloat(l.rates.BLS),ALS:parseFloat(l.rates.ALS),CCT:parseFloat(l.rates.CCT)}};n(le=>({...le,customInsuranceCompanies:[...le.customInsuranceCompanies,F]})),o({name:"",rates:{BLS:"",ALS:"",CCT:""}}),alert(`Insurance company "${F.name}" added successfully!`)},pe=F=>{const le=s.customInsuranceCompanies[F];confirm(`Delete ${le.name}?`)&&n(I=>({...I,customInsuranceCompanies:I.customInsuranceCompanies.filter((v,N)=>N!==F)}))};return t.jsxs("div",{className:"space-y-8",children:[r&&t.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg shadow-md border border-orange-100",children:[t.jsx("div",{className:"px-6 py-4 border-b border-orange-200",children:t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Revenue Preview"})}),t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-md border border-gray-200 shadow-sm",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Standard Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",r.standardRevenue]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Base rate  priority"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-md border border-gray-200 shadow-sm",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Mileage Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",r.mileageRevenue]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Base + (per mile  distance)"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-md border border-gray-200 shadow-sm",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Insurance Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",r.insuranceRevenue]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Insurance rate + mileage"})]})]})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"My Saved Routes"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Load previously saved routes for quick calculations"})]}),t.jsx("button",{onClick:R,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:"Refresh"})]}),t.jsx("div",{className:"p-6",children:M().length>0?t.jsx("div",{className:"space-y-2",children:M().map((F,le)=>t.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md hover:bg-gray-50",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:F.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:[F.tripData.origin,"  ",F.tripData.destination,"  ",F.tripData.transportLevel,"  ",F.tripData.priority,"  ",F.tripData.distanceMiles," miles"]})]}),t.jsxs("div",{className:"flex space-x-2 ml-4",children:[t.jsx("button",{onClick:()=>A(F),className:"px-3 py-1 text-xs bg-orange-600 text-white rounded hover:bg-orange-700",children:"Load"}),t.jsx("button",{onClick:()=>L(F.name),className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})]},le))},O):t.jsx("p",{className:"text-gray-500 text-center py-4",children:"No saved routes yet. Create and save a route to see it here."})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Trip Revenue Calculator"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Calculate revenue for a specific trip"})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Origin *"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("select",{value:((ke=p.find(F=>F.name===u.origin))==null?void 0:ke.id)||"",onChange:F=>de("origin",F.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500",disabled:h,children:[t.jsx("option",{value:"",children:"Select from known facilities..."}),p.map(F=>t.jsxs("option",{value:F.id,children:[F.name," - ",F.city,", ",F.state]},F.id))]}),t.jsx("div",{className:"text-sm text-gray-500",children:"OR"}),t.jsx("input",{type:"text",value:b,onChange:F=>oe("origin",F.target.value),placeholder:"Enter custom address",className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),u.originCoordinates&&t.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md",children:t.jsxs("p",{className:"text-xs font-medium text-green-800",children:[" GPS Coordinates: ",u.originCoordinates.lat.toFixed(4),", ",u.originCoordinates.lng.toFixed(4)]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Destination *"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("select",{value:((je=p.find(F=>F.name===u.destination))==null?void 0:je.id)||"",onChange:F=>de("destination",F.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500",disabled:h,children:[t.jsx("option",{value:"",children:"Select from known facilities..."}),p.map(F=>t.jsxs("option",{value:F.id,children:[F.name," - ",F.city,", ",F.state]},F.id))]}),t.jsx("div",{className:"text-sm text-gray-500",children:"OR"}),t.jsx("input",{type:"text",value:w,onChange:F=>oe("destination",F.target.value),placeholder:"Enter custom address",className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),u.destinationCoordinates&&t.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-md",children:t.jsxs("p",{className:"text-xs font-medium text-green-800",children:[" GPS Coordinates: ",u.destinationCoordinates.lat.toFixed(4),", ",u.destinationCoordinates.lng.toFixed(4)]})})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Distance (miles) *",u.originCoordinates&&u.destinationCoordinates&&t.jsx("span",{className:"ml-2 text-xs text-green-600 font-normal",children:" Auto-calculated"})]}),t.jsx("input",{type:"number",step:"0.1",name:"distanceMiles",value:u.distanceMiles||"",onChange:S,disabled:!!(u.originCoordinates&&u.destinationCoordinates),className:`mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 ${u.originCoordinates&&u.destinationCoordinates?"bg-gray-100 cursor-not-allowed":""}`})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transport Level *"}),t.jsxs("select",{name:"transportLevel",value:u.transportLevel,onChange:S,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500",children:[t.jsx("option",{value:"BLS",children:"BLS"}),t.jsx("option",{value:"ALS",children:"ALS"}),t.jsx("option",{value:"CCT",children:"CCT"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Priority *"}),t.jsxs("select",{name:"priority",value:u.priority,onChange:S,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500",children:[t.jsx("option",{value:"LOW",children:"Low"}),t.jsx("option",{value:"MEDIUM",children:"Medium"}),t.jsx("option",{value:"HIGH",children:"High"}),t.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Insurance Company *"}),t.jsxs("select",{name:"insuranceCompany",value:u.insuranceCompany,onChange:S,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500",children:[t.jsx("option",{value:"medicare",children:"Medicare"}),t.jsx("option",{value:"medicaid",children:"Medicaid"}),t.jsx("option",{value:"private",children:"Private Insurance"}),t.jsx("option",{value:"selfPay",children:"Self Pay"}),s.customInsuranceCompanies.map((F,le)=>t.jsx("option",{value:F.name.toLowerCase().replace(/\s+/g,"_"),children:F.name},le))]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",name:"specialRequirements",checked:u.specialRequirements,onChange:S,className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),t.jsxs("label",{className:"ml-2 block text-sm text-gray-700",children:["Special Requirements (adds $",s.specialSurcharge," surcharge)"]})]}),t.jsxs("div",{className:"flex space-x-3 pt-4",children:[t.jsx("button",{onClick:Q,className:"flex-1 px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:"Calculate Revenue"}),t.jsx("button",{onClick:T,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:"Save Route"}),t.jsx("button",{onClick:W,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Reset"})]})]})]}),D&&t.jsxs("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg",children:[t.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Revenue Calculation Results"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Standard Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",D.standardRevenue]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Base rate  priority"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Mileage Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",D.mileageRevenue]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Base + (per mile  distance)"})]}),t.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[t.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Insurance Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",D.insuranceRevenue]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Insurance rate + mileage"})]})]}),t.jsxs("div",{className:"mt-4 p-4 bg-orange-50 rounded-md",children:[t.jsx("h6",{className:"text-sm font-medium text-orange-900",children:"Trip Details:"}),t.jsxs("p",{className:"text-sm text-orange-800 mt-1",children:[D.tripDetails.transportLevel," transport from ",D.tripDetails.origin," to ",D.tripDetails.destination,t.jsx("br",{}),D.tripDetails.distanceMiles," miles  ",D.tripDetails.priority," priority  ",D.tripDetails.insuranceCompany," insurance",D.tripDetails.specialRequirements&&"  Special requirements included"]})]})]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"System Revenue Settings"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Configure global pricing rates for revenue calculations"})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Base Rates by Transport Level"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"BLS Base Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:s.baseRates.BLS,onChange:q,name:"baseRates.BLS",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ALS Base Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:s.baseRates.ALS,onChange:q,name:"baseRates.ALS",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CCT Base Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:s.baseRates.CCT,onChange:q,name:"baseRates.CCT",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Per Mile Rates"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"BLS Per Mile ($)"}),t.jsx("input",{type:"number",step:"0.01",value:s.perMileRates.BLS,onChange:q,name:"perMileRates.BLS",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ALS Per Mile ($)"}),t.jsx("input",{type:"number",step:"0.01",value:s.perMileRates.ALS,onChange:q,name:"perMileRates.ALS",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CCT Per Mile ($)"}),t.jsx("input",{type:"number",step:"0.01",value:s.perMileRates.CCT,onChange:q,name:"perMileRates.CCT",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]})]})]})]}),t.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Surcharges"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Configure priority level and special requirement surcharges"})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Priority Level Surcharges (%)"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Percentage multiplier applied to base rate based on trip priority"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Low Priority"}),t.jsx("input",{type:"number",step:"0.01",value:s.priorityMultipliers.LOW,onChange:q,name:"priorityMultipliers.LOW",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Medium Priority"}),t.jsx("input",{type:"number",step:"0.01",value:s.priorityMultipliers.MEDIUM,onChange:q,name:"priorityMultipliers.MEDIUM",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"High Priority"}),t.jsx("input",{type:"number",step:"0.01",value:s.priorityMultipliers.HIGH,onChange:q,name:"priorityMultipliers.HIGH",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Urgent Priority"}),t.jsx("input",{type:"number",step:"0.01",value:s.priorityMultipliers.URGENT,onChange:q,name:"priorityMultipliers.URGENT",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Special Requirements Surcharge ($)"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Fixed dollar amount added for trips with special requirements"}),t.jsx("div",{children:t.jsx("input",{type:"number",step:"0.01",value:s.specialSurcharge,onChange:F=>{n(le=>({...le,specialSurcharge:parseFloat(F.target.value)||0}))},className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:()=>{localStorage.setItem("tcc_revenue_settings",JSON.stringify(s)),alert("Revenue settings saved!")},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:"Save Revenue Settings"})})]})]}),t.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Insurance Company Management"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Add custom insurance companies with their specific rates"})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg",children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Add New Insurance Company"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Name"}),t.jsx("input",{type:"text",value:l.name,onChange:F=>o(le=>({...le,name:F.target.value})),placeholder:"e.g., Blue Cross Blue Shield",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"BLS Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:l.rates.BLS,onChange:F=>o(le=>({...le,rates:{...le.rates,BLS:F.target.value}})),placeholder:"120.00",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ALS Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:l.rates.ALS,onChange:F=>o(le=>({...le,rates:{...le.rates,ALS:F.target.value}})),placeholder:"200.00",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CCT Rate ($)"}),t.jsx("input",{type:"number",step:"0.01",value:l.rates.CCT,onChange:F=>o(le=>({...le,rates:{...le.rates,CCT:F.target.value}})),placeholder:"350.00",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})]})]}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{onClick:te,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:"Add Company"})})]}),s.customInsuranceCompanies.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Custom Insurance Companies"}),t.jsx("div",{className:"space-y-2",children:s.customInsuranceCompanies.map((F,le)=>t.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[i===le?t.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx("div",{children:t.jsx("input",{type:"text",value:m.name,onChange:I=>g(v=>({...v,name:I.target.value})),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})}),t.jsx("div",{children:t.jsx("input",{type:"number",step:"0.01",value:m.rates.BLS,onChange:I=>g(v=>({...v,rates:{...v.rates,BLS:I.target.value}})),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})}),t.jsx("div",{children:t.jsx("input",{type:"number",step:"0.01",value:m.rates.ALS,onChange:I=>g(v=>({...v,rates:{...v.rates,ALS:I.target.value}})),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})}),t.jsx("div",{children:t.jsx("input",{type:"number",step:"0.01",value:m.rates.CCT,onChange:I=>g(v=>({...v,rates:{...v.rates,CCT:I.target.value}})),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500"})})]}):t.jsxs("div",{className:"flex-1",children:[t.jsx("h5",{className:"font-medium text-gray-900",children:F.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:["BLS: $",F.rates.BLS," | ALS: $",F.rates.ALS," | CCT: $",F.rates.CCT]})]}),t.jsx("div",{className:"flex space-x-2 ml-4",children:i===le?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:G,className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"Save"}),t.jsx("button",{onClick:Y,className:"px-3 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancel"})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>k(le),className:"px-3 py-1 text-xs bg-orange-600 text-white rounded hover:bg-orange-700",children:"Edit"}),t.jsx("button",{onClick:()=>pe(le),className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})})]},le))})]})]})]})]})]})]})},ov=({user:e,onLogout:s})=>{const[n,r]=x.useState("available"),[a,l]=x.useState([]),o=I=>{const v=typeof I=="string"?parseInt(I):I;if(isNaN(v))return"Unknown";const N=Math.floor(v/60),P=v%60;return N===0?`${P} min`:P===0?`${N}h`:`${N}h ${P}m`},[i,c]=x.useState({agencyName:e.agencyName||"",email:e.email||"",serviceType:"BLS/ALS",contactName:e.name||"",phone:"",address:"",city:"",state:"",zipCode:""}),[m,g]=x.useState(!1),[u,f]=x.useState(null),[p,d]=x.useState(!1),[h,j]=x.useState({baseRates:{BLS:150,ALS:250,CCT:400},perMileRates:{BLS:2.5,ALS:3.75,CCT:5},priorityMultipliers:{LOW:1,MEDIUM:1.1,HIGH:1.25,URGENT:1.5},specialSurcharge:50,insuranceRates:{medicare:{BLS:120,ALS:200,CCT:350},medicaid:{BLS:100,ALS:180,CCT:300},private:{BLS:180,ALS:300,CCT:450},selfPay:{BLS:200,ALS:350,CCT:500}}}),[b,y]=x.useState(null),[w,C]=x.useState([]),[D,$]=x.useState([]),[O,B]=x.useState(!1),[U,z]=x.useState(null),[ce,de]=x.useState([]),[oe,S]=x.useState([]),[Q,W]=x.useState([]),[M,T]=x.useState([]),[A,L]=x.useState({transportLevel:"ALL",priority:"ALL",maxDistance:"",minRevenue:""}),[R,q]=x.useState([]);x.useEffect(()=>{let I=[...w];A.transportLevel!=="ALL"&&(I=I.filter(v=>v.transportLevel===A.transportLevel)),A.priority!=="ALL"&&(I=I.filter(v=>v.urgencyLevel===A.priority)),q(I)},[w,A]),x.useEffect(()=>{k();const I=setInterval(()=>{k()},3e4);return()=>clearInterval(I)},[]);const k=async()=>{var I;B(!0);try{const v=await K.get("/api/trips?status=PENDING"),P=((I=(await K.get("/api/agency-responses")).data)==null?void 0:I.data)||[],V=new Set(P.map(ee=>ee.tripId));if(v.data){const ee=v.data;if(ee.success&&ee.data){const ue=await Promise.all(ee.data.map(async ie=>{let re="N/A",ye="N/A";try{const he={};ie.fromLocationId&&ie.destinationFacilityId?(he.fromLocationId=ie.fromLocationId,he.destinationFacilityId=ie.destinationFacilityId):(he.fromLocation=ie.fromLocation,he.toLocation=ie.toLocation);const Ne=await K.post("/api/trips/calculate-distance",he);Ne.data.success&&(re=Ne.data.data.distanceFormatted,ye=Ne.data.data.estimatedTimeFormatted)}catch(he){console.log("TCC_DEBUG: Could not calculate distance for trip:",ie.id,he),console.log("TCC_DEBUG: Trip data:",{fromLocation:ie.fromLocation,toLocation:ie.toLocation,fromLocationId:ie.fromLocationId,destinationFacilityId:ie.destinationFacilityId}),re="N/A",ye="N/A"}return{id:ie.id,patientId:ie.patientId,origin:ie.fromLocation||"Unknown Origin",destination:ie.toLocation||"Unknown Destination",pickupLocation:ie.pickupLocation?{name:ie.pickupLocation.name,floor:ie.pickupLocation.floor,room:ie.pickupLocation.room,contactPhone:ie.pickupLocation.contactPhone,contactEmail:ie.pickupLocation.contactEmail}:null,transportLevel:ie.transportLevel||"BLS",urgencyLevel:ie.urgencyLevel||"Routine",distance:re,estimatedTime:ye,requestTime:new Date(ie.createdAt).toLocaleString(),scheduledTime:ie.scheduledTime?new Date(ie.scheduledTime).toLocaleString():null,scheduledTimeISO:ie.scheduledTime||null,assignedUnitId:ie.assignedUnitId,assignedUnit:ie.assignedUnit,hasResponded:V.has(ie.id)}}));C(ue);const H=[],E=[],se=[],ae=[];ue.forEach(ie=>{switch(qa(ie)){case"today":H.push(ie);break;case"future":E.push(ie);break;case"past":se.push(ie);break;case"unscheduled":ae.push(ie);break}}),de(H),S(E),W(se),T(ae)}}const Z=await K.get("/api/trips?status=ACCEPTED,IN_PROGRESS");if(Z.data){const ee=Z.data;if(ee.success&&ee.data){const ue=await Promise.all(ee.data.map(async H=>{let E="N/A",se="N/A";try{const ae={};H.fromLocationId&&H.destinationFacilityId?(ae.fromLocationId=H.fromLocationId,ae.destinationFacilityId=H.destinationFacilityId):(ae.fromLocation=H.fromLocation,ae.toLocation=H.toLocation);const ie=await K.post("/api/trips/calculate-distance",ae);ie.data.success&&(E=ie.data.data.distanceFormatted,se=ie.data.data.estimatedTimeFormatted)}catch(ae){console.log("TCC_DEBUG: Could not calculate distance for accepted trip:",H.id,ae),console.log("TCC_DEBUG: Trip data:",{fromLocation:H.fromLocation,toLocation:H.toLocation,fromLocationId:H.fromLocationId,destinationFacilityId:H.destinationFacilityId}),E="N/A",se="N/A"}return{id:H.id,patientId:H.patientId,origin:H.fromLocation||"Unknown Origin",destination:H.toLocation||"Unknown Destination",transportLevel:H.transportLevel||"BLS",urgencyLevel:H.urgencyLevel||"Routine",status:H.status,distance:E,estimatedTime:se,assignedUnit:H.assignedUnit?{id:H.assignedUnit.id,unitNumber:H.assignedUnit.unitNumber,type:H.assignedUnit.type,currentStatus:H.assignedUnit.currentStatus}:null,pickupTime:H.actualStartTime?new Date(H.actualStartTime).toLocaleString():"Not started",scheduledTime:H.scheduledTime}}));$(ue)}}const J=await K.get("/api/trips?status=COMPLETED");if(J.data){const ee=J.data;if(ee.success&&ee.data){const ue=ee.data.map(H=>({id:H.id,patientId:H.patientId,origin:H.fromLocation||"Unknown Origin",destination:H.toLocation||"Unknown Destination",transportLevel:H.transportLevel||"BLS",urgencyLevel:H.urgencyLevel||"Routine",status:H.status,requestTime:new Date(H.createdAt).toLocaleString(),completionTime:H.completionTimestamp?new Date(H.completionTimestamp).toLocaleString():null,scheduledTime:H.scheduledTime}));l(ue)}}}catch(v){console.error("Error loading trips:",v),z("Failed to load trips")}finally{B(!1)}},G=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s()},Y=()=>{if(a.length===0){alert("No completed trips to export");return}const I=["Patient ID","Origin Facility","Destination Facility","Transport Level","Urgency Level","Request Time","Completion Time","Status"],v=a.map(J=>[J.patientId,J.origin,J.destination,J.transportLevel,J.urgencyLevel,J.requestTime,J.completionTime||"N/A",J.status]),N=[I,...v].map(J=>J.map(ee=>`"${ee}"`).join(",")).join(`
`),P=new Blob([N],{type:"text/csv;charset=utf-8;"}),V=document.createElement("a"),Z=URL.createObjectURL(P);V.setAttribute("href",Z),V.setAttribute("download",`completed-trips-${new Date().toISOString().split("T")[0]}.csv`),V.style.visibility="hidden",document.body.appendChild(V),V.click(),document.body.removeChild(V)},te=I=>{switch(I){case"PENDING":return"text-yellow-800 bg-yellow-200 border border-yellow-300";case"ACCEPTED":return"text-green-800 bg-green-200 border border-green-300 font-bold";case"DECLINED":return"text-red-800 bg-red-200 border border-red-300 font-bold";case"CANCELLED":return"text-red-800 bg-red-200 border border-red-300 font-bold";case"IN_PROGRESS":return"text-blue-800 bg-blue-200 border border-blue-300 font-bold";case"COMPLETED":return"text-gray-800 bg-gray-200 border border-gray-300 font-bold";default:return"text-gray-600 bg-gray-100"}},pe=I=>{switch(I){case"Routine":return"bg-green-100 text-green-800";case"Urgent":return"bg-yellow-100 text-yellow-800";case"Emergent":return"bg-red-100 text-red-800";default:return"bg-green-100 text-green-800"}},ke=()=>{const I={transportLevel:"ALS",priority:"MEDIUM",distanceMiles:15,specialRequirements:!1,insuranceCompany:"medicare"},v=h.baseRates[I.transportLevel],N=h.perMileRates[I.transportLevel],P=h.priorityMultipliers[I.priority],V=h.insuranceRates[I.insuranceCompany][I.transportLevel],Z=I.specialRequirements?h.specialSurcharge:0,J=v*P+Z,ee=(v+N*I.distanceMiles+Z)*P,ue=(V+N*I.distanceMiles+Z)*P;y({sampleTrip:I,standardRevenue:Math.round(J*100)/100,mileageRevenue:Math.round(ee*100)/100,insuranceRevenue:Math.round(ue*100)/100})};x.useEffect(()=>{ke()},[h]);const je=async I=>{var v;try{console.log("TCC_DEBUG: EMS Dashboard - handleAcceptTrip called:",{tripId:I,user:e});const N={tripId:I,agencyId:e.agencyId||e.id,response:"ACCEPTED",responseNotes:"Accepted by EMS agency"};console.log("TCC_DEBUG: EMS Dashboard - Sending agency response payload:",N);const P=await K.post("/api/agency-responses",N);if(P.data&&P.data.success)await k();else throw new Error(((v=P.data)==null?void 0:v.error)||"Failed to accept trip")}catch(N){console.error("Error accepting trip:",N),z(N.message||"Failed to accept trip")}},F=async I=>{try{const v=await K.post("/api/agency-responses",{tripId:I,agencyId:e.agencyId||e.id,response:"DECLINED",responseNotes:"Declined by EMS agency"});if(!v.data.success)throw new Error(v.data.error||"Failed to decline trip");await k()}catch(v){console.error("Error declining trip:",v),z(v.message||"Failed to decline trip")}},le=async(I,v)=>{console.log("TCC_DEBUG: handleUpdateTripStatus called:",{tripId:I,newStatus:v});try{const N={status:v,...v==="IN_PROGRESS"&&{pickupTimestamp:new Date().toISOString()},...v==="COMPLETED"&&{completionTimestamp:new Date().toISOString()}};console.log("TCC_DEBUG: Sending API request to /api/trips/"+I+"/status with payload:",N);const P=await K.put(`/api/trips/${I}/status`,N);if(console.log("TCC_DEBUG: API response:",P.data),!P.data.success)throw new Error(P.data.error||"Failed to update trip status");console.log("TCC_DEBUG: Trip status updated successfully, reloading trips..."),await k()}catch(N){console.error("TCC_DEBUG: Error updating trip status:",N),z(N.message||"Failed to update trip status")}};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white shadow-sm border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-orange-100 p-2 rounded-lg mr-3",children:t.jsx(We,{className:"h-6 w-6 text-orange-600"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:e.agencyName||"EMS Agency"}),t.jsx("p",{className:"text-sm text-gray-500",children:"EMS Agency Dashboard"})]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx(vh,{user:e}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(wr,{className:"h-5 w-5 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-700",children:e.name})]}),t.jsxs("button",{onClick:G,className:"flex items-center space-x-1 text-gray-600 hover:text-gray-800",children:[t.jsx(Ga,{className:"h-4 w-4"}),t.jsx("span",{children:"Logout"})]})]})]})})}),t.jsx("div",{className:"bg-white border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsx("nav",{className:"flex space-x-8",children:[{id:"available",name:"Available Trips",icon:De},{id:"accepted",name:"My Trips",icon:Fe},{id:"completed",name:"Completed Trips",icon:Od},{id:"units",name:"Units",icon:We},{id:"agency-info",name:"Agency Info",icon:Vs},{id:"trip-calculator",name:"Trip Calculator",icon:Gp}].map(I=>{const v=I.icon;return t.jsxs("button",{onClick:()=>{console.log(" EMSDashboard: Tab clicked:",I.id),r(I.id)},className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${n===I.id?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.jsx(v,{className:"h-4 w-4"}),t.jsx("span",{children:I.name})]},I.id)})})})}),t.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n==="available"&&t.jsxs("div",{className:"space-y-6",children:[U&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx(At,{className:"h-5 w-5 text-red-400"}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm font-medium text-red-800",children:U})})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transport Level"}),t.jsxs("select",{value:A.transportLevel,onChange:I=>L(v=>({...v,transportLevel:I.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",children:[t.jsx("option",{value:"ALL",children:"All Levels"}),t.jsx("option",{value:"BLS",children:"BLS"}),t.jsx("option",{value:"ALS",children:"ALS"}),t.jsx("option",{value:"CCT",children:"CCT"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),t.jsxs("select",{value:A.priority,onChange:I=>L(v=>({...v,priority:I.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500",children:[t.jsx("option",{value:"ALL",children:"All Priorities"}),t.jsx("option",{value:"Routine",children:"Routine"}),t.jsx("option",{value:"Urgent",children:"Urgent"}),t.jsx("option",{value:"Emergent",children:"Emergent"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Distance"}),t.jsx("input",{type:"number",value:A.maxDistance,onChange:I=>L(v=>({...v,maxDistance:I.target.value})),placeholder:"No limit",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Revenue ($)"}),t.jsx("input",{type:"number",value:A.minRevenue,onChange:I=>L(v=>({...v,minRevenue:I.target.value})),placeholder:"No minimum",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Available Transport Requests"}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",R.length," of ",w.length," requests"]})]}),t.jsx("button",{onClick:k,disabled:O,className:"px-3 py-1 text-sm bg-orange-100 text-orange-700 rounded-md hover:bg-orange-200 disabled:opacity-50",children:O?"Loading...":"Refresh"})]}),t.jsx("div",{children:(()=>{const I=A.transportLevel==="ALL"?ce:ce.filter(J=>J.transportLevel===A.transportLevel),v=A.transportLevel==="ALL"?oe:oe.filter(J=>J.transportLevel===A.transportLevel),N=A.transportLevel==="ALL"?M:M.filter(J=>J.transportLevel===A.transportLevel),P=A.transportLevel==="ALL"?Q:Q.filter(J=>J.transportLevel===A.transportLevel),V=(J,ee,ue)=>J.length===0?null:t.jsxs("div",{className:"mb-8",children:[t.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:[ee," (",J.length,")"]}),t.jsx("div",{className:"space-y-4",children:J.map(H=>{const E=qa(H);return t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["Patient ",H.patientId," - Requested Pickup Time: ",H.scheduledTime||"Not scheduled"]}),t.jsxs("p",{className:"text-base text-gray-600",children:[H.origin,"  ",H.destination]}),H.pickupLocation&&t.jsxs("p",{className:"text-xs text-blue-600",children:["Pickup: ",H.pickupLocation.name,H.pickupLocation.floor||H.pickupLocation.room?": ":"",H.pickupLocation.floor&&H.pickupLocation.floor,H.pickupLocation.room&&`${H.pickupLocation.floor?" ":""}Room ${H.pickupLocation.room}`,H.pickupLocation.contactPhone&&` Phone: ${H.pickupLocation.contactPhone}`,H.pickupLocation.contactEmail&&` Email: ${H.pickupLocation.contactEmail}`]}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Distance: ",H.distance," Time: ",o(H.estimatedTime)]}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[H.transportLevel," - Ticket Created At: ",H.requestTime]})]})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${pe(H.urgencyLevel||"Routine")}`,children:H.urgencyLevel||"Routine"}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${te("PENDING")}`,children:"PENDING"}),t.jsx("div",{className:"flex space-x-2 ml-4",children:E==="future"?t.jsx("span",{className:"text-sm text-yellow-600 font-medium",children:"Awaiting Authorization"}):t.jsxs(t.Fragment,{children:[!H.hasResponded&&t.jsx("button",{onClick:()=>je(H.id),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 text-sm font-medium",children:"Accept"}),H.hasResponded&&t.jsx("span",{className:"text-sm text-green-600 font-medium",children:" You responded"}),!H.hasResponded&&t.jsx("button",{onClick:()=>F(H.id),className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 text-sm font-medium",children:"Decline"})]})})]})]},H.id)})})]},ue);return I.length>0||v.length>0||N.length>0||P.length>0?t.jsxs("div",{className:"space-y-8",children:[V(I,hs("today"),"today"),V(v,hs("future"),"future"),V(N,hs("unscheduled"),"unscheduled"),V(P,hs("past"),"past")]}):t.jsx("div",{className:"p-6 text-center text-gray-500",children:w.length===0?"No available transport requests at this time.":"No requests match your current filters. Try adjusting your filter settings."})})()})]})]}),n==="accepted"&&t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"My Accepted Trips"}),t.jsx("button",{onClick:k,disabled:O,className:"px-3 py-1 text-sm bg-orange-100 text-orange-700 rounded-md hover:bg-orange-200 disabled:opacity-50",children:O?"Loading...":"Refresh"})]}),t.jsxs("div",{className:"divide-y divide-gray-200",children:[D.map(I=>t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["Patient ",I.patientId]}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${te(I.status)}`,children:I.status})]}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[I.origin,"  ",I.destination]}),t.jsxs("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Distance:"})," ",I.distance]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Time:"})," ",o(I.estimatedTime)]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Pickup Time:"})," ",I.pickupTime]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Level:"})," ",I.transportLevel]})]})]}),t.jsxs("div",{className:"ml-4 flex space-x-2",children:[t.jsx(av,{tripId:I.id,status:I.status,onUpdate:le}),I.status==="COMPLETED"&&t.jsx("span",{className:"text-sm text-gray-500",children:"Completed"})]})]})},I.id)),D.length===0&&t.jsx("div",{className:"p-6 text-center text-gray-500",children:"No accepted trips at this time."})]})]}),n==="completed"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Completed Trips"}),t.jsx("button",{onClick:Y,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 text-sm font-medium",children:"Export CSV"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Completed Transport Requests (",a.length,")"]})}),t.jsx("div",{className:"p-6",children:a.length>0?t.jsx("div",{className:"space-y-4",children:a.map(I=>t.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"flex items-center space-x-4",children:t.jsxs("div",{children:[t.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:["Patient ",I.patientId]}),t.jsxs("p",{className:"text-sm text-gray-500",children:[I.origin,"  ",I.destination]})]})}),t.jsxs("div",{className:"mt-2 flex items-center space-x-6 text-sm text-gray-500",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Transport Level:"})," ",I.transportLevel]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Priority:"})," ",I.urgencyLevel]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Request Time:"})," ",I.requestTime]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Completion Time:"})," ",I.completionTime||"N/A"]})]})]}),t.jsxs("div",{className:"ml-4 flex items-center space-x-2",children:[t.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${te(I.status)}`,children:I.status}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${pe(I.urgencyLevel||"Routine")}`,children:I.urgencyLevel||"Routine"})]})]})},I.id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Od,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No completed trips"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Completed trips will appear here once they are finished."})]})})]})]}),n==="agency-info"&&t.jsx(tv,{user:e,onSaveSuccess:()=>r("available")}),n==="trip-calculator"&&t.jsx(lv,{user:e}),n==="units"&&t.jsx(rv,{user:e,acceptedTrips:D}),!1]})]})},iv=({onRoleSelect:e,onShowRegistration:s,onClearSession:n})=>{const[r,a]=x.useState(!1),l=i=>{a(!0),e(i)},o=()=>{a(!1)};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto h-16 w-16 bg-primary-600 rounded-full flex items-center justify-center",children:t.jsx(at,{className:"h-8 w-8 text-white"})}),t.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Welcome to TCC"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Select your login type to continue"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("button",{onClick:()=>l("healthcare"),className:"group relative w-full flex justify-center py-4 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200",children:[t.jsx(at,{className:"h-5 w-5 mr-2"}),"Healthcare Facility Login"]}),t.jsxs("button",{onClick:()=>l("ems"),className:"group relative w-full flex justify-center py-4 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-colors duration-200",children:[t.jsx(We,{className:"h-5 w-5 mr-2"}),"EMS Agency Login"]}),t.jsxs("button",{onClick:()=>l("tcc"),className:"group relative w-full flex justify-center py-4 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[t.jsx(l0,{className:"h-5 w-5 mr-2"}),"Transport Center Login"]})]}),t.jsx("div",{className:"mt-8 border-t border-gray-200 pt-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Don't have an account? Create one for your organization:"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{onClick:()=>s("healthcare"),className:"w-full flex items-center justify-center px-4 py-2 border border-green-300 text-sm font-medium rounded-md text-green-700 bg-green-50 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200",children:[t.jsx(Gd,{className:"h-4 w-4 mr-2"}),"Create Healthcare Facility Account"]}),t.jsxs("button",{onClick:()=>s("ems"),className:"w-full flex items-center justify-center px-4 py-2 border border-orange-300 text-sm font-medium rounded-md text-orange-700 bg-orange-50 hover:bg-orange-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-colors duration-200",children:[t.jsx(Gd,{className:"h-4 w-4 mr-2"}),"Create EMS Agency Account"]})]}),n&&t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsx("button",{onClick:n,className:"w-full text-xs text-gray-500 hover:text-gray-700 underline",children:"Clear Session & Start Fresh"})})]})}),r&&t.jsx("div",{className:"text-center",children:t.jsxs("button",{onClick:o,className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700 transition-colors duration-200",children:[t.jsx(Ss,{className:"h-4 w-4 mr-1"}),"Back to Selection"]})})]})})},cv=({onBack:e,onSuccess:s})=>{var b,y,w,C,D,$,O,B,U,z,ce,de,oe,S,Q,W;const[n,r]=x.useState({facilityName:"",facilityType:"",manageMultipleLocations:!1,contactName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",latitude:"",longitude:"",password:"",confirmPassword:""}),[a,l]=x.useState(!1),[o,i]=x.useState(null),[c,m]=x.useState(!1),[g,u]=x.useState(!1),f=["Hospital","Clinic","Urgent Care","Rehabilitation Facility","Doctor's Office","Dialysis Center","Nursing Home","Assisted Living","Other"],p=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],d=async()=>{if(!n.address||!n.city||!n.state||!n.zipCode){i("Please fill in address, city, state, and ZIP code before looking up coordinates");return}u(!0),i(null);const M=`${n.address}, ${n.city}, ${n.state} ${n.zipCode}`;console.log("TCC_DEBUG: Geocoding address:",M);const T=[M,`${n.address}, ${n.city}, ${n.state}`,`${n.city}, ${n.state}`,`${n.facilityName}, ${n.city}, ${n.state}`],A=[{name:"OpenStreetMap Nominatim",url:L=>`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(L)}&limit=1&addressdetails=1`,headers:{"User-Agent":"TCC-Healthcare-App/1.0"}},{name:"OpenStreetMap Nominatim (alt)",url:L=>`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(L)}&format=json&limit=1&addressdetails=1&countrycodes=us`,headers:{"User-Agent":"TCC-Healthcare-App/1.0"}}];for(const L of T){console.log(`TCC_DEBUG: Trying address variation: "${L}"`);for(const R of A)try{console.log(`TCC_DEBUG: Trying ${R.name} with "${L}"...`);const q=await fetch(R.url(L),{method:"GET",headers:R.headers,mode:"cors"});if(console.log(`TCC_DEBUG: ${R.name} response status:`,q.status),!q.ok){console.log(`TCC_DEBUG: ${R.name} failed with status:`,q.status);continue}const k=await q.json();if(console.log(`TCC_DEBUG: ${R.name} response data:`,k),k&&k.length>0){const G=k[0];if(console.log(`TCC_DEBUG: ${R.name} result:`,G),G.lat&&G.lon){r(Y=>({...Y,latitude:G.lat,longitude:G.lon})),i(null),console.log("TCC_DEBUG: Coordinates set successfully:",G.lat,G.lon),u(!1);return}}console.log(`TCC_DEBUG: ${R.name} returned no valid results for "${L}"`)}catch(q){console.log(`TCC_DEBUG: ${R.name} error for "${L}":`,q);continue}}console.log("TCC_DEBUG: All geocoding services failed"),i("Address not found. Please enter coordinates manually or try a different address format."),u(!1)},h=M=>{const{name:T,value:A,type:L}=M.target,R=M.target.checked;r(q=>({...q,[T]:L==="checkbox"?R:A}))},j=async M=>{var L,R;if(M.preventDefault(),l(!0),i(null),n.password!==n.confirmPassword){i("Passwords do not match"),l(!1);return}if(n.password.length<8){i("Password must be at least 8 characters long"),l(!1);return}if(!n.latitude||!n.longitude){i("Location coordinates are required. Please lookup or enter latitude and longitude."),l(!1);return}const T=parseFloat(n.latitude),A=parseFloat(n.longitude);if(isNaN(T)||isNaN(A)){i("Please enter valid numeric coordinates."),l(!1);return}if(T<-90||T>90){i("Latitude must be between -90 and 90 degrees."),l(!1);return}if(A<-180||A>180){i("Longitude must be between -180 and 180 degrees."),l(!1);return}try{console.log("TCC_DEBUG: Submitting healthcare registration with data:",n);const q=await fetch("http://localhost:5001/api/auth/healthcare/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.contactName,email:n.email,password:n.password,facilityName:n.facilityName,facilityType:n.facilityType,manageMultipleLocations:n.manageMultipleLocations,phone:n.phone,address:n.address,city:n.city,state:n.state,zipCode:n.zipCode,latitude:parseFloat(n.latitude),longitude:parseFloat(n.longitude)})}),k=await q.json();if(!q.ok){const G=k.error||k.message||"Registration failed. Please try again.";throw new Error(G)}console.log("TCC_DEBUG: Healthcare registration successful:",k),m(!0),setTimeout(()=>{s()},2e3)}catch(q){console.error("Healthcare registration error:",q);let k="Registration failed. Please try again.";q.message?k=q.message:(R=(L=q.response)==null?void 0:L.data)!=null&&R.error&&(k=q.response.data.error),i(k)}finally{l(!1)}};return c?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"max-w-md w-full space-y-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Fe,{className:"mx-auto h-16 w-16 text-green-500"}),t.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Registration Submitted!"}),t.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["We've sent a verification email to ",n.email,". Please check your inbox and click the verification link to activate your account."]}),t.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Your account will be reviewed by our team and approved within 24 hours."})]})})}):t.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"mx-auto h-16 w-16 bg-green-600 rounded-full flex items-center justify-center",children:t.jsx(at,{className:"h-8 w-8 text-white"})}),t.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Create Healthcare Facility Account"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Register your healthcare facility to start using TCC"})]}),o&&t.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx(Yt,{className:"h-5 w-5 text-red-400"}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm font-medium text-red-800",children:o})})]})}),t.jsxs("div",{className:"bg-white shadow rounded-lg",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Healthcare Facility Information"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter your healthcare facility details to create an account"})]}),t.jsx("div",{className:"px-6 py-6",children:t.jsxs("form",{className:"space-y-6",onSubmit:j,children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"facilityName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Facility Name *"}),t.jsx("input",{type:"text",id:"facilityName",name:"facilityName",required:!0,value:n.facilityName,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter facility name"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"facilityType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Facility Type *"}),t.jsxs("select",{id:"facilityType",name:"facilityType",required:!0,value:n.facilityType,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"Select facility type"}),f.map(M=>t.jsx("option",{value:M,children:M},M))]})]})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex items-center h-5",children:t.jsx("input",{type:"checkbox",id:"manageMultipleLocations",name:"manageMultipleLocations",checked:n.manageMultipleLocations,onChange:h,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("label",{htmlFor:"manageMultipleLocations",className:"font-medium text-gray-900",children:"Manage Multiple Locations"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Check this if you manage multiple hospitals, clinics, or facilities that need to arrange transportation. You'll be able to add and manage all your locations after creating your account."}),n.manageMultipleLocations&&t.jsx("div",{className:"mt-2 bg-green-50 border border-green-200 rounded p-2",children:t.jsx("p",{className:"text-sm text-green-800",children:" You'll be able to add your locations in Settings after registration"})})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"contactName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person Name *"}),t.jsx("input",{type:"text",id:"contactName",name:"contactName",required:!0,value:n.contactName,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter contact person name"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(cl,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:n.email,onChange:h,className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter email address"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(bn,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{type:"tel",id:"phone",name:"phone",required:!0,value:n.phone,onChange:h,className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter phone number"})]})]}),t.jsx("div",{})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address *"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(De,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{type:"text",id:"address",name:"address",required:!0,value:n.address,onChange:h,className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter street address"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),t.jsx("input",{type:"text",id:"city",name:"city",required:!0,value:n.city,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"City"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),t.jsxs("select",{id:"state",name:"state",required:!0,value:n.state,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[t.jsx("option",{value:"",children:"State"}),p.map(M=>t.jsx("option",{value:M,children:M},M))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code *"}),t.jsx("input",{type:"text",id:"zipCode",name:"zipCode",required:!0,value:n.zipCode,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"ZIP Code"})]})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx(De,{className:"h-5 w-5 text-blue-600 mr-2"}),t.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Location Coordinates"})]}),t.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Location coordinates are required for agency distance calculations. You can either lookup coordinates automatically or enter them manually."}),t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3 mb-4",children:t.jsxs("p",{className:"text-sm text-yellow-800",children:[t.jsx("strong",{children:"Tip:"}),` If the exact address doesn't work, try using just the facility name and city (e.g., "Hurley Medical Center, Flint, MI") or a well-known address format like "123 Main St, City, State 12345"`]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("button",{type:"button",onClick:d,disabled:g||!((b=n.address)!=null&&b.trim())||!((y=n.city)!=null&&y.trim())||!((w=n.state)!=null&&w.trim())||!((C=n.zipCode)!=null&&C.trim()),className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${g||!((D=n.address)!=null&&D.trim())||!(($=n.city)!=null&&$.trim())||!((O=n.state)!=null&&O.trim())||!((B=n.zipCode)!=null&&B.trim())?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:g?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",children:t.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full"})}),"Looking up..."]}):t.jsxs(t.Fragment,{children:[t.jsx(De,{className:"h-4 w-4 mr-2"}),"Lookup Coordinates"]})}),g||!((U=n.address)!=null&&U.trim())||!((z=n.city)!=null&&z.trim())||!((ce=n.state)!=null&&ce.trim())||!((de=n.zipCode)!=null&&de.trim())?t.jsx("p",{className:"text-xs text-red-500 mt-1",children:g?"Looking up coordinates...":`Please fill in: ${[!((oe=n.address)!=null&&oe.trim())&&"Address",!((S=n.city)!=null&&S.trim())&&"City",!((Q=n.state)!=null&&Q.trim())&&"State",!((W=n.zipCode)!=null&&W.trim())&&"ZIP Code"].filter(Boolean).join(", ")}`}):t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click to automatically find coordinates from your address"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"latitude",className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitude"}),t.jsx("input",{type:"number",step:"any",id:"latitude",name:"latitude",value:n.latitude,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., 40.1234"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"longitude",className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitude"}),t.jsx("input",{type:"number",step:"any",id:"longitude",name:"longitude",value:n.longitude,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"e.g., -78.5678"})]})]}),n.latitude&&n.longitude&&t.jsxs("div",{className:"text-sm text-green-600 bg-green-50 border border-green-200 rounded p-2",children:[" Coordinates set: ",n.latitude,", ",n.longitude]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),t.jsx("input",{type:"password",id:"password",name:"password",required:!0,value:n.password,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter password (min 8 characters)"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),t.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",required:!0,value:n.confirmPassword,onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Confirm password"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsxs("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[t.jsx(Ss,{className:"h-4 w-4 mr-1 inline"}),"Back to Login Selection"]}),t.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Creating Account...":"Create Account"})]})]})})]})]})})},dv=({onBack:e,onSuccess:s})=>{var C,D,$,O,B,U,z,ce,de,oe,S,Q,W,M,T,A;const[n,r]=x.useState({agencyName:"",contactName:"",email:"",phone:"",address:"",city:"",state:"",zipCode:"",latitude:"",longitude:"",serviceArea:[],capabilities:[],operatingHours:{start:"",end:""},password:"",confirmPassword:""}),[a,l]=x.useState(!1),[o,i]=x.useState(null),[c,m]=x.useState(!1),[g,u]=x.useState(!1),f=["Emergency Medical Services","Non-Emergency Medical Transport","Wheelchair Transport","Critical Care Transport","Neonatal Transport","Pediatric Transport","Bariatric Transport","Air Ambulance","Ground Ambulance","Specialized Medical Transport"],p=["BLS","ALS","CCT","Critical Care","Neonatal","Pediatric","Bariatric","Isolation"],d=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],h=async()=>{if(!n.address||!n.city||!n.state||!n.zipCode){i("Please fill in address, city, state, and ZIP code before looking up coordinates");return}u(!0),i(null);const L=`${n.address}, ${n.city}, ${n.state} ${n.zipCode}`;console.log("TCC_DEBUG: Geocoding address:",L);const R=[L,`${n.address}, ${n.city}, ${n.state}`,`${n.city}, ${n.state}`,`${n.agencyName}, ${n.city}, ${n.state}`],q=[{name:"OpenStreetMap Nominatim",url:k=>`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(k)}&limit=1&addressdetails=1`,headers:{"User-Agent":"TCC-Healthcare-App/1.0"}},{name:"OpenStreetMap Nominatim (alt)",url:k=>`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(k)}&format=json&limit=1&addressdetails=1&countrycodes=us`,headers:{"User-Agent":"TCC-Healthcare-App/1.0"}}];for(const k of R){console.log(`TCC_DEBUG: Trying address variation: "${k}"`);for(const G of q)try{console.log(`TCC_DEBUG: Trying ${G.name} with "${k}"...`);const Y=await fetch(G.url(k),{method:"GET",headers:G.headers,mode:"cors"});if(console.log(`TCC_DEBUG: ${G.name} response status:`,Y.status),!Y.ok){console.log(`TCC_DEBUG: ${G.name} failed with status:`,Y.status);continue}const te=await Y.json();if(console.log(`TCC_DEBUG: ${G.name} response data:`,te),te&&te.length>0){const pe=te[0];if(console.log(`TCC_DEBUG: ${G.name} result:`,pe),pe.lat&&pe.lon){r(ke=>({...ke,latitude:pe.lat,longitude:pe.lon})),i(null),console.log("TCC_DEBUG: Coordinates set successfully:",pe.lat,pe.lon),u(!1);return}}console.log(`TCC_DEBUG: ${G.name} returned no valid results for "${k}"`)}catch(Y){console.log(`TCC_DEBUG: ${G.name} error for "${k}":`,Y);continue}}console.log("TCC_DEBUG: All geocoding services failed"),i("Address not found. Please enter coordinates manually or try a different address format."),u(!1)},j=L=>{const{name:R,value:q}=L.target;r(R==="operatingHours.start"||R==="operatingHours.end"?k=>({...k,operatingHours:{...k.operatingHours,[R.split(".")[1]]:q}}):k=>({...k,[R]:q}))},b=L=>{r(R=>({...R,capabilities:R.capabilities.includes(L)?R.capabilities.filter(q=>q!==L):[...R.capabilities,L]}))},y=L=>{r(R=>({...R,serviceArea:R.serviceArea.includes(L)?R.serviceArea.filter(q=>q!==L):[...R.serviceArea,L]}))},w=async L=>{var k,G;if(L.preventDefault(),l(!0),i(null),n.password!==n.confirmPassword){i("Passwords do not match"),l(!1);return}if(n.password.length<8){i("Password must be at least 8 characters long"),l(!1);return}if(n.serviceArea.length===0){i("Please select at least one service area"),l(!1);return}if(n.capabilities.length===0){i("Please select at least one service capability"),l(!1);return}if(!n.latitude||!n.longitude){i("Location coordinates are required. Please lookup or enter latitude and longitude."),l(!1);return}const R=parseFloat(n.latitude),q=parseFloat(n.longitude);if(isNaN(R)||isNaN(q)){i("Please enter valid numeric coordinates."),l(!1);return}if(R<-90||R>90){i("Latitude must be between -90 and 90 degrees."),l(!1);return}if(q<-180||q>180){i("Longitude must be between -180 and 180 degrees."),l(!1);return}try{console.log("TCC_DEBUG: Submitting EMS agency registration with data:",n);const Y=await fetch("http://localhost:5001/api/auth/ems/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.contactName,email:n.email,password:n.password,agencyName:n.agencyName,phone:n.phone,address:n.address,city:n.city,state:n.state,zipCode:n.zipCode,latitude:parseFloat(n.latitude),longitude:parseFloat(n.longitude),serviceArea:n.serviceArea,capabilities:n.capabilities,operatingHours:n.operatingHours.start&&n.operatingHours.end?`${n.operatingHours.start} - ${n.operatingHours.end}`:"24/7"})}),te=await Y.json();if(!Y.ok){const pe=te.error||te.message||"Registration failed. Please try again.";throw new Error(pe)}console.log("TCC_DEBUG: EMS registration successful:",te),m(!0),setTimeout(()=>{s()},2e3)}catch(Y){console.error("EMS registration error:",Y);let te="Registration failed. Please try again.";Y.message?te=Y.message:(G=(k=Y.response)==null?void 0:k.data)!=null&&G.error&&(te=Y.response.data.error),i(te)}finally{l(!1)}};return c?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"max-w-md w-full space-y-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Fe,{className:"mx-auto h-16 w-16 text-orange-500"}),t.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Registration Submitted!"}),t.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["We've sent a verification email to ",n.email,". Please check your inbox and click the verification link to activate your account."]}),t.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Your account will be reviewed by our team and approved within 24 hours."})]})})}):t.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"mx-auto h-16 w-16 bg-orange-600 rounded-full flex items-center justify-center",children:t.jsx(We,{className:"h-8 w-8 text-white"})}),t.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Create EMS Agency Account"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Register your EMS agency to start using TCC"})]}),o&&t.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx(Yt,{className:"h-5 w-5 text-red-400"}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm font-medium text-red-800",children:o})})]})}),t.jsxs("div",{className:"bg-white shadow rounded-lg",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"EMS Agency Information"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Enter your EMS agency details to create an account"})]}),t.jsx("div",{className:"px-6 py-6",children:t.jsxs("form",{className:"space-y-6",onSubmit:w,children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"agencyName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Agency Name *"}),t.jsx("input",{type:"text",id:"agencyName",name:"agencyName",required:!0,value:n.agencyName,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter agency name"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"contactName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person Name *"}),t.jsx("input",{type:"text",id:"contactName",name:"contactName",required:!0,value:n.contactName,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter contact person name"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(cl,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:n.email,onChange:j,className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter email address"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(bn,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{type:"tel",id:"phone",name:"phone",required:!0,value:n.phone,onChange:j,className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter phone number"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address *"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(De,{className:"h-5 w-5 text-gray-400"})}),t.jsx("input",{type:"text",id:"address",name:"address",required:!0,value:n.address,onChange:j,className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter street address"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),t.jsx("input",{type:"text",id:"city",name:"city",required:!0,value:n.city,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"City"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700 mb-2",children:"State *"}),t.jsxs("select",{id:"state",name:"state",required:!0,value:n.state,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[t.jsx("option",{value:"",children:"State"}),d.map(L=>t.jsx("option",{value:L,children:L},L))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP Code *"}),t.jsx("input",{type:"text",id:"zipCode",name:"zipCode",required:!0,value:n.zipCode,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"ZIP Code"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Areas * (Select all that apply)"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:f.map(L=>t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:n.serviceArea.includes(L),onChange:()=>y(L),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:L})]},L))})]}),t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center mb-3",children:[t.jsx(De,{className:"h-5 w-5 text-blue-600 mr-2"}),t.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Location Coordinates"})]}),t.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Location coordinates are required for distance calculations and agency matching. You can either lookup coordinates automatically or enter them manually."}),t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3 mb-4",children:t.jsxs("p",{className:"text-sm text-yellow-800",children:[t.jsx("strong",{children:"Tip:"}),` If the exact address doesn't work, try using just the agency name and city (e.g., "City EMS, Flint, MI") or a well-known address format like "123 Main St, City, State 12345"`]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("button",{type:"button",onClick:h,disabled:g||!((C=n.address)!=null&&C.trim())||!((D=n.city)!=null&&D.trim())||!(($=n.state)!=null&&$.trim())||!((O=n.zipCode)!=null&&O.trim()),className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${g||!((B=n.address)!=null&&B.trim())||!((U=n.city)!=null&&U.trim())||!((z=n.state)!=null&&z.trim())||!((ce=n.zipCode)!=null&&ce.trim())?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:g?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",children:t.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full"})}),"Looking up..."]}):t.jsxs(t.Fragment,{children:[t.jsx(De,{className:"h-4 w-4 mr-2"}),"Lookup Coordinates"]})}),g||!((de=n.address)!=null&&de.trim())||!((oe=n.city)!=null&&oe.trim())||!((S=n.state)!=null&&S.trim())||!((Q=n.zipCode)!=null&&Q.trim())?t.jsx("p",{className:"text-xs text-red-500 mt-1",children:g?"Looking up coordinates...":`Please fill in: ${[!((W=n.address)!=null&&W.trim())&&"Address",!((M=n.city)!=null&&M.trim())&&"City",!((T=n.state)!=null&&T.trim())&&"State",!((A=n.zipCode)!=null&&A.trim())&&"ZIP Code"].filter(Boolean).join(", ")}`}):t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Click to automatically find coordinates from your address"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Latitude"}),t.jsx("input",{type:"number",step:"any",name:"latitude",value:n.latitude,onChange:j,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 sm:text-sm",placeholder:"e.g., 40.1234"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Longitude"}),t.jsx("input",{type:"number",step:"any",name:"longitude",value:n.longitude,onChange:j,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 sm:text-sm",placeholder:"e.g., -78.5678"})]})]}),n.latitude&&n.longitude&&t.jsxs("div",{className:"text-sm text-green-600 bg-green-50 border border-green-200 rounded p-2",children:[" Coordinates set: ",n.latitude,", ",n.longitude]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Capabilities * (Select all that apply)"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(L=>t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:n.capabilities.includes(L),onChange:()=>b(L),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),t.jsx("span",{className:"ml-2 text-sm text-gray-700",children:L})]},L))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transport Availability (Optional)"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"operatingHoursStart",className:"block text-xs text-gray-500 mb-1",children:"Start Time"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Ht,{className:"h-4 w-4 text-gray-400"})}),t.jsx("input",{type:"time",id:"operatingHoursStart",name:"operatingHours.start",value:n.operatingHours.start,onChange:j,className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"operatingHoursEnd",className:"block text-xs text-gray-500 mb-1",children:"End Time"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(Ht,{className:"h-4 w-4 text-gray-400"})}),t.jsx("input",{type:"time",id:"operatingHoursEnd",name:"operatingHours.end",value:n.operatingHours.end,onChange:j,className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Leave blank for 24/7 availability. Specify hours only if you have restrictions (e.g., "Monday-Friday 6 AM - 6 PM")'})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),t.jsx("input",{type:"password",id:"password",name:"password",required:!0,value:n.password,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter password (min 8 characters)"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),t.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",required:!0,value:n.confirmPassword,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Confirm password"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsxs("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:[t.jsx(Ss,{className:"h-4 w-4 mr-1 inline"}),"Back to Login Selection"]}),t.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Creating Account...":"Create Account"})]})]})})]})]})})},uv=({onBack:e,onLogin:s})=>{console.log("TCC_DEBUG: HealthcareLogin component rendering");const[n,r]=x.useState({email:"",password:""}),[a,l]=x.useState(!1),[o,i]=x.useState(""),c=g=>{const{name:u,value:f}=g.target;r(p=>({...p,[u]:f}))},m=async g=>{var u,f;g.preventDefault(),l(!0),i("");try{localStorage.removeItem("token"),localStorage.removeItem("user"),console.log("TCC_DEBUG: Attempting healthcare login with data:",n);const p=await fl.healthcareLogin(n);if(p.data.success){const{user:d,token:h}=p.data;console.log("TCC_DEBUG: Healthcare login successful:",d),localStorage.setItem("token",h),localStorage.setItem("user",JSON.stringify(d)),s(d,h)}else throw new Error(p.data.error||"Login failed")}catch(p){console.error("Healthcare login error:",p);const d=((f=(u=p.response)==null?void 0:u.data)==null?void 0:f.error)||p.message||"Login failed. Please try again.";i(d)}finally{l(!1)}};return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:t.jsx(at,{className:"h-8 w-8 text-green-600"})})}),t.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Healthcare Facility Login"}),t.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your healthcare facility account"})]}),t.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),t.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:n.email,onChange:c,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),t.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:n.password,onChange:c,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500 focus:z-10 sm:text-sm",placeholder:"Enter your password"})]})]}),o&&t.jsxs("div",{className:"flex items-center text-red-600 text-sm",children:[t.jsx(At,{className:"h-4 w-4 mr-2"}),o]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Signing in...":"Sign In"})}),t.jsx("div",{className:"text-center",children:t.jsxs("button",{onClick:e,className:"flex items-center justify-center text-gray-600 hover:text-gray-800 text-sm",children:[t.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Back to Login Options"]})})]})]})})},mv=({onBack:e,onLogin:s})=>{const[n,r]=x.useState({email:"",password:""}),[a,l]=x.useState(!1),[o,i]=x.useState(""),c=g=>{const{name:u,value:f}=g.target;r(p=>({...p,[u]:f}))},m=async g=>{var u,f,p;g.preventDefault(),l(!0),i("");try{localStorage.removeItem("token"),localStorage.removeItem("user");const{authAPI:d}=await ti(async()=>{const{authAPI:j}=await Promise.resolve().then(()=>ei);return{authAPI:j}},void 0);console.log("TCC_DEBUG: EMS Login attempt with:",n.email);const h=await d.login({email:n.email,password:n.password});console.log("TCC_DEBUG: EMS Login response:",h.data),h.data.success?(console.log("TCC_DEBUG: EMS Login successful, calling onLogin with user:",h.data.user),s(h.data.user,h.data.token)):(console.log("TCC_DEBUG: EMS Login failed:",h.data.error),i(h.data.error||"Login failed"))}catch(d){console.error("TCC_DEBUG: EMS login error:",d),console.error("TCC_DEBUG: Error response:",(u=d.response)==null?void 0:u.data);const h=((p=(f=d.response)==null?void 0:f.data)==null?void 0:p.error)||d.message||"Network error. Please try again.";i(h)}finally{l(!1)}};return t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"bg-orange-100 p-3 rounded-full",children:t.jsx(We,{className:"h-8 w-8 text-orange-600"})})}),t.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"EMS Agency Login"}),t.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your EMS agency account"})]}),t.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),t.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:n.email,onChange:c,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Enter your email"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),t.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:n.password,onChange:c,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Enter your password"})]})]}),o&&t.jsxs("div",{className:"flex items-center text-red-600 text-sm",children:[t.jsx(At,{className:"h-4 w-4 mr-2"}),o]}),t.jsx("div",{children:t.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Signing in...":"Sign In"})}),t.jsx("div",{className:"text-center",children:t.jsxs("button",{onClick:e,className:"flex items-center justify-center text-gray-600 hover:text-gray-800 text-sm",children:[t.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Back to Login Options"]})})]})]})})};class pv extends Sr.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,message:(s==null?void 0:s.message)||"Render error"}}componentDidCatch(s,n){console.error("Render error boundary caught:",s,n)}render(){return this.state.hasError?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:t.jsxs("div",{className:"bg-white shadow rounded-lg p-8 max-w-xl text-center",children:[t.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:t.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),t.jsx("h2",{className:"text-xl font-semibold text-red-700 mb-2",children:"Something went wrong"}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:this.state.message}),t.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Reload Page"})]})}):this.props.children}}const hv=({onNavigate:e})=>{const[s,n]=x.useState([]),[r,a]=x.useState(!0),[l,o]=x.useState(null),[i,c]=x.useState({status:"PENDING",transportLevel:"ALL",priority:"ALL",maxDistance:"",minRevenue:""});x.useEffect(()=>{m()},[i]);const m=async()=>{try{a(!0),o(null);const h=localStorage.getItem("userRole"),j=localStorage.getItem("agencyToken"),b=localStorage.getItem("token"),y=h==="ADMIN"?`Bearer ${b}`:`Bearer ${j}`;if(!y||y==="Bearer null"){n([{id:"demo-transport-1",patientId:"PAT-001",originFacility:{name:"UPMC Altoona Hospital",address:"620 Howard Ave",city:"Altoona",state:"PA"},destinationFacility:{name:"Penn State Health Milton S. Hershey Medical Center",address:"500 University Dr",city:"Hershey",state:"PA"},transportLevel:"CCT",priority:"HIGH",specialRequirements:"Ventilator support, ICU nurse required",estimatedDistance:45.2,estimatedDuration:65,revenuePotential:580,status:"PENDING",createdAt:"2025-08-27T08:00:00Z"},{id:"demo-transport-2",patientId:"PAT-002",originFacility:{name:"Mount Nittany Medical Center",address:"1800 E Park Ave",city:"State College",state:"PA"},destinationFacility:{name:"Geisinger Medical Center",address:"100 N Academy Ave",city:"Danville",state:"PA"},transportLevel:"ALS",priority:"MEDIUM",specialRequirements:"Cardiac monitoring",estimatedDistance:32.8,estimatedDuration:45,revenuePotential:420,status:"PENDING",createdAt:"2025-08-27T09:30:00Z"}]);return}const w=new URLSearchParams;Object.entries(i).forEach(([D,$])=>{$&&$!=="ALL"&&w.append(D,$.toString())});const C=await fetch(`/api/agency/transport-requests?${w.toString()}`,{headers:{Authorization:y}});if(C.ok){const D=await C.json();n(D.requests||[])}else throw new Error("Failed to load transport requests")}catch(h){const j=h instanceof Error?h.message:"Failed to load transport requests";console.error("[MedPort:TripAcceptance] Error loading transport requests:",h),o(j)}finally{a(!1)}},g=async h=>{try{const j=localStorage.getItem("userRole"),b=localStorage.getItem("agencyToken"),y=localStorage.getItem("token"),w=j==="ADMIN"?`Bearer ${y}`:`Bearer ${b}`;if(!w||w==="Bearer null"){alert("Demo mode: Trip would be accepted successfully!"),m();return}if((await fetch(`/api/agency/transport-requests/${h}/accept`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:w}})).ok)alert("Trip accepted successfully!"),m();else throw new Error("Failed to accept trip")}catch(j){console.error("[MedPort:TripAcceptance] Error accepting trip:",j),alert(`Error: ${j instanceof Error?j.message:"Failed to accept trip"}`)}},u=async(h,j)=>{try{const b=localStorage.getItem("userRole"),y=localStorage.getItem("agencyToken"),w=localStorage.getItem("token"),C=b==="ADMIN"?`Bearer ${w}`:`Bearer ${y}`;if(!C||C==="Bearer null"){alert("Demo mode: Trip would be rejected successfully!"),m();return}if((await fetch(`/api/agency/transport-requests/${h}/reject`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:C},body:JSON.stringify({reason:j})})).ok)alert("Trip rejected successfully!"),m();else throw new Error("Failed to reject trip")}catch(b){console.error("[MedPort:TripAcceptance] Error rejecting trip:",b),alert(`Error: ${b instanceof Error?b.message:"Failed to reject trip"}`)}},f=h=>{switch(h){case"URGENT":return"bg-red-100 text-red-800";case"HIGH":return"bg-orange-100 text-orange-800";case"MEDIUM":return"bg-yellow-100 text-yellow-800";case"LOW":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},p=h=>{switch(h){case"CCT":return"bg-purple-100 text-purple-800";case"ALS":return"bg-blue-100 text-blue-800";case"BLS":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},d=h=>{switch(h){case"PENDING":return"bg-yellow-100 text-yellow-800";case"ASSIGNED":return"bg-blue-100 text-blue-800";case"IN_PROGRESS":return"bg-green-100 text-green-800";case"COMPLETED":return"bg-gray-100 text-gray-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return r?t.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transport requests..."})]})})}):l?t.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading Transport Requests"}),t.jsx("div",{className:"mt-2 text-sm text-red-700",children:l}),t.jsx("button",{onClick:m,className:"mt-3 text-sm font-medium text-red-800 hover:text-red-900 underline",children:"Try again"})]})]})})})}):t.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Trip Acceptance"}),t.jsx("p",{className:"mt-2 text-gray-600",children:"Review and accept available transport requests for your agency"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:i.status,onChange:h=>c(j=>({...j,status:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"PENDING",children:"Pending"}),t.jsx("option",{value:"ASSIGNED",children:"Assigned"}),t.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),t.jsx("option",{value:"COMPLETED",children:"Completed"}),t.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transport Level"}),t.jsxs("select",{value:i.transportLevel,onChange:h=>c(j=>({...j,transportLevel:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"ALL",children:"All Levels"}),t.jsx("option",{value:"BLS",children:"BLS"}),t.jsx("option",{value:"ALS",children:"ALS"}),t.jsx("option",{value:"CCT",children:"CCT"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),t.jsxs("select",{value:i.priority,onChange:h=>c(j=>({...j,priority:h.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"ALL",children:"All Priorities"}),t.jsx("option",{value:"LOW",children:"Low"}),t.jsx("option",{value:"MEDIUM",children:"Medium"}),t.jsx("option",{value:"HIGH",children:"High"}),t.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Distance (miles)"}),t.jsx("input",{type:"number",value:i.maxDistance,onChange:h=>c(j=>({...j,maxDistance:h.target.value})),placeholder:"No limit",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Revenue ($)"}),t.jsx("input",{type:"number",value:i.minRevenue,onChange:h=>c(j=>({...j,minRevenue:h.target.value})),placeholder:"No minimum",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),t.jsx("div",{className:"space-y-6",children:s.length===0?t.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:t.jsx("p",{className:"text-gray-500 text-lg",children:"No transport requests match your current filters"})}):s.map(h=>t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("div",{className:"flex items-start justify-between mb-4",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Patient ",h.patientId]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f(h.priority)}`,children:h.priority}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p(h.transportLevel)}`,children:h.transportLevel}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d(h.status)}`,children:h.status.replace("_"," ")})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Origin"}),t.jsx("p",{className:"text-gray-700",children:h.originFacility.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:[h.originFacility.address,", ",h.originFacility.city,", ",h.originFacility.state]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Destination"}),t.jsx("p",{className:"text-gray-700",children:h.destinationFacility.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:[h.destinationFacility.address,", ",h.destinationFacility.city,", ",h.destinationFacility.state]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Distance"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[h.estimatedDistance," miles"]})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Duration"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[h.estimatedDuration," min"]})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Revenue Potential"}),t.jsxs("p",{className:"text-lg font-semibold text-green-600",children:["$",h.revenuePotential.toLocaleString()]})]})]}),h.specialRequirements&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Special Requirements"}),t.jsx("p",{className:"text-gray-700",children:h.specialRequirements})]}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Created: ",new Date(h.createdAt).toLocaleString()]})]})}),h.status==="PENDING"&&t.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[t.jsx("button",{onClick:()=>g(h.id),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Accept Trip"}),t.jsx("button",{onClick:()=>{const j=prompt("Please provide a reason for rejection:");j&&u(h.id,j)},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Reject Trip"})]})]},h.id))})]})})};function fv(){const[e,s]=x.useState(null),[n,r]=x.useState(!0),a=As(),l=Dr();x.useEffect(()=>{(async()=>{if(s(null),localStorage.getItem("token"))try{const h=await fl.verify();s(h.data.user)}catch{localStorage.removeItem("token"),localStorage.removeItem("user"),s(null)}r(!1)})()},[]),x.useEffect(()=>{const p=d=>{e&&(l.pathname.startsWith("/login")||l.pathname.startsWith("/register"))&&a("/",{replace:!0})};return window.addEventListener("popstate",p),()=>window.removeEventListener("popstate",p)},[e,l.pathname,a]);const o=(p,d)=>{console.log("TCC_DEBUG: handleLogin called with userData:",p),console.log("TCC_DEBUG: handleLogin called with token:",d?"present":"missing"),s(p),localStorage.setItem("token",d),localStorage.setItem("user",JSON.stringify(p)),console.log("TCC_DEBUG: User state set, localStorage updated"),p.userType==="ADMIN"||p.userType==="USER"?(console.log("TCC_DEBUG: Redirecting to root for admin/user"),a("/",{replace:!0})):console.log("TCC_DEBUG: No redirect needed for healthcare/EMS - component should re-render")},i=()=>{s(null),localStorage.removeItem("token"),localStorage.removeItem("user"),a("/",{replace:!0})},c=p=>{p==="tcc"?a("/login"):p==="healthcare"?a("/healthcare-login"):p==="ems"&&a("/ems-login")},m=p=>{a(p==="healthcare"?"/healthcare-register":"/ems-register")},g=()=>{a("/")},u=()=>{a("/")},f=()=>{s(null),localStorage.removeItem("token"),localStorage.removeItem("user"),a("/")};return console.log("TCC_DEBUG: App render - user:",e,"loading:",n),n?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):e?e.userType==="HEALTHCARE"?t.jsx(ev,{user:e,onLogout:i}):e.userType==="EMS"?t.jsx(ov,{user:e,onLogout:i}):t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsxs(qo,{children:[t.jsx(Le,{path:"/",element:t.jsx(hu,{user:e,onLogout:i})}),t.jsx(Le,{path:"/dashboard/*",element:t.jsx(hu,{user:e,onLogout:i})}),t.jsx(Le,{path:"*",element:t.jsx(Id,{to:"/",replace:!0})})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsxs(qo,{children:[t.jsx(Le,{path:"/",element:t.jsx(iv,{onRoleSelect:c,onShowRegistration:m,onClearSession:f})}),t.jsx(Le,{path:"/healthcare-register",element:t.jsx(cv,{onBack:u,onSuccess:g},"healthcare-register")}),t.jsx(Le,{path:"/ems-register",element:t.jsx(dv,{onBack:u,onSuccess:g})}),t.jsx(Le,{path:"/login",element:t.jsx(Uy,{onLogin:o,onBack:u})}),t.jsx(Le,{path:"/healthcare-login",element:t.jsx(uv,{onBack:u,onLogin:o})}),t.jsx(Le,{path:"/ems-login",element:t.jsx(mv,{onBack:u,onLogin:o})}),t.jsx(Le,{path:"/test-trip-acceptance",element:t.jsx("div",{className:"min-h-screen bg-gray-50",children:t.jsxs("div",{className:"container mx-auto py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Trip Acceptance Test Page"}),t.jsx("p",{className:"text-gray-600",children:"Testing the TripAcceptance component"})]}),t.jsx(hv,{})]})})}),t.jsx(Le,{path:"*",element:t.jsx(Id,{to:"/",replace:!0})})]})})}function gv(){return t.jsx(Wx,{children:t.jsx(pv,{children:t.jsx(fv,{})})})}Jl.createRoot(document.getElementById("root")).render(t.jsx(Sr.StrictMode,{children:t.jsx(gv,{})}));
